(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{122:function(e,t,i){},375:function(e,t,i){},378:function(e,t,i){},379:function(e,t,i){},402:function(e,t,i){},403:function(e,t,i){"use strict";i.r(t);var n=i(10),a=i.n(n),s=(i(122),i(430)),r=i(21),o=i(0),l=i.n(o),c=i(181),h=i.n(c),u=i(80),p=i(16),d=Object(p.e)(),f=d.useStoreActions,m=(d.useStoreDispatch,d.useStoreState),g=i(105),b=i(59),v=i(431),j=i(464),O=i(429),y=i(1),x=function(e){e.author;var t=e.description,i={color:"White",fontSize:"12pt",lineHeight:"12pt",fontFamily:Object(u.a)().typography.fontFamily};return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(O.a,{style:i,children:t}),Object(y.jsx)(O.a,{style:i})]})},E=i(15),T=i(189),S=i.n(T),k=i(190),C=function(e){var t=e.images,i={height:"500px",width:"100vh"};return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(S.a,Object(E.a)(Object(E.a)({dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},{variableWidth:!0,slidesToShow:1}),{},{children:t.map((function(e,t){return Object(y.jsx)("div",{style:i,children:Object(y.jsx)(k.GlassMagnifier,{imageSrc:e.src,allowOverflow:!0,magnifierSize:"40%"})},t)}))}))})},M=function(e){var t=e.title,i=e.author,n=e.year,a=e.discipline,r=Object(u.a)(),o={fontSize:"xxx-large",fontFamily:r.typography.fontFamily},l={fontSize:"xx-large",fontFamily:r.typography.fontFamily};return Object(y.jsx)("span",{children:Object(y.jsxs)(s.a,{container:!0,spacing:0,children:[Object(y.jsx)(s.a,{item:!0,xs:9,style:o,children:t}),Object(y.jsxs)(s.a,{item:!0,xs:3,style:l,children:[i,Object(y.jsx)("br",{}),a,", ",n]})]})})},I=function(e){var t=e.show,i=e.onClick,n=(Object(u.a)(),m((function(e){return e.map_data.lightBoxData})));Object(o.useEffect)((function(){console.log(n)}),[n.author]);var a=Object(b.a)({root:{position:"absolute",zIndex:1,boxSizing:"border-box",paddingLeft:"2em",paddingTop:"2em",opacity:.5,backgroundColor:"rgb(0 0 0 / 73%)"}})(j.a);return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(a,{open:t,children:[Object(y.jsx)("div",{style:{position:"absolute",top:0,left:0,color:"white"},onClick:i,children:Object(y.jsx)(v.a,{})}),Object(y.jsxs)("div",{style:{width:"100%",height:"100%",paddingLeft:"2em"},children:[Object(y.jsx)(M,{author:n.author,title:n.title,discipline:n.discipline,year:n.year}),Object(y.jsxs)(s.a,{container:!0,spacing:3,style:{height:"100vh",width:"100vw",spacing:0,justify:"space-around"},children:[Object(y.jsx)(s.a,{item:!0,xs:3,children:Object(y.jsx)(x,{author:n.author,description:n.description})}),Object(y.jsx)(s.a,{item:!0,xs:9,style:{height:"90vh"},children:Object(y.jsx)(C,{images:n.images})})]})]})]})})};i(375),i(376),i(377),i(378);var w=function(){var e=m((function(e){var t;return null===(t=e.map_data)||void 0===t?void 0:t.computedActiveImages})),t=Object(o.useState)(!1),i=Object(r.a)(t,2),n=i[0],a=i[1],s=f((function(e){return e.map_data.set_lightboxData})),l=m((function(e){return e.map_data.lightBoxData})),c=m((function(e){return e.map_data.loaded})),p=Object(u.a)();Object(o.useEffect)((function(){console.log(e)}),[e,l]),Object(o.useEffect)((function(){console.log("data loaded changd, val is",c)}),[c]);var d={overflow:"hidden",height:"100%",border:"1px solid ".concat(p.palette.primary.main)};return Object(y.jsxs)("div",{style:{backgroundColor:"white",height:"100%",margin:"auto",flexDirection:"column"},children:[Object(y.jsx)("div",{children:Object(y.jsx)(I,{show:n,onClick:function(){return a(!1)}})}),Object(y.jsx)("div",{style:d,children:Object(y.jsx)(g.Scrollbars,{style:{width:"100%",height:"100%"},children:Object(y.jsx)("div",{style:{height:"100%",paddingTop:"0",width:"100%"},children:Object(y.jsx)(h.a,{tagStyle:{display:"none"},images:e,customOverlay:Object(y.jsx)("div",{style:{backgroundColor:"red"}}),rowHeight:120,maxRows:10,enableLightbox:!1,enableImageSelection:!1,onClickThumbnail:function(){console.log(this.props),a((function(e){return!e})),console.log(n),s(this.props.item)},tileViewportStyle:function(e,t,i){var n,a,s=(n=.5,a=4,n=Math.ceil(n),a=Math.floor(a),Math.random()*(a-n)+n);if(c)return{animation:"fadein ".concat(s,"s normal"),animationIterationCound:1}}})})})})]})},A=i(432),R=i(433);var D=function(){var e=Object(u.a)(),t={height:"100%",width:"100%",paddingBottom:"1em",paddingRight:"2em",textAlign:"left",display:"flex",flexDirection:"column",justifyContent:"space-evenly",color:e.palette.primary.main,fontFamily:e.typography.fontFamily},i={color:e.palette.primary.main,fontSize:"9pt",lineHeight:"12pt",fontFamily:e.typography.fontFamily,fontWeight:800};return Object(y.jsx)(A.a,{style:t,children:Object(y.jsx)(R.a,{style:{lineHeight:"12pt"},children:Object(y.jsx)(O.a,{style:i,children:"Since 2001 Raleigh has experienced an unprecedented 43% population growth. As the city continues to expand physically and economically, the need for an inclusive dialog concerning the type of city that Raleigh should be increases dramatically. Many of downtown\u2019s adjacent historic neighborhoods are struggling to maintain their identity as rising property values displace longtime community members and new development erases historic urban fabric. This reality makes for a critical moment to reflect and recognize significant urban spaces as we shape the future city. These series of maps created by students in a Graduate seminar in the College of Design at NC State use mapping as a way to examine the history and future of Raleigh's urban develop\u2014not just from a physical and infrastructural perspective, but also the ways that social, economic, political and natural development have also shaped it. They offer alternative methods to visualize, capture and integrate contemporary and historic voices into a rich discourse on community, culture and urban redevelopment."})})})},_=(i(379),i(8)),N=i(14),P=i(11),L=i(24),U=i(23),B=i(4),F=i(193),z=i.n(F),H=i(20),G=i.n(H),Y=i(71),W=i(22),V=i(30);function Z(e){return"".concat(e.domain(),"-").concat(e.range())}function X(e){var t=document.documentElement,i=e.getBoundingClientRect();return{top:i.top+window.pageYOffset-t.clientTop,left:i.left+window.pageXOffset-t.clientLeft}}var q=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(e){var n;return Object(_.a)(this,i),(n=t.call(this,e)).state={isBrushing:!1},n.handleBrushMouseDown=n.handleBrushMouseDown.bind(Object(P.a)(n)),n.handleOverlayMouseDown=n.handleOverlayMouseDown.bind(Object(P.a)(n)),n.handleHandleMouseDown=n.handleHandleMouseDown.bind(Object(P.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(P.a)(n)),n.handleClick=n.handleClick.bind(Object(P.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(P.a)(n)),n}return Object(N.a)(i,[{key:"viewport",value:function(){var e=this.props,t=e.width,i=e.timeScale,n=i.invert(0),a=i.invert(t);return new W.TimeRange(n,a)}},{key:"handleBrushMouseDown",value:function(e){e.preventDefault();var t=e.pageX,i=e.pageY,n=[Math.round(t),Math.round(i)],a=+this.props.timeRange.begin(),s=+this.props.timeRange.end();document.addEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!0,brushingInitializationSite:"brush",initialBrushBeginTime:a,initialBrushEndTime:s,initialBrushXYPosition:n})}},{key:"handleOverlayMouseDown",value:function(e){e.preventDefault();var t=X(this.overlay),i=e.pageX-t.left,n=this.props.timeScale.invert(i).getTime();document.addEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!0,brushingInitializationSite:"overlay",initialBrushBeginTime:n,initialBrushEndTime:n,initialBrushXYPosition:null})}},{key:"handleHandleMouseDown",value:function(e,t){e.preventDefault();var i=e.pageX,n=e.pageY,a=[Math.round(i),Math.round(n)],s=this.props.timeRange.begin().getTime(),r=this.props.timeRange.end().getTime();document.addEventListener("mouseover",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!0,brushingInitializationSite:"handle-".concat(t),initialBrushBeginTime:s,initialBrushEndTime:r,initialBrushXYPosition:a})}},{key:"handleMouseUp",value:function(e){e.preventDefault(),document.removeEventListener("mouseover",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!1,brushingInitializationSite:null,initialBrushBeginTime:null,initialBrushEndTime:null,initialBrushXYPosition:null})}},{key:"handleClick",value:function(){this.props.allowSelectionClear&&this.props.onTimeRangeChanged&&this.props.onTimeRangeChanged(null)}},{key:"handleMouseMove",value:function(e){e.preventDefault();var t=e.pageX,i=e.pageY,n=[Math.round(t),Math.round(i)],a=this.viewport();if(this.state.isBrushing){var s,r,o=this.state.initialBrushBeginTime,l=this.state.initialBrushEndTime;if("overlay"===this.state.brushingInitializationSite){var c=X(this.overlay),h=e.pageX-c.left,u=this.props.timeScale.invert(h).getTime();u<o?(s=u<a.begin().getTime()?a.begin():u,r=o>a.end().getTime()?a.end():o):(s=o<a.begin().getTime()?a.begin():o,r=u>a.end().getTime()?a.end():u)}else{var p=this.state.initialBrushXYPosition,d=this.props.timeScale.invert(p[0]).getTime()-this.props.timeScale.invert(n[0]).getTime(),f=d,m=d;if(o-d<a.begin()&&(f=o-a.begin().getTime()),l-d>a.end()&&(m=l-a.end().getTime()),(s="brush"===this.state.brushingInitializationSite||"handle-left"===this.state.brushingInitializationSite?parseInt(o-f,10):o)>(r="brush"===this.state.brushingInitializationSite||"handle-right"===this.state.brushingInitializationSite?parseInt(l-m,10):l)){var g=[r,s];s=g[0],r=g[1]}}this.props.onTimeRangeChanged&&this.props.onTimeRangeChanged(new W.TimeRange(s,r))}}},{key:"renderOverlay",value:function(){var e,t=this,i=this.props,n=i.width,a=i.height;switch(this.state.brushingInitializationSite){case"handle-right":case"handle-left":e="ew-resize";break;case"brush":e="move";break;default:e="crosshair"}var s={fill:"white",opacity:0,cursor:e};return Object(y.jsx)("rect",{ref:function(e){t.overlay=e},x:0,y:0,width:n,height:a,style:s,onMouseDown:this.handleOverlayMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick})}},{key:"renderBrush",value:function(){var e,t=this.props,i=t.timeRange,n=t.timeScale,a=t.height,s=t.style;if(!i)return Object(y.jsx)("g",{});switch(this.state.brushingInitializationSite){case"handle-right":case"handle-left":e="ew-resize";break;case"overlay":e="crosshair";break;default:e="move"}var r={fill:"#777",fillOpacity:.3,stroke:"#fff",shapeRendering:"crispEdges",cursor:e},o=G()(!0,r,s);if(!this.viewport().disjoint(i)){var l=i.intersection(this.viewport()),c=l.begin(),h=l.end(),u=[n(c),0],p=u[0],d=u[1],f=n(h)-p;f<1&&(f=1);var m={x:p,y:d,width:f,height:a};return Object(y.jsx)("rect",Object(E.a)(Object(E.a)({},m),{},{style:o,pointerEvents:"all",onMouseDown:this.handleBrushMouseDown,onMouseUp:this.handleMouseUp}))}return Object(y.jsx)("g",{})}},{key:"renderHandles",value:function(){var e=this,t=this.props,i=t.timeRange,n=t.timeScale,a=t.height;if(!i)return Object(y.jsx)("g",{});var s={fill:"white",opacity:0,cursor:"ew-resize"};if(!this.viewport().disjoint(i)){var o=i.intersection(this.viewport()).toJSON(),l=Object(r.a)(o,2),c=l[0],h=l[1],u=[n(c),0],p=u[0],d=u[1],f=n(h)-p;f<1&&(f=1);var m=this.props.handleSize,g={x:p-1,y:d,width:m,height:a},b={x:p+(f-m),y:d,width:m+1,height:a};return Object(y.jsxs)("g",{children:[Object(y.jsx)("rect",Object(E.a)(Object(E.a)({},g),{},{style:s,pointerEvents:"all",onMouseDown:function(t){return e.handleHandleMouseDown(t,"left")},onMouseUp:this.handleMouseUp})),Object(y.jsx)("rect",Object(E.a)(Object(E.a)({},b),{},{style:s,pointerEvents:"all",onMouseDown:function(t){return e.handleHandleMouseDown(t,"right")},onMouseUp:this.handleMouseUp}))]})}return Object(y.jsx)("g",{})}},{key:"render",value:function(){return Object(y.jsxs)("g",{onMouseMove:this.handleMouseMove,children:[this.renderOverlay(),this.renderBrush(),this.renderHandles()]})}}]),i}(l.a.Component);q.defaultProps={handleSize:6,allowSelectionClear:!1};var K=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(e){var n;return Object(_.a)(this,i),(n=t.call(this,e)).hasNullBrush=function(){return(n.props.timeRanges||[]).length>0&&null==n.props.timeRanges[n.props.timeRanges.length-1]},n.handleMouseClick=function(e,t){n.props.onTimeRangeClicked&&n.props.onTimeRangeClicked(t)},n.state={isBrushing:!1},n.handleBrushMouseDown=n.handleBrushMouseDown.bind(Object(P.a)(n)),n.handleOverlayMouseDown=n.handleOverlayMouseDown.bind(Object(P.a)(n)),n.handleHandleMouseDown=n.handleHandleMouseDown.bind(Object(P.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(P.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(P.a)(n)),n}return Object(N.a)(i,[{key:"viewport",value:function(){var e=this.props,t=e.width,i=e.timeScale,n=i.invert(0),a=i.invert(t);return new W.TimeRange(n,a)}},{key:"handleBrushMouseDown",value:function(e,t){e.preventDefault();var i=e.pageX,n=e.pageY,a=[Math.round(i),Math.round(n)],s=+this.props.timeRanges[t].begin(),r=+this.props.timeRanges[t].end();document.addEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!0,brushingInitializationSite:"brush",initialBrushBeginTime:s,initialBrushEndTime:r,initialBrushXYPosition:a,brushIndex:t})}},{key:"handleOverlayMouseDown",value:function(e){if(this.props.allowFreeDrawing||this.hasNullBrush()){e.preventDefault();var t=X(this.overlay),i=e.pageX-t.left,n=this.props.timeScale.invert(i).getTime();document.addEventListener("mouseup",this.handleMouseUp);var a=this.props.allowFreeDrawing?this.props.timeRanges.length:this.props.timeRanges.length-1;this.setState({isBrushing:!0,brushingInitializationSite:"overlay",initialBrushBeginTime:n,initialBrushEndTime:n,initialBrushXYPosition:null,brushIndex:a})}}},{key:"handleHandleMouseDown",value:function(e,t,i){e.preventDefault();var n=e.pageX,a=e.pageY,s=[Math.round(n),Math.round(a)],r=this.props.timeRanges[i].begin().getTime(),o=this.props.timeRanges[i].end().getTime();document.addEventListener("mouseover",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!0,brushingInitializationSite:"handle-".concat(t),initialBrushBeginTime:r,initialBrushEndTime:o,initialBrushXYPosition:s,brushIndex:i})}},{key:"handleMouseUp",value:function(e){var t=this;e.preventDefault(),document.removeEventListener("mouseover",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp);var i=this.state.brushIndex;this.setState({isBrushing:!1,brushingInitializationSite:null,initialBrushBeginTime:null,initialBrushEndTime:null,initialBrushXYPosition:null,brushIndex:null},(function(){t.props.onUserMouseUp&&t.props.onUserMouseUp(i)}))}},{key:"handleMouseMove",value:function(e){e.preventDefault();var t=e.pageX,i=e.pageY,n=[Math.round(t),Math.round(i)],a=this.viewport();if(this.state.isBrushing){var s,r,o=this.state.initialBrushBeginTime,l=this.state.initialBrushEndTime;if("overlay"===this.state.brushingInitializationSite){var c=X(this.overlay),h=e.pageX-c.left,u=this.props.timeScale.invert(h).getTime();u<o?(s=u<a.begin().getTime()?a.begin():u,r=o>a.end().getTime()?a.end():o):(s=o<a.begin().getTime()?a.begin():o,r=u>a.end().getTime()?a.end():u)}else{var p=this.state.initialBrushXYPosition,d=this.props.timeScale.invert(p[0]).getTime()-this.props.timeScale.invert(n[0]).getTime(),f=d,m=d;if(o-d<a.begin()&&(f=o-a.begin().getTime()),l-d>a.end()&&(m=l-a.end().getTime()),(s="brush"===this.state.brushingInitializationSite||"handle-left"===this.state.brushingInitializationSite?parseInt(o-f,10):o)>(r="brush"===this.state.brushingInitializationSite||"handle-right"===this.state.brushingInitializationSite?parseInt(l-m,10):l)){var g=[r,s];s=g[0],r=g[1]}}this.props.onTimeRangeChanged&&this.props.onTimeRangeChanged(new W.TimeRange(s,r),this.state.brushIndex)}}},{key:"renderOverlay",value:function(){var e,t=this,i=this.props,n=i.width,a=i.height;switch(this.state.brushingInitializationSite){case"handle-right":case"handle-left":e="ew-resize";break;case"brush":e="move";break;default:e=this.props.allowFreeDrawing||this.hasNullBrush()?"crosshair":"default"}var s={fill:"white",opacity:0,cursor:e};return Object(y.jsx)("rect",{ref:function(e){t.overlay=e},x:0,y:0,width:n,height:a,style:s,onClick:this.handleMouseClick,onMouseDown:this.handleOverlayMouseDown,onMouseUp:this.handleMouseUp})}},{key:"renderBrush",value:function(e,t){var i,n=this,a=this.props,s=a.timeScale,r=a.height;if(!e)return Object(y.jsx)("g",{});switch(this.state.brushingInitializationSite){case"handle-right":case"handle-left":i="ew-resize";break;case"overlay":i=this.props.allowFreeDrawing||this.hasNullBrush()?"crosshair":"default";break;default:i="move"}var l={fill:"#777",fillOpacity:.3,stroke:"#fff",shapeRendering:"crispEdges",cursor:i},c=this.props.style?this.props.style(t):{},h=G()(!0,l,c);if(!this.viewport().disjoint(e)){var u=e.intersection(this.viewport()),p=u.begin(),d=u.end(),f=[s(p),0],m=f[0],g=f[1],b=s(d)-m;b<1&&(b=1);var v={x:m,y:g,width:b,height:r};return Object(o.createElement)("rect",Object(E.a)(Object(E.a)({},v),{},{key:"".concat(t,"-").concat(h),style:h,pointerEvents:"all",onClick:function(e){return n.handleMouseClick(e,t)},onMouseDown:function(e){return n.handleBrushMouseDown(e,t)},onMouseUp:this.handleMouseUp}))}return Object(y.jsx)("g",{})}},{key:"renderHandles",value:function(e,t){var i=this,n=this.props,a=n.timeScale,s=n.height;if(!e)return Object(y.jsx)("g",{});var o={fill:"white",opacity:0,cursor:"ew-resize"};if(!this.viewport().disjoint(e)){var l=e.intersection(this.viewport()).toJSON(),c=Object(r.a)(l,2),h=c[0],u=c[1],p=[a(h),0],d=p[0],f=p[1],m=a(u)-d;m<1&&(m=1);var g=this.props.handleSize,b={x:d-1,y:f,width:g,height:s},v={x:d+(m-g),y:f,width:g+1,height:s};return Object(y.jsxs)("g",{children:[Object(y.jsx)("rect",Object(E.a)(Object(E.a)({},b),{},{style:o,pointerEvents:"all",onMouseDown:function(e){return i.handleHandleMouseDown(e,"left",t)},onMouseUp:this.handleMouseUp})),Object(y.jsx)("rect",Object(E.a)(Object(E.a)({},v),{},{style:o,pointerEvents:"all",onMouseDown:function(e){return i.handleHandleMouseDown(e,"right",t)},onMouseUp:this.handleMouseUp}))]})}return Object(y.jsx)("g",{})}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("g",{onMouseMove:this.handleMouseMove,children:[this.renderOverlay(),(this.props.timeRanges||[]).map((function(t,i){return Object(y.jsxs)("g",{children:[e.renderBrush(t,i),e.renderHandles(t,i)]},"multibrush_".concat(i))}))]})}}]),i}(l.a.Component);K.defaultProps={handleSize:6,allowFreeDrawing:!0};var Q=i(443),J=(i(115),i(19)),$=i(27),ee=i(461),te=i(442),ie=(i(180),{label:{stroke:"none",fill:"#8B7E7E",fontWeight:100,fontSize:12,font:'"Goudy Bookletter 1911", sans-serif"'},values:{stroke:"none",fill:"#8B7E7E",fontWeight:100,fontSize:11,font:'"Goudy Bookletter 1911", sans-serif"'},ticks:{fill:"none",stroke:"#C0C0C0"},axis:{fill:"none",stroke:"#C0C0C0"}}),ne=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(){return Object(_.a)(this,i),t.apply(this,arguments)}return Object(N.a)(i,[{key:"componentDidMount",value:function(){this.renderAxis(this.props.align,this.props.scale,+this.props.width,+this.props.height,this.props.showGrid,+this.props.chartExtent,this.props.hideAxisLine,this.props.absolute,this.props.type,this.props.format,this.props.label,this.props.tickCount,this.props.min,this.props.max)}},{key:"componentWillReceiveProps",value:function(e){var t=e.scale,i=e.align,n=e.width,a=e.height,s=e.chartExtent,r=e.absolute,o=e.format,l=e.type,c=e.showGrid,h=e.hideAxisLine,u=e.label,p=e.tickCount,d=e.min,f=e.max;Z(this.props.scale)!==Z(t)?this.updateAxis(i,t,n,a,c,s,h,r,l,o,u,p,d,f):this.props.format!==o||this.props.align!==i||this.props.width!==n||this.props.height!==a||this.props.type!==l||this.props.absolute!==r||this.props.chartExtent!==s||this.props.showGrid!==c||this.props.hideAxisLine!==h?this.renderAxis(i,t,+n,+a,c,s,h,r,l,o,u,p,d,f):this.props.label!==u&&this.updateLabel(u)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"yformat",value:function(e){return B.default.isString(e)?Object(ee.a)(e):B.default.isFunction(e)?e:Object(ee.a)("")}},{key:"mergeStyles",value:function(e){return{labelStyle:G()(!0,ie.label,this.props.style.label?this.props.style.label:{}),valueStyle:G()(!0,ie.values,this.props.style.values?this.props.style.values:{}),axisStyle:G()(!0,ie.axis,this.props.style.axis?this.props.style.axis:{}),tickStyle:G()(!0,ie.ticks,this.props.style.ticks?this.props.style.ticks:{})}}},{key:"postSelect",value:function(e,t,i){var n=e.valueStyle,s=e.tickStyle,r=e.axisStyle;Object(te.a)(a.a.findDOMNode(this)).select("g").selectAll(".tick").select("text").styles(n),Object(te.a)(a.a.findDOMNode(this)).select("g").selectAll(".tick").select("line").styles(s),Object(te.a)(a.a.findDOMNode(this)).select("g").selectAll(".domain").remove(),t||Object(te.a)(a.a.findDOMNode(this)).select("g").append("line").styles(r).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",i)}},{key:"generator",value:function(e,t,i,n,a,s,r,o,l){var c;if("linear"===e||"power"===e)if(r>0){var h=(l-o)/(r-1);c=n(a).tickValues(Object(J.e)(o,l+l/1e4,h)).tickFormat((function(e){return i(t?Math.abs(e):e)})).tickSizeOuter(0)}else c=s<=200?n(a).ticks(4).tickFormat((function(e){return i(t?Math.abs(e):e)})).tickSizeOuter(0):n(a).tickFormat((function(e){return i(t?Math.abs(e):e)})).tickSizeOuter(0);else if("log"===e){if(0===o)throw Error("In a log scale, minimum value can't be 0");c=n(a).ticks(10,".2s").tickSizeOuter(0)}return c}},{key:"renderAxis",value:function(e,t,i,n,s,r,o,l,c,h,u,p,d,f){var m=this.yformat(h),g="left"===e?$.b:$.c,b=this.mergeStyles(this.props.style),v=b.labelStyle,j=b.valueStyle,O=s&&this.props.isInnerAxis?-r:5,y="left"===e?i-0:0,x="left"===e?this.props.labelOffset-50:40+this.props.labelOffset,E=this.generator(c,l,m,g,t,n,p,d,f);Object(te.a)(a.a.findDOMNode(this)).selectAll("*").remove(),this.axis=Object(te.a)(a.a.findDOMNode(this)).append("g").attr("transform","translate(".concat(y,",0)")).attr("class","yaxis").styles(j).call(E.tickSize(O)).append("text").text(u||this.props.label).styles(v).attr("transform","rotate(-90)").attr("class","yaxislabel").attr("y",x).attr("dy",".71em").attr("text-anchor","end"),this.postSelect(b,o,n)}},{key:"updateAxis",value:function(e,t,i,n,s,r,o,l,c,h,u,p,d,f){var m=this.yformat(h),g="left"===e?$.b:$.c,b=this.mergeStyles(this.props.style),v=s&&this.props.isInnerAxis?-r:5,j=this.generator(c,l,m,g,t,n,p,d,f);Object(te.a)(a.a.findDOMNode(this)).select(".yaxis").transition().duration(this.props.transition).ease(Q.a).call(j.tickSize(v)),this.updateLabel(u),this.postSelect(b,o,n)}},{key:"updateLabel",value:function(e){Object(te.a)(a.a.findDOMNode(this)).select(".yaxislabel").text(e)}},{key:"render",value:function(){return Object(y.jsx)("g",{})}}]),i}(l.a.Component);ne.defaultProps={id:"yaxis",align:"left",min:0,max:1,showGrid:!1,hideAxisLine:!1,type:"linear",absolute:!1,format:".2s",labelOffset:0,transition:100,width:80,style:ie};var ae=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(){return Object(_.a)(this,i),t.apply(this,arguments)}return Object(N.a)(i,[{key:"render",value:function(){return"".concat(this.constructor.name," elements are for configuration only\nand should not be rendered")}}]),i}(l.a.Component),se=i(58),re=i.n(se),oe=i(465),le=(i(179),{fill:"#FEFEFE",stroke:"#DDD",opacity:.8}),ce={fontSize:11,textAnchor:"left",fill:"#b0b0b0",pointerEvents:"none"},he={fontSize:11,textAnchor:"middle",fill:"#bdbdbd",pointerEvents:"none"};var ue=function(e){var t=e.align,i=e.style,n=e.width,a=e.height,s=function(e,t){return{boxStyle:G()(!0,le,e.box?e.box:{}),labelStyle:G()(!0,t?he:ce,e.label?e.label:{})}}(i,"center"===t),r=s.boxStyle,o=s.labelStyle;if(!e.values.length)return Object(y.jsx)("g",{});var l=e.values.map((function(i,n){if("left"===t)return Object(y.jsx)("g",{children:Object(y.jsxs)("text",{x:10,y:5,dy:"".concat(1.2*(n+1),"em"),style:o,children:[Object(y.jsx)("tspan",{style:{fontWeight:700},children:"".concat(i.label,": ")}),Object(y.jsx)("tspan",{children:"".concat(i.value)})]})},n);var a=parseInt(e.width/2,10);return Object(y.jsx)("g",{children:Object(y.jsxs)("text",{x:a,y:5,dy:"".concat(1.2*(n+1),"em"),style:o,children:[Object(y.jsx)("tspan",{style:{fontWeight:700},children:"".concat(i.label,": ")}),Object(y.jsx)("tspan",{children:"".concat(i.value)})]})},n)})),c=Object(y.jsx)("rect",{style:r,x:0,y:0,width:n,height:a});return Object(y.jsxs)("g",{children:[c,l]})};ue.defaultProps={align:"center",width:100,height:100,pointerEvents:"none",style:{fill:"#FEFEFE",stroke:"#DDD",opacity:.8}};var pe=ue,de={fill:"#FEFEFE",stroke:"#DDD",opacity:.8},fe={fontSize:11,textAnchor:"left",fill:"#b0b0b0",pointerEvents:"none"},me={fontSize:11,textAnchor:"middle",fill:"#bdbdbd",pointerEvents:"none"};var ge=function(e){var t=e.label,i=e.style,n=e.align,a=e.width,s=e.height,r=function(e,t){return{boxStyle:G()(!0,de,e.box?e.box:{}),labelStyle:G()(!0,t?me:fe,e.label?e.label:{})}}(i,"center"===n),o=r.boxStyle,l=r.labelStyle,c="center"===n?parseInt(a/2,10):10,h=Object(y.jsx)("text",{x:c,y:5,dy:"1.2em",style:l,children:t}),u=Object(y.jsx)("rect",{x:0,y:0,style:o,width:a,height:s});return Object(y.jsxs)("g",{children:[u,h]})};ge.defaultProps={align:"center",width:100,height:100,pointerEvents:"none"};var be=ge,ve=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(){return Object(_.a)(this,i),t.apply(this,arguments)}return Object(N.a)(i,[{key:"renderLine",value:function(e){return Object(y.jsx)("line",{style:this.props.infoStyle.line,x1:e,y1:0,x2:e,y2:this.props.height})}},{key:"renderTimeMarker",value:function(e){var t="".concat(e);if("day"===this.props.timeFormat)t=Object(oe.a)("%d")(e);else if("month"===this.props.timeFormat){t=Object(oe.a)("%B")(e)}else if("year"===this.props.timeFormat){t=Object(oe.a)("%Y")(e)}else if("relative"===this.props.timeFormat)t=re.a.duration(+e).format();else if(B.default.isString(this.props.timeFormat)){t=Object(oe.a)(this.props.timeFormat)(e)}else B.default.isFunction(this.props.timeFormat)&&(t=this.props.timeFormat(e));return Object(y.jsx)("text",{x:0,y:0,dy:"1.2em",style:{fontSize:11,textAnchor:"left",fill:"#bdbdbd"},children:t})}},{key:"renderInfoBox",value:function(e){var t=this.props.infoWidth,i={align:"left",style:{box:this.props.infoStyle.box,label:this.props.infoStyle.label},width:this.props.infoWidth,height:this.props.infoHeight};if(this.props.infoValues){var n=B.default.isString(this.props.infoValues)?Object(y.jsx)(be,Object(E.a)(Object(E.a)({},i),{},{label:this.props.infoValues})):Object(y.jsx)(pe,Object(E.a)(Object(E.a)({},i),{},{values:this.props.infoValues}));return e+10+t<this.props.width-50?Object(y.jsxs)("g",{transform:"translate(".concat(e+10,",",5,")"),children:[this.props.showTime?this.renderTimeMarker(this.props.time):null,Object(y.jsx)("g",{transform:"translate(0,".concat(this.props.showTime?20:0,")"),children:n})]}):Object(y.jsxs)("g",{transform:"translate(".concat(e-t-10,",",5,")"),children:[this.props.showTime?this.renderTimeMarker(this.props.time):null,Object(y.jsx)("g",{transform:"translate(0,".concat(this.props.showTime?20:0,")"),children:n})]})}return Object(y.jsx)("g",{})}},{key:"render",value:function(){var e=this.props.timeScale(this.props.time);return e?Object(y.jsxs)("g",{children:[this.props.showLine?this.renderLine(e):null,this.props.showInfoBox?this.renderInfoBox(e):null]}):null}}]),i}(l.a.Component);ve.defaultProps={visible:!0,showInfoBox:!0,showLine:!0,showTime:!0,infoStyle:{line:{stroke:"#999",cursor:"crosshair",pointerEvents:"none"},box:{fill:"white",opacity:.9,stroke:"#999",pointerEvents:"none"},dot:{fill:"#999"}},infoWidth:90,infoHeight:25};var je=function(){function e(t,i,n){Object(_.a)(this,e),this.id=B.default.uniqueId("scaler"),this.ease=i,this.transitionTime=t,this.observer=n,this.sourceScale=null,this.targetScale=null,this.cachedScaler=null,this.cacheKey=null}return Object(N.a)(e,[{key:"update",value:function(){var e=this,t=0;this.initialTimestamp?t=window.performance.now()-this.initialTimestamp:this.initialTimestamp=window.performance.now();var i=this.transitionTime?Math.min(t/this.transitionTime,1):1;if(this.targetScale){if(this.observer){var n=this.sourceScale,a=this.targetScale,s=this.ease(i);this.observer((function(e){var t=n(e);return t+(a(e)-t)*s}))}i<1?setTimeout((function(){return e.update()}),20):(this.sourceScale=this.targetScale,this.targetScale=null,this.initialTimestamp=null)}}},{key:"setScale",value:function(e,t){var i=this;this.sourceScale?(e!==this.cacheKey&&(this.targetScale=t,this.cachedScaler=null,this.initialTimestamp=null,setTimeout((function(){return i.update()}),0)),this.cacheKey=e):this.sourceScale=t}},{key:"scaler",value:function(){var e=this;return B.default.isNull(this.cachedScaler)&&(this.cachedScaler=function(t){return e.sourceScale(t)}),this.cachedScaler}},{key:"latestScale",value:function(){return this.targetScale?this.targetScale:this.sourceScale}},{key:"transition",value:function(){return this.transitionTime}}]),e}();var Oe=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(e){var n;Object(_.a)(this,i),(n=t.call(this,e)).isChildYAxis=function(e){return Object(V.areComponentsEqual)(e.type,ne)||B.default.has(e.props,"min")&&B.default.has(e.props,"max")};var a=B.default.uniqueId("clip_"),s="url(#".concat(a,")");return n.state={clipId:a,clipPathURL:s},n.mounted=!0,n}return Object(N.a)(i,[{key:"updateScales",value:function(e){var t=this,i=e.axisMargin,n=+e.height-2*i,a=i,s=n-i;l.a.Children.forEach(e.children,(function(e){if(null!==e&&t.isChildYAxis(e)){var i,n=e.props,r=n.id,o=n.max,l=n.min,c=n.transition,h=void 0===c?0:c,u=n.type,p=void 0===u?"linear":u;B.default.has(t.scaleMap,r)||(t.scaleMap[r]=new je(h,Q.a,(function(e){var i=t.state.yAxisScalerMap;i[r]=e,t.mounted&&t.setState(i)}))),i=B.default.has(e.props,"yScale")?e.props.yScale:function(e,t,i,n,a,s){var r;if(B.default.isUndefined(i)||B.default.isUndefined(n))r=null;else if("linear"===t)r=Object(Y.a)().domain([i,n]).range([a,s]).nice();else if("log"===t){var o=e.props.logBase||10;r=Object(Y.b)().base(o).domain([i,n]).range([a,s])}else if("power"===t){var l=e.props.powerExponent||2;r=Object(Y.c)().exponent(l).domain([i,n]).range([a,s])}return r}(e,p,l,o,s,a);var d="".concat(p,"-").concat(l,"-").concat(o,"-").concat(s,"-").concat(a);t.scaleMap[r].setScale(d,i)}}));var r={};B.default.forEach(this.scaleMap,(function(e,t){r[t]=e.scaler()})),this.mounted&&this.setState({yAxisScalerMap:r})}},{key:"componentWillMount",value:function(){this.scaleMap={},this.updateScales(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.updateScales(e)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t,i,n,a=this,s=this.props,r=s.paddingLeft,o=s.paddingRight,c=[],h=[],u=+this.props.height-2*this.props.axisMargin,p={},d=[],f=[],m=!0;l.a.Children.forEach(this.props.children,(function(e){if(null!==e)if(Object(V.areComponentsEqual)(e.type,ae))m=!1;else{var t=e.props.id;if(a.isChildYAxis(e)){var i=e;i.props.id&&!1!==i.props.visible&&(p[i.props.id]=i),m?d.push(t):f.push(t)}}})),d.reverse();var g=0,b=B.default.reduce(this.props.leftAxisWidths,(function(e,t){return e+t}),0),v=B.default.reduce(this.props.rightAxisWidths,(function(e,t){return e+t}),0),j=this.props.width-b-v-r-o;g=b;for(var O=0;O<this.props.leftAxisWidths.length;O+=1){var x=this.props.leftAxisWidths[O];g-=x,x>0&&O<d.length&&(t=d[O],B.default.has(p,t)&&(e="translate(".concat(g+r,",0)"),i={width:x,height:u,chartExtent:j,isInnerAxis:0===O,align:"left",scale:this.scaleMap[t].latestScale()},n=l.a.cloneElement(p[t],i),c.push(Object(y.jsx)("g",{transform:e,children:n},"y-axis-left-".concat(O)))))}g=this.props.width-v-o;for(var T=0;T<this.props.rightAxisWidths.length;T+=1){var S=this.props.rightAxisWidths[T];S>0&&T<f.length&&(t=f[T],B.default.has(p,t)&&(e="translate(".concat(g+r,",0)"),i={width:S,height:u,chartExtent:j,isInnerAxis:0===T,align:"right",scale:this.scaleMap[t].latestScale()},n=l.a.cloneElement(p[t],i),c.push(Object(y.jsx)("g",{transform:e,children:n},"y-axis-right-".concat(T))))),g+=S}var k="translate(".concat(b+r,",0)"),C=0;l.a.Children.forEach(this.props.children,(function(e){if(null!==e&&Object(V.areComponentsEqual)(e.type,ae)){var t=e;l.a.Children.forEach(t.props.children,(function(e){if(!B.default.has(e.props,"visible")||e.props.visible){var t=null;B.default.has(a.state.yAxisScalerMap,e.props.axis)&&(t=a.state.yAxisScalerMap[e.props.axis]);var i=null;B.default.has(a.scaleMap,e.props.axis)&&(i=a.scaleMap[e.props.axis]);var n={key:C,width:j,height:u,timeScale:a.props.timeScale,timeFormat:a.props.timeFormat};t&&(n.yScale=t),i&&(n.transition=i),h.push(l.a.cloneElement(e,n)),C+=1}}))}}));var M=[],I=[];C=0,l.a.Children.forEach(this.props.children,(function(e){if(null!==e){if(Object(V.areComponentsEqual)(e.type,q)||Object(V.areComponentsEqual)(e.type,K)){var t={key:"brush-".concat(C),width:j,height:u,timeScale:a.props.timeScale};Object(V.areComponentsEqual)(e.type,q)?M.push(l.a.cloneElement(e,t)):I.push(l.a.cloneElement(e,t))}C+=1}}));var w,A=Object(y.jsx)("g",{transform:k,children:Object(y.jsx)("g",{clipPath:this.state.clipPathURL,children:h},"charts")},"event-rect-group"),R=Object(y.jsx)("defs",{children:Object(y.jsx)("clipPath",{id:this.state.clipId,children:Object(y.jsx)("rect",{x:"0",y:"0",style:{strokeOpacity:0},width:j,height:u})})}),D=Object(y.jsx)("g",{transform:k,children:M},"brush-group"),_=Object(y.jsx)("g",{transform:k,children:I},"multi-brush-group");if(this.props.trackerTime){var N={timeFormat:this.props.trackerTimeFormat||this.props.timeFormat,showLine:!1,showTime:this.props.trackerShowTime,time:this.props.trackerTime,timeScale:this.props.timeScale,width:j,infoStyle:this.props.trackerStyle};this.props.trackerInfoValues&&(N.infoWidth=this.props.trackerInfoWidth,N.infoHeight=this.props.trackerInfoHeight,N.infoValues=this.props.trackerInfoValues,N.timeFormat=this.props.trackerTimeFormat);var P="translate(".concat(b+r,",0)");w=Object(y.jsx)("g",{style:{pointerEvents:"none"},transform:P,children:Object(y.jsx)(ve,Object(E.a)({},N))},"tracker-group")}return Object(y.jsxs)("g",{children:[R,c,A,D,_,w]})}}]),i}(l.a.Component);Oe.defaultProps={trackerTimeFormat:"%b %d %Y %X",enablePanZoom:!1,height:100,axisMargin:5,visible:!0};var ye=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(e){var n;return Object(_.a)(this,i),(n=t.call(this,e)).state={isPanning:!1,initialPanBegin:null,initialPanEnd:null,initialPanPosition:null},n.handleScrollWheel=n.handleScrollWheel.bind(Object(P.a)(n)),n.handleMouseDown=n.handleMouseDown.bind(Object(P.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(P.a)(n)),n.handleMouseOut=n.handleMouseOut.bind(Object(P.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(P.a)(n)),n.handleContextMenu=n.handleContextMenu.bind(Object(P.a)(n)),n}return Object(N.a)(i,[{key:"componentDidMount",value:function(){this.eventHandlerRef.addEventListener("wheel",this.handleScrollWheel,{passive:!1})}},{key:"getOffsetMousePosition",value:function(e){var t=X(this.eventRect),i=e.pageX-t.left,n=e.pageY-t.top;return[Math.round(i),Math.round(n)]}},{key:"handleScrollWheel",value:function(e){if(this.props.enablePanZoom||this.props.enableDragZoom){e.preventDefault();var t=1+.001*e.deltaY;t>3&&(t=3),t<.1&&(t=.1);var i=this.getOffsetMousePosition(e),n=this.props.scale.domain()[0].getTime(),a=this.props.scale.domain()[1].getTime(),s=this.props.scale.invert(i[0]).getTime(),r=s-parseInt((s-n)*t,10),o=s+parseInt((a-s)*t,10),l=(a-n)*t;if(this.props.minDuration){var c=parseInt(this.props.minDuration,10);l<this.props.minDuration&&(r=s-(s-n)/(a-n)*c,o=s+(a-s)/(a-n)*c)}if(this.props.minTime&&this.props.maxTime){var h=this.props.maxTime.getTime()-this.props.minTime.getTime();l>h&&(l=h)}this.props.minTime&&r<this.props.minTime.getTime()&&(o=(r=this.props.minTime.getTime())+l),this.props.maxTime&&o>this.props.maxTime.getTime()&&(r=(o=this.props.maxTime.getTime())-l);var u=new Date(r),p=new Date(o),d=new W.TimeRange(u,p);this.props.onZoom&&this.props.onZoom(d)}}},{key:"handleMouseDown",value:function(e){if((this.props.enablePanZoom||this.props.enableDragZoom)&&2!==e.button){if(e.preventDefault(),document.addEventListener("mouseover",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),this.props.enableDragZoom){var t=this.getOffsetMousePosition(e);this.setState({isDragging:!0,initialDragZoom:t[0],currentDragZoom:t[0]})}if(this.props.enablePanZoom){var i=e.pageX,n=e.pageY,a=[Math.round(i),Math.round(n)],s=this.props.scale.domain()[0].getTime(),r=this.props.scale.domain()[1].getTime();this.setState({isPanning:!0,initialPanBegin:s,initialPanEnd:r,initialPanPosition:a})}return!1}}},{key:"handleMouseUp",value:function(e){if(this.props.onMouseClick||this.props.enablePanZoom||this.props.enableDragZoom){e.stopPropagation(),document.removeEventListener("mouseover",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp);var t=this.getOffsetMousePosition(e),i=e.pageX,n=this.state.initialPanPosition&&Math.abs(i-this.state.initialPanPosition[0])>2,a=this.state.initialDragZoom&&Math.abs(t[0]-this.state.initialDragZoom)>2;if(!this.props.onMouseClick||n||a||this.props.onMouseClick(t[0],t[1]),this.props.enableDragZoom){if(a){var s=this.props.scale.invert(this.state.initialDragZoom).getTime(),r=this.props.scale.invert(this.state.currentDragZoom).getTime(),o=parseInt(s,10),l=parseInt(r,10);this.props.minTime&&o<this.props.minTime.getTime()&&(o=this.props.minTime.getTime()),this.props.maxTime&&l>this.props.maxTime.getTime()&&(l=this.props.maxTime.getTime());var c=new W.TimeRange([o,l].sort());this.props.onZoom&&this.props.onZoom(c)}this.setState({isDragging:!1,initialDragZoom:null,initialPanEnd:null,currentDragZoom:null})}this.props.enablePanZoom&&this.setState({isPanning:!1,initialPanBegin:null,initialPanEnd:null,initialPanPosition:null})}}},{key:"handleMouseOut",value:function(e){e.preventDefault(),this.props.onMouseOut&&this.props.onMouseOut()}},{key:"handleMouseMove",value:function(e){e.preventDefault();var t=e.pageX,i=e.pageY,n=[Math.round(t),Math.round(i)],a=this.getOffsetMousePosition(e);if(this.state.isDragging&&this.setState({currentDragZoom:a[0]}),this.state.isPanning){var s=this.state.initialPanPosition,r=this.props.scale.invert(n[0]).getTime()-this.props.scale.invert(s[0]).getTime(),o=parseInt(this.state.initialPanBegin-r,10),l=parseInt(this.state.initialPanEnd-r,10),c=parseInt(this.state.initialPanEnd-this.state.initialPanBegin,10);this.props.minTime&&o<this.props.minTime.getTime()&&(l=(o=this.props.minTime.getTime())+c),this.props.maxTime&&l>this.props.maxTime.getTime()&&(o=(l=this.props.maxTime.getTime())-c);var h=new W.TimeRange(o,l);this.props.onZoom&&this.props.onZoom(h)}else if(this.props.onMouseMove){var u=this.getOffsetMousePosition(e);this.props.onMouseMove&&this.props.onMouseMove(u[0],u[1])}}},{key:"handleContextMenu",value:function(e){var t=e.pageX,i=e.pageY;this.props.onContextMenu&&this.props.onContextMenu(t,i)}},{key:"render",value:function(){var e=this,t=this.state.isPanning?"-webkit-grabbing":"default",i={onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseOut:this.handleMouseOut,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu};return Object(y.jsxs)("g",Object(E.a)(Object(E.a)({pointerEvents:"all",ref:function(t){e.eventHandlerRef=t}},i),{},{children:[Object(y.jsx)("rect",{ref:function(t){e.eventRect=t},style:{fill:"#000",opacity:0,cursor:t},x:0,y:0,width:this.props.width,height:this.props.height},"handler-hit-rect"),this.props.children,this.state.isDragging&&Object(y.jsx)("rect",{style:{opacity:.3,fill:"grey"},x:Math.min(this.state.currentDragZoom,this.state.initialDragZoom),y:0,width:Math.abs(this.state.currentDragZoom-this.state.initialDragZoom),height:this.props.height,pointerEvents:"none"})]}))}}]),i}(l.a.Component);ye.defaultProps={enablePanZoom:!1,enableDragZoom:!1};var xe=i(439),Ee=i(437),Te=i(441),Se=i(435),ke=i(440),Ce=i(434);function Me(e){return"".concat(e.domain().toString(),"-").concat(e.range().toString())}var Ie={values:{stroke:"none",fill:"#8B7E7E",fontWeight:100,fontSize:11,font:'"Goudy Bookletter 1911", sans-serif"'},ticks:{fill:"none",stroke:"#C0C0C0"},axis:{fill:"none",stroke:"#C0C0C0"}},we=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(){return Object(_.a)(this,i),t.apply(this,arguments)}return Object(N.a)(i,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scale,i=e.format,n=e.showGrid,a=e.gridHeight;this.renderTimeAxis(t,i,n,a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.scale,i=e.utc,n=e.format,a=e.showGrid,s=e.gridHeight;Me(this.props.scale)===Me(t)&&this.props.utc===i&&this.props.showGrid===a&&this.props.gridHeight===s||this.renderTimeAxis(t,n,a,s)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"mergeStyles",value:function(e){return{valueStyle:G()(!0,Ie.values,this.props.style.values?this.props.style.values:{}),tickStyle:G()(!0,Ie.ticks,this.props.style.ticks?this.props.style.ticks:{})}}},{key:"renderTimeAxis",value:function(e,t,i,n){var s,r=i?-n:10,o=this.props.utc,l=this.props.tickCount,c=this.mergeStyles(this.props.style),h=c.tickStyle,u=c.valueStyle;s=l>0?"day"===t?Object($.a)(e).tickArguments([o?xe.a:Ee.a,1,l]).tickFormat(Object(oe.a)("%d")).tickSizeOuter(0):"month"===t?Object($.a)(e).tickArguments([o?Te.a:Se.a,1,l]).tickFormat(Object(oe.a)("%B")).tickSizeOuter(0):"year"===t?Object($.a)(e).tickArguments([o?ke.a:Ce.a,1,l]).tickFormat(Object(oe.a)("%Y")).tickSizeOuter(0):"relative"===t?Object($.a)(e).ticks(l).tickFormat((function(e){return re.a.duration(+e).format()})).tickSizeOuter(0):B.default.isString(t)?Object($.a)(e).ticks(l).tickFormat(Object(oe.a)(t)).tickSizeOuter(0):B.default.isFunction(t)?Object($.a)(e).ticks(l).tickFormat(t).tickSizeOuter(0):Object($.a)(e).ticks(l).tickSize(0):"day"===t?Object($.a)(e).tickArguments([o?xe.a:Ee.a,1]).tickFormat(Object(oe.a)("%d")).tickSizeOuter(0):"month"===t?Object($.a)(e).tickArguments([o?Te.a:Se.a,1]).tickFormat(Object(oe.a)("%B")).tickSizeOuter(0):"year"===t?Object($.a)(e).tickArguments([o?ke.a:Ce.a,1]).tickFormat(Object(oe.a)("%Y")).tickSizeOuter(0):"relative"===t?Object($.a)(e).tickFormat((function(e){return re.a.duration(+e).format()})).tickSizeOuter(0):B.default.isString(t)?Object($.a)(e).tickFormat(Object(oe.a)(t)).tickSizeOuter(0):B.default.isFunction(t)?Object($.a)(e).tickFormat(t).tickSizeOuter(0):Object($.a)(e).tickSize(0),Object(te.a)(a.a.findDOMNode(this)).selectAll("*").remove(),Object(te.a)(a.a.findDOMNode(this)).append("g").attr("class","x axis").style("stroke","none").styles(u).call(s.tickSize(r)),this.props.angled?Object(te.a)(a.a.findDOMNode(this)).select("g").selectAll(".tick").select("text").styles(u).style("text-anchor","end").attr("dx","-1.2em").attr("dy","0em").attr("transform",(function(e){return"rotate(-65)"})):Object(te.a)(a.a.findDOMNode(this)).select("g").selectAll(".tick").select("text").styles(u),Object(te.a)(a.a.findDOMNode(this)).select("g").selectAll(".tick").select("line").styles(h),Object(te.a)(a.a.findDOMNode(this)).select("g").select("path").remove()}},{key:"render",value:function(){return Object(y.jsx)("g",{})}}]),i}(l.a.Component);we.defaultProps={showGrid:!1,style:Ie,angled:!1};var Ae={axis:{fill:"none",stroke:"#C0C0C0",pointerEvents:"none"}},Re={fontWeight:100,fontSize:14,font:'"Goudy Bookletter 1911", sans-serif"',fill:"#C0C0C0"},De={fontWeight:100,fontSize:13,font:'"Goudy Bookletter 1911", sans-serif"',fill:"#000"},_e={fill:"white",stroke:"none"},Ne={line:{stroke:"#999",cursor:"crosshair",pointerEvents:"none"},box:{fill:"white",opacity:.9,stroke:"#999",pointerEvents:"none"},dot:{fill:"#999"}},Pe=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(e){var n;return Object(_.a)(this,i),(n=t.call(this,e)).handleTrackerChanged=n.handleTrackerChanged.bind(Object(P.a)(n)),n.handleTimeRangeChanged=n.handleTimeRangeChanged.bind(Object(P.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(P.a)(n)),n.handleMouseOut=n.handleMouseOut.bind(Object(P.a)(n)),n.handleContextMenu=n.handleContextMenu.bind(Object(P.a)(n)),n.handleBackgroundClick=n.handleBackgroundClick.bind(Object(P.a)(n)),n.handleZoom=n.handleZoom.bind(Object(P.a)(n)),n.saveSvgRef=n.saveSvgRef.bind(Object(P.a)(n)),n}return Object(N.a)(i,[{key:"handleTrackerChanged",value:function(e){var t=this;this.props.onTrackerChanged&&this.props.onTrackerChanged(e,(function(e){return t.timeScale(e)+t.leftWidth}))}},{key:"handleTimeRangeChanged",value:function(e){this.props.onTimeRangeChanged&&this.props.onTimeRangeChanged(e)}},{key:"handleMouseMove",value:function(e,t){this.handleTrackerChanged(this.timeScale.invert(e)),this.props.onMouseMove&&this.props.onMouseMove(e,t)}},{key:"handleMouseOut",value:function(e){this.handleTrackerChanged(null)}},{key:"handleContextMenu",value:function(e,t){if(this.props.onContextMenu){var i=this.props.scale?this.props.scale.invert(e):this.timeScale.invert(e);this.props.onContextMenu(e,t,i)}}},{key:"handleBackgroundClick",value:function(e,t){if(this.props.onBackgroundClick){var i=this.props.scale?this.props.scale.invert(e):this.timeScale.invert(e);this.props.onBackgroundClick(e,t,i)}}},{key:"handleZoom",value:function(e){this.props.onTimeRangeChanged&&this.props.onTimeRangeChanged(e)}},{key:"saveSvgRef",value:function(e){this.svg=e}},{key:"render",value:function(){var e=this,t=this.props.padding,i=void 0===t?0:t,n=this.props,a=n.paddingLeft,s=void 0===a?i:a,r=n.paddingRight,o=void 0===r?i:r,c=this.props,h=c.paddingTop,u=void 0===h?i:h,p=c.paddingBottom,d=void 0===p?i:p,f=this.props.titleHeight,m=void 0===f?28:f;B.default.isUndefined(this.props.title)&&(m=0);var g=[],b=[],v=[],j=[];l.a.Children.forEach(this.props.children,(function(e){if(Object(V.areComponentsEqual)(e.type,Oe)){var t=0,i=0,n="left";if(l.a.Children.forEach(e.props.children,(function(e){null!==e&&(Object(V.areComponentsEqual)(e.type,ae)?(i+=1,n="right"):Object(V.areComponentsEqual)(e.type,q)||Object(V.areComponentsEqual)(e.type,K)||"left"===n&&(t+=1))})),1!==i){z()(!1,"ChartRow should have one and only one <Charts> tag within it",e.constructor.name)}n="left";var a=t-1;l.a.Children.forEach(e.props.children,(function(e){if(null!==e)if(Object(V.areComponentsEqual)(e.type,ae)||Object(V.areComponentsEqual)(e.type,q)||Object(V.areComponentsEqual)(e.type,K))Object(V.areComponentsEqual)(e.type,ae)&&(n="right",a=0);else{var t=Number(e.props.width)||40;!B.default.has(e.props,"visible")||e.props.visible||(t=0),"left"===n?(v[a]=v[a]?Math.max(t,v[a]):t,a-=1):"right"===n&&(j[a]=j[a]?Math.max(t,j[a]):t,a+=1)}}))}}));var O=this.leftWidth=B.default.reduce(v,(function(e,t){return e+t}),0),x=this.rightWidth=B.default.reduce(j,(function(e,t){return e+t}),0),E=this.props.timeAxisHeight,T=void 0===E?35:E;this.props.hideTimeAxis&&(T=0);var S=this.props.width-O-x-s-o;if(!this.props.timeRange)throw Error("Invalid timerange passed to ChartContainer");var k,C,M=this.timeScale=this.props.utc?Object(Y.e)().domain(this.props.timeRange.toJSON()).range([0,S]):Object(Y.d)().domain(this.props.timeRange.toJSON()).range([0,S]),I=this.props.width-O-x-s-o,w=0,A=u,R="translate(".concat(O+s,",").concat(A,")"),D=G()(!0,Re,this.props.titleStyle?this.props.titleStyle:{}),_=this.props.title?Object(y.jsx)("g",{transform:R,children:Object(y.jsx)(be,{align:"center",label:this.props.title,style:{label:D,box:{fill:"none",stroke:"none"}},width:I,height:m})}):Object(y.jsx)("g",{}),N=G()(!0,Ne,this.props.trackerStyle?this.props.trackerStyle:{}),P=0;l.a.Children.forEach(this.props.children,(function(t){if(Object(V.areComponentsEqual)(t.type,Oe)){var i=t,n="chart-row-row-".concat(w),a=0===w,r=t.props.visible,c={timeScale:M,paddingLeft:s,paddingRight:o,leftAxisWidths:v,rightAxisWidths:j,width:e.props.width,minTime:e.props.minTime,maxTime:e.props.maxTime,transition:e.props.transition,enablePanZoom:e.props.enablePanZoom,minDuration:e.props.minDuration,showGrid:e.props.showGrid,timeFormat:e.props.format,trackerShowTime:a,trackerTime:e.props.trackerPosition,trackerTimeFormat:e.props.format,trackerStyle:N,onTimeRangeChanged:e.handleTimeRangeChanged,onTrackerChanged:e.handleTrackerChanged},h=t.props.titleHeight,u=void 0===h?28:h;B.default.isUndefined(t.props.title)&&(u=0);var p="translate(".concat(-O-s,",").concat(A+u,")");if(r){if(g.push(Object(y.jsx)("g",{transform:p,children:l.a.cloneElement(i,c)},n)),!B.default.isUndefined(t.props.title)){var d="chart-row-row-title-".concat(w),f=G()(!0,De,t.props.titleStyle?t.props.titleStyle:{}),m=G()(!0,_e,t.props.titleBoxStyle?t.props.titleBoxStyle:{}),x="translate(".concat(-O-s,",").concat(A,")"),E=Object(y.jsx)("g",{transform:x,children:Object(y.jsx)(be,{align:"left",label:t.props.title,style:{label:f,box:m},width:c.width,height:u})},d);b.push(E)}var T=parseInt(t.props.height,10)+u;A+=T,P+=T}}w+=1})),this.props.trackerPosition&&this.props.timeRange.contains(this.props.trackerPosition)&&(k=Object(y.jsx)("g",{style:{pointerEvents:"none"},transform:"translate(".concat(O+s,",").concat(u+m,")"),children:Object(y.jsx)(ve,{width:I,height:P,showInfoBox:!!this.props.trackerValues,time:this.props.trackerPosition,timeScale:M,timeFormat:this.props.format,infoWidth:this.props.trackerHintWidth,infoHeight:this.props.trackerHintHeight,infoValues:this.props.trackerValues,infoStyle:N})},"tracker-group")),C=this.props.hideTimeAxis?{axis:{display:"none"}}:G()(!0,Ae.axis,this.props.timeAxisStyle.axis?this.props.timeAxisStyle.axis:{});var L=Object(y.jsxs)("g",{transform:"translate(".concat(O+s,",").concat(u+m+P,")"),children:[Object(y.jsx)("line",{x1:-O,y1:.5,x2:I+x,y2:.5,style:C}),Object(y.jsx)(we,{scale:M,utc:this.props.utc,angled:this.props.timeAxisAngledLabels,style:this.props.timeAxisStyle,format:this.props.format,showGrid:this.props.showGrid,gridHeight:P,tickCount:this.props.timeAxisTickCount})]}),U=Object(y.jsx)("g",{transform:"translate(".concat(O+s,",").concat(u+m,")"),children:Object(y.jsx)(ye,{width:I,height:P+T,scale:M,enablePanZoom:this.props.enablePanZoom,enableDragZoom:this.props.enableDragZoom,minDuration:this.props.minDuration,minTime:this.props.minTime,maxTime:this.props.maxTime,onMouseOut:this.handleMouseOut,onMouseMove:this.handleMouseMove,onMouseClick:this.handleBackgroundClick,onContextMenu:this.handleContextMenu,onZoom:this.handleZoom,children:g},"event-handler")}),F=Object(y.jsx)("g",{transform:"translate(".concat(O+s,",").concat(u+m,")"),children:b}),H=this.props.width,W=P+T+u+d+m,Z=G()(!0,{display:"block"},this.props.style?this.props.style:{});return"over"===this.props.showGridPosition?Object(y.jsxs)("svg",{width:H,height:W,style:Z,ref:this.saveSvgRef,children:[_,U,k,L,F]}):Object(y.jsxs)("svg",{width:H,height:W,style:{display:"block"},ref:this.saveSvgRef,children:[_,L,U,F,k]})}}]),i}(l.a.Component);Pe.defaultProps={width:800,padding:0,enablePanZoom:!1,enableDragZoom:!1,utc:!1,showGrid:!1,showGridPosition:"over",timeAxisStyle:Ae,titleStyle:Re,trackerStyle:Ne,hideTimeAxis:!1};var Le,Ue,Be,Fe,ze,He,Ge,Ye,We,Ve=i(114),Ze=i(462),Xe=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(e){var n;return Object(_.a)(this,i),(n=t.call(this,e)).state={hover:null},n}return Object(N.a)(i,[{key:"onMouseOver",value:function(e,t){this.props.onMouseOver&&this.props.onMouseOver(t),this.setState({hover:t})}},{key:"onMouseLeave",value:function(){this.props.onMouseLeave&&this.props.onMouseLeave(this.state.hover),this.setState({hover:null})}},{key:"handleClick",value:function(e,t){e.stopPropagation(),this.props.onSelectionChange&&this.props.onSelectionChange(t)}},{key:"render",value:function(){var e,t=this,i=this.props,n=i.series,a=(i.textOffsetX,i.textOffsetY,i.hoverMarkerWidth,this.props.timeScale),s=[],r=0,o=Object(Ve.a)(n.events());try{var l=function(){var i=e.value,n=i.begin(),o=i.end(),l=a(n)>=0?a(n):0,c=a(o)<=t.props.width?a(o):t.props.width,h="translate(".concat(l,",0)"),u=void 0;u=!!t.state.hover&&W.Event.is(i,t.state.hover)?"hover":"normal";var p={};t.props.style&&(t.props.style(i,"normal"),p=t.props.style(i,u));t.props.label&&(B.default.isString(t.props.label)?t.props.label:B.default.isFunction(t.props.label)&&t.props.label(i));var d=t.props.spacing,f=c-l-2*t.props.spacing;f=f<0?0:f;t.props.size;s.push(Object(y.jsx)(Ze.a,{title:t.props.label(i),children:Object(y.jsxs)("g",{transform:h,onClick:function(e){return t.handleClick(e,i)},onMouseLeave:function(){return t.onMouseLeave()},onMouseOver:function(e){return t.onMouseOver(e,i)},children:[Object(y.jsx)("circle",{cx:d,cy:5,r:5,style:p}),Object(y.jsx)("rect",{className:"eventchart-marker",x:d,y:4,width:f,height:2,style:p}),Object(y.jsx)("circle",{cx:d+f,cy:5,r:5,style:p}),null]},r)})),r+=1};for(o.s();!(e=o.n()).done;)l()}catch(c){o.e(c)}finally{o.f()}return Object(y.jsx)("g",{children:s})}}]),i}(l.a.Component);Xe.defaultProps={visible:!0,size:30,spacing:0,textOffsetX:0,textOffsetY:0,hoverMarkerWidth:5},function(e){e.ARTDESIGN="ARTDESIGN",e.ARCHITECTURE="ARCHITECTURE",e.LANDSCAPE="LANDSCAPE",e.OTHER="OTHER",e.ARTDESIGN_2016="ARTDESIGN_2016",e.ARTDESIGN_2018="ARTDESIGN_2018",e.ARTDESIGN_2020="ARTDESIGN_2020",e.ARCHITECTURE_2016="ARTDESIGN_2016",e.ARCHITECTURE_2018="ARTDESIGN_2018",e.ARCHITECTURE_2020="ARTDESIGN_2020",e.OTHER_2016="OTHER_2016",e.OTHER_2018="OTHER_2018",e.OTHER_2020="OTHER_2020",e.LANDSCAPE_2016="LANDSCAPE_2016",e.LANDSCAPE_2018="LANDSCAPE_2018",e.LANDSCAPE_2020="LANDSCAPE_2020"}(Le||(Le={})),function(e){e.SOLO="SOLO",e.DEACTIVATED="DEACTIVATED",e.DEFAULT="DEFAULT"}(Ue||(Ue={})),function(e){e.national="national",e.state="state",e.city="city",e.international="international",e.NA="NA"}(Be||(Be={})),function(e){e.STUDENTS_2016="STUDENTS_2016",e.STUDENTS_2018="STUDENTS_2018",e.STUDENTS_2020="STUDENTS_2020",e.BUILT_TOPIC="BUILT_TOPIC",e.ECONOMIC_TOPIC="ECONOMIC_TOPIC",e.NATURAL_TOPIC="NATURAL_TOPIC",e.POLITICAL_TOPIC="POLITICAL_TOPIC",e.SOCIAL_TOPIC="SOCIAL_TOPIC",e.EQUITY_THEME="EQUITY_THEME",e.ACCESS_THEME="ACCESS_THEME",e.DIVERISTY_THEME="DIVERISTY_THEME",e.NONE="NONE",e.ARCHITECTURE_STUDENTS="ARCHITECTURE",e.ARTDESIGN_STUDENTS="ARTDESIGN",e.OTHER_STUDENTS="OTHER",e.LANDSCAPE_STUDENTS="LANDSCAPE"}(Fe||(Fe={})),function(e){e.DATE="DATE",e.RANGE="RANGE"}(ze||(ze={})),function(e){e.BUILDINGS="BUILDINGS",e.TRANSPORTATION="TRANSPORTATION",e.INFRASTR="INFRASTR",e.GREENSPACE="GREENSPACE",e.HYDROLOGY="HYDROLOGY",e.POLLUTION="POLLUTION",e.EDUCATION="EDUCATION",e.HEALTHSAFETY="HEALTHSAFETY",e.RACEGEN="RACEGEN",e.GOVERMENT="GOVERMENT",e.POLICY="POLICY",e.CIVICENG="CIVICENG",e.WORK="WORK",e.URBANDEV="URBANDEV",e.PROPERTY="PROPERTY"}(He||(He={})),function(e){e.BE="BE",e.SE="SE",e.PE="PE",e.EE="EE",e.NE="NE"}(Ge||(Ge={})),function(e){e[e.TOPIC=0]="TOPIC",e[e.DISCIPLINE=1]="DISCIPLINE",e[e.THEME=2]="THEME",e[e.FILTERGROUP=3]="FILTERGROUP",e[e.FILTERGROUP_TOPIC=4]="FILTERGROUP_TOPIC",e[e.FILTERGROUP_YEAR=5]="FILTERGROUP_YEAR"}(Ye||(Ye={})),function(e){e.EQUITY="EQUITY",e.ACCESS="ACCESS",e.DIVERSITY="DIVERSITY"}(We||(We={}));var qe=function(e){var t=e.info,i=Object(u.a)(),n={color:i.palette.primary.main,fontSize:"9pt",lineHeight:"5pt",fontFamily:i.typography.fontFamily,textDecoration:"underline"},a={color:i.palette.primary.main,fontFamily:i.typography.fontFamily,fontSize:"9pt",lineHeight:"15pt"},s={start:new Date(1/1900),end:new Date(1/1900),title:"",info:"",tags:"",category:Be.national},r=null!==t&&void 0!==t?t:s;return Object(o.useEffect)((function(){}),[t]),Object(y.jsx)("div",{style:{height:"100%"},children:Object(y.jsxs)(g.Scrollbars,{style:{width:"100%",height:"100%"},children:[Object(y.jsx)(R.a,{style:n,children:Object(y.jsx)(O.a,{style:n,children:r.title})}),Object(y.jsx)(R.a,{style:a,children:Object(y.jsx)(O.a,{style:a,children:r.info})})]})})},Ke=function(e){Object(L.a)(i,e);var t=Object(U.a)(i);function i(e){var n;return Object(_.a)(this,i),n=t.call(this,e),console.log(n.props.width),n.state={width:n.props.width},n.handleResize=n.handleResize.bind(Object(P.a)(n)),n}return Object(N.a)(i,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),this.handleResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){console.log(this.props.width),this.container&&this.setState({width:.8*window.innerWidth})}},{key:"render",value:function(){var e=this,t=l.a.Children.only(this.props.children),i=this.state.width?l.a.cloneElement(t,{width:this.state.width}):null;return Object(y.jsx)("div",Object(E.a)(Object(E.a)({ref:function(t){e.container=t}},this.props),{},{children:i}))}}]),i}(l.a.Component),Qe=i(444),Je=function(){var e=Object(u.a)(),t=Object(Qe.a)(e.breakpoints.up("sm")),i=m((function(e){return e.map_data.timelineSeries})),n=m((function(e){return e.map_data.eventSpreadsheet})),a=Object(o.useState)(void 0),l=Object(r.a)(a,2),c=l[0],h=l[1],p=Object(o.useState)(2e3),d=Object(r.a)(p,2),f=d[0],g=d[1],b=Object(o.useState)(void 0),v=Object(r.a)(b,2),j=v[0],O=v[1],x=Object(o.useState)([]),E=Object(r.a)(x,2),T=E[0],S=E[1],k=Object(o.useRef)(null),C=new Date(1763,0,1),M=new Date(2020,0,1);Object(o.useEffect)((function(){var e=0;Object.values(i).forEach((function(t){e+=t.length})),console.log(e);var t=[],n=Object.keys(i),a=0;if(e>0){var s=1;Object.values(i).forEach((function(i,r){console.log(i.length/e),s-=i.length/e,console.log(s),a+=i.length/e;var o={pos:s,name:n[r]};t.push(o)})),S(t),console.log(t),console.log(a)}}),[i]),Object(o.useEffect)((function(){}),[T]);var I={height:200,width:"100%",borderTop:"1px solid ".concat(e.palette.primary.main),display:t?"inline-flex":"none"};Object(o.useEffect)((function(){var e,t,i=null===k||void 0===k||null===(e=k.current)||void 0===e||null===(t=e.style)||void 0===t?void 0:t.width;console.log(i);var n=parseInt(null!==i&&void 0!==i?i:"2000");console.log(n),g(parseInt(null!==i&&void 0!==i?i:"2000"))}),[k]);var w={fontSize:"12px",position:"absolute",fontFamily:e.typography.fontFamily,color:e.palette.primary.main,textAlilgn:"right"},A={axis:{stroke:e.palette.primary.main}},D=new W.TimeRange(C,M),_=function(e,t,i){return e.map((function(e,a){var s={fill:t.palette.primary.main,opacity:1};function r(e){console.log(e.data().first().get("title"));var t=e.data().first().get("title"),i=n.filter((function(e){return e.title===t}))[0];h(i),O(t),console.log(function(e){var t=[],i=e;do{t=t.concat(Object.getOwnPropertyNames(i))}while(i=Object.getPrototypeOf(i));return t.sort().filter((function(t,i,n){if(t!=n[i+1]&&"function"==typeof e[t])return!0}))}(e))}return Object(y.jsx)(Oe,{height:"".concat(i),style:{fill:"#f1a340"},axisMargin:1,children:Object(y.jsx)(ae,{children:Object(y.jsx)(Xe,{series:e,size:i,label:function(e){return function(e){return e.data().first().get("title")}(e)},onSelectionChange:function(e){return r(e)},textOffsetY:-5,style:function(e,i){var n;switch(i){case"hover":n={fill:t.palette.primary.light,opacity:1,fontFamily:t.typography.fontFamily};break;case"selected":n={fill:t.palette.primary.dark,opacity:1,fontFamily:t.typography.fontFamily};break;default:n=s}return e.data().first().get("title")===j&&(console.log("got selected"),n={fill:t.palette.primary.light,opacity:1,fontFamily:t.typography.fontFamily}),n}})})},a)}))};return Object(y.jsxs)(s.a,{container:!0,spacing:0,style:I,children:[Object(y.jsx)(s.a,{item:!0,xs:2,children:Object(y.jsx)(qe,{info:c})}),Object(y.jsx)(s.a,{item:!0,xs:10,style:{paddingTop:".25em"},children:Object(y.jsxs)("div",{style:{position:"relative",height:"200px"},children:[Object(y.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,zIndex:-1,opacity:1,textAlign:"right"},children:T.map((function(t,i){return Object(y.jsxs)("div",{style:{textAlign:"right",top:"".concat(100*t.pos,"%"),position:"relative"},children:[Object(y.jsx)("div",{style:{borderTop:"1px solid ".concat(e.palette.primary.main),top:"".concat(100*t.pos,"%"),position:"relative",marginLeft:"6em"}}),Object(y.jsx)("div",{style:{width:100,marginLeft:"-6em"},children:Object(y.jsx)(R.a,{style:w,children:t.name.toUpperCase()},i)})]},i)}))}),Object(y.jsx)("div",{style:{height:"100%",width:"1000",marginLeft:"6em"},ref:k,children:Object(y.jsx)(Ke,{width:f,children:Object(y.jsxs)(Pe,{timeRange:D,enablePanZoom:!1,showGrid:!0,timeAxisStyle:A,timeAxisTickCount:5,children:[_(i.national,e,15),_(i.state,e,15),_(i.city,e,15),_(i.international,e,15),_(i.NA,e,15)]})})})]})})]})};var $e=function(){var e=Object(u.a)(),t=Object(Qe.a)(e.breakpoints.up("lg")),i={fontSize:"xxx-large",fontFamily:e.typography.fontFamily},n={fontSize:"xx-large",fontFamily:e.typography.fontFamily,paddingBottom:"1em",paddingTop:"1em"},a={paddingBottom:"1em",paddingTop:".5em"};return Object(y.jsxs)(s.a,{container:!0,spacing:0,style:a,children:[Object(y.jsx)(s.a,{item:!0,xs:2,style:{display:t?"flex":"none"},children:Object(y.jsx)("div",{})}),Object(y.jsxs)(s.a,{item:!0,xs:10,children:[Object(y.jsx)("div",{style:a,children:Object(y.jsx)(R.a,{style:i,children:"DIY CARTOGRAPHY: "})}),Object(y.jsx)("div",{children:Object(y.jsx)(R.a,{style:n,children:"MAPPING THE IMPACT OF URBAN DEVELOPMENT"})})]})]})},et=i(445),tt=function(e){var t=e.title,i=e.children,n=Object(u.a)(),a={height:"100%",paddingLeft:".25em",paddingRight:".25em",minHeight:"6rem",border:"1px solid ".concat(n.palette.primary.main),marginRight:"1em",maxWidth:"fit-content"},s={borderBottom:"1px solid ".concat(n.palette.primary.main),paddingBottom:".1em",height:"20%",display:"flex",flexDirection:"column",alignContent:"center"},r={color:n.palette.primary.main,marginTop:0,marginBottom:"auto",fontFamily:n.typography.fontFamily};return Object(y.jsxs)("div",{style:a,children:[Object(y.jsx)("div",{style:s,children:Object(y.jsx)(et.a,{size:300,style:r,children:t})}),i]})},it=function(e){var t=e.title,i=e.children,n=e.filter,a=Object(u.a)(),s=f((function(e){return e.map_data.thunkSetFilter})),l=m((function(e){var t;return null===(t=e.map_data)||void 0===t?void 0:t.groupFilter})),c=Object(o.useState)(!1),h=Object(r.a)(c,2),p=h[0],d=h[1],g=Object(o.useState)(Ue.DEFAULT),b=Object(r.a)(g,2),v=b[0],j=b[1];Object(o.useEffect)((function(){switch(l===n&&j(Ue.SOLO),l===Fe.NONE&&j(Ue.DEFAULT),l){case n:j(Ue.SOLO);break;case Fe.NONE:j(Ue.DEFAULT);break;default:j(Ue.DEACTIVATED)}}),[l,p]);a.typography.fontFamily,p?a.palette.primary.light:a.palette.primary.main;var O={marginTop:null!==t?".25em":0},x={height:"fit-content",marginTop:"auto",marginBottom:"auto",paddingRight:"1em",fontFamily:a.typography.fontFamily};return Object(y.jsxs)("div",{style:x,children:[Object(y.jsx)("div",{onMouseUp:function(){return s(n)},onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:Object(y.jsx)(R.a,{children:Object(y.jsx)(et.a,{size:100,style:function(e,t){var i={height:"fit-content",textDecoration:"underline",marginTop:"auto",marginBottom:"auto",paddingRight:"1em",fontFamily:a.typography.fontFamily,color:a.palette.primary.main};switch(e){case Ue.SOLO:i.color=a.palette.primary.light;break;case Ue.DEACTIVATED:i.color=a.palette.primary.dark;break;case Ue.DEFAULT:i.color=a.palette.primary.main}return t&&(i.color=a.palette.primary.light),i}(v,p),children:t})})}),Object(y.jsx)("div",{style:O,children:i})]})},nt=function(e){var t=e.children,i=(e.columns,Object(u.a)()),n="0.25em 0em 0em .25em",a={padding:n,height:"100%",borderRight:"1px dashed ".concat(i.palette.primary.main),maxWidth:"fit-content"},s={padding:n,height:"100%",maxWidth:"fit-content"},r={padding:n,height:"100%",borderRight:"1px dashed ".concat(i.palette.primary.main),maxWidth:"fit-content"},o={padding:n,height:"100%",maxWidth:"fit-content"},c=Array.isArray(t)?t.length:1,h={display:"grid",gridTemplateColumns:"1fr ".repeat(c),maxWidth:"fit-content"};return Object(y.jsx)("div",{style:h,children:t?l.a.Children.map(t,(function(e,i){if(l.a.isValidElement(e))return Object(y.jsx)("div",{style:(n=i,c=t,Array.isArray(c)?0==n?r:n==c.length-1?o:a:s),children:e});var n,c})):null})},at=i(96),st=i.n(at);var rt=function(e){var t,i,n=e.color,a=e.is_active_filter,s=Object(u.a)(),l=12,c=Object(o.useState)(!1),h=Object(r.a)(c,2),p=(h[0],h[1]),d=m((function(e){return e.map_data.loaded})),f=(t=.5,i=4,t=Math.ceil(t),i=Math.floor(i),Math.random()*(i-t)+t),g={display:"block",animation:d?"fadein ".concat(f,"s normal"):"",animationIterationCound:1,marginTop:"auto"};Object(o.useEffect)((function(){}),[!0]);var b=function(e){var t;switch(e){case-2:t=st.a[500];break;case-1:t=st.a[100];break;case 0:t=s.palette.primary.main;break;case 1:t=s.palette.primary.light;break;case 2:t=s.palette.secondary.dark;break;case 3:t=s.palette.secondary.main;break;case 4:t=s.palette.primary.dark}return t};return Object(y.jsx)("div",{style:g,children:Object(y.jsx)("div",{style:function(e){return e?{width:"".concat(l,"px"),height:"".concat(l,"px"),backgroundColor:b(n),marginTop:"auto",marginBottom:"3px",marginRight:"3px",outline:"1px solid #ffcb06",opacity:1}:-2==n?{width:"".concat(l,"px"),height:"".concat(l,"px"),backgroundColor:b(n),marginTop:"auto",marginBottom:"3px",marginRight:"3px",opacity:.5}:{width:"".concat(l,"px"),height:"".concat(l,"px"),backgroundColor:b(n),marginTop:"auto",marginBottom:"3px",marginRight:"3px",opacity:1}}(a),onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)}})})};var ot=function(e){var t=e.count,i=e.filter,n=e.base_color,a={},s={height:"100%",display:"flex",position:"relative"},l=m((function(e){return e.map_data.filter})),c=f((function(e){return e.map_data.thunkSetFilter})),h=function(e,t,n){return e.some((function(e){return e===i}))?4:e.some((function(e){return null===e}))?n:t?-1:n},u=Object(o.useState)(!1),p=Object(r.a)(u,2),d=p[0],g=p[1];Object(o.useEffect)((function(){}),[l]),Object(o.useEffect)((function(){}),[d]);var b=function(e,t){var i=Math.round(e/t)*t,n=i/t,a=t;if(void 0!==e&&null!==e)return Array.from(Array(n).keys()).map((function(s,r){return{count:r==n-1?a-Math.abs(e-i):t}}))}(t,3);return Object(y.jsx)(y.Fragment,{children:function(e){if(e)return Object(y.jsx)("div",{style:s,onMouseUp:function(){return c(i)},onMouseEnter:function(){return g(!d)},onMouseLeave:function(){return g(!d)},children:Array.from(Array(e.length).keys()).map((function(t){var s=e[t];return Object(y.jsx)("div",{style:a,children:Array.from(Array(s.count).keys()).map((function(e,t){return Object(y.jsx)(rt,{color:h(l,d,n),is_active_filter:l.some((function(e){return e===i}))},e)}))},t)}))})}(b)})};function lt(e,t){return Le[e+"_"+t]}var ct=function(){var e=Object(u.a)(),t=m((function(e){var t,i;return null===(t=e.map_data)||void 0===t||null===(i=t.studentStats)||void 0===i?void 0:i.year}));console.log(t);var i={display:"flex",height:"51px"},n={color:e.palette.primary.main,fontSize:"8pt",justifyContent:"space-between",fontFamily:e.typography.fontFamily},a={display:"flex",fontSize:"8pt",height:20,marginTop:-4},s=function(e,t){var n,a,s,r;if(console.log(t),t)return Object(y.jsxs)("div",{style:i,children:[Object(y.jsx)(ot,{base_color:0,count:null!==(n=t.ARCHITECTURE)&&void 0!==n?n:0,filter:lt("ARCHITECTURE",e)}),Object(y.jsx)(ot,{base_color:1,count:null!==(a=t.ARTDESIGN)&&void 0!==a?a:0,filter:lt("ARTDESIGN",e)}),Object(y.jsx)(ot,{base_color:2,count:null!==(s=t.LANDSCAPE)&&void 0!==s?s:0,filter:lt("LANDSCAPE",e)}),Object(y.jsx)(ot,{base_color:3,count:null!==(r=t.OTHER)&&void 0!==r?r:0,filter:lt("OTHER",e)})]})};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(nt,{children:[Object(y.jsxs)(it,{title:null,size:3,filter:Fe.NONE,children:[Object(y.jsxs)("div",{style:{display:"flex",fontSize:"8pt",height:20,marginTop:-4,paddingTop:".25em"},children:[Object(y.jsx)(rt,{color:0}),Object(y.jsx)(O.a,{style:n,children:"ARCHITECTURE"})]}),Object(y.jsxs)("div",{style:a,children:[Object(y.jsx)(rt,{color:1}),Object(y.jsx)(R.a,{style:n,children:Object(y.jsx)(O.a,{style:n,children:"LANDSCAPE "})})]}),Object(y.jsxs)("div",{style:a,children:[Object(y.jsx)(rt,{color:2}),Object(y.jsx)(O.a,{style:n,children:"ART + DESIGN"})]}),Object(y.jsxs)("div",{style:a,children:[Object(y.jsx)(rt,{color:3}),Object(y.jsx)(O.a,{style:n,children:"OTHER"})]})]}),Object(y.jsx)(it,{title:"2016",size:3,filter:Fe.STUDENTS_2016,children:s("2016",null===t||void 0===t?void 0:t[2016])}),Object(y.jsx)(it,{title:"2018",size:3,filter:Fe.STUDENTS_2018,children:s("2018",null===t||void 0===t?void 0:t[2018])}),Object(y.jsx)(it,{title:"2020",size:3,filter:Fe.STUDENTS_2020,children:s("2020",null===t||void 0===t?void 0:t[2020])})]})})},ht=function(){Object(u.a)();var e=m((function(e){var t,i;return null===(t=e.map_data)||void 0===t||null===(i=t.studentStats)||void 0===i?void 0:i.theme}));return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(nt,{children:[Object(y.jsx)(it,{title:"Equity",size:4,filter:Fe.EQUITY_THEME,children:Object(y.jsx)(ot,{count:null===e||void 0===e?void 0:e.EQUITY,filter:We.EQUITY,base_color:0})}),Object(y.jsx)(it,{title:"Access",size:4,filter:Fe.ACCESS_THEME,children:Object(y.jsx)(ot,{count:null===e||void 0===e?void 0:e.ACCESS,filter:We.ACCESS,base_color:0})}),Object(y.jsx)(it,{title:"Diversity",size:4,filter:Fe.DIVERISTY_THEME,children:Object(y.jsx)(ot,{count:null===e||void 0===e?void 0:e.DIVERSITY,filter:We.DIVERSITY,base_color:0})})]})})};function ut(e){var t;switch(e){case He.BUILDINGS:t="Buildings";break;case He.TRANSPORTATION:t="Transportation";break;case He.INFRASTR:t="Infrastructure";break;case He.PROPERTY:t="Property";break;case He.URBANDEV:t="Urban Development";break;case He.WORK:t="Work";break;case He.GREENSPACE:t="Greenspace";break;case He.POLLUTION:t="Pollution";break;case He.HYDROLOGY:t="Hydrology";break;case He.GOVERMENT:t="Government";break;case He.POLICY:t="Policy";break;case He.CIVICENG:t="Civic Engagment";break;case He.EDUCATION:t="Education";break;case He.HEALTHSAFETY:t="Health";break;case He.RACEGEN:t="Race and Gender";break;default:t="Default"}return t}var pt,dt=function(e){var t=e.count,i=e.icon,n=e.filter,a=(Object(u.a)(),Object(o.useState)(!1)),s=Object(r.a)(a,2),l=s[0],c=s[1],h=m((function(e){return e.map_data.filter})),p=f((function(e){return e.map_data.thunkSetFilter}));Object(o.useEffect)((function(){}),[h]),Object(o.useEffect)((function(){}),[l]);return Object(y.jsxs)("div",{style:{width:"100%",display:"flex"},onMouseEnter:function(){return c(!l)},onMouseLeave:function(){return c(!l)},onMouseUp:function(){p(n)},children:[Array.from(Array(t)).map((function(e,i){return console.log(t),Object(y.jsx)(rt,{color:(a=h,s=l,a.some((function(e){return e==n}))||s?4:0),is_active_filter:h.some((function(e){return e==n}))},i);var a,s})),Object(y.jsx)(Ze.a,{title:ut(n),children:i})]})},ft=i(446),mt=i(449),gt=i(450),bt=i(451),vt=i(452),jt=i(458),Ot=i(459),yt=i(447),xt=i(448),Et=i(453),Tt=i(454),St=i(455),kt=i(456),Ct=i(457),Mt=function(){var e,t,i,n,a,s,r,l,c,h,p,d,f,g,b,v=Object(u.a)(),j=m((function(e){var t,i;return null===(t=e.map_data)||void 0===t||null===(i=t.studentStats)||void 0===i?void 0:i.subtopic}));return Object(o.useEffect)((function(){console.log(j)}),[j]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(nt,{columns:5,children:[Object(y.jsxs)(it,{title:"Built",size:2,filter:Fe.BUILT_TOPIC,children:[Object(y.jsx)(dt,{filter:He.INFRASTR,count:null===j||void 0===j||null===(e=j.BE)||void 0===e?void 0:e.ENERGY,icon:Object(y.jsx)(ft.a,{color:v.palette.primary.main,size:12})}),Object(y.jsx)(dt,{filter:He.BUILDINGS,count:null===j||void 0===j||null===(t=j.BE)||void 0===t?void 0:t.HOUSING,icon:Object(y.jsx)(yt.a,{color:"primary",style:{fontSize:"12pt"}})}),Object(y.jsx)(dt,{filter:He.TRANSPORTATION,count:null===j||void 0===j||null===(i=j.BE)||void 0===i?void 0:i.TRANSPORTATION,icon:Object(y.jsx)(xt.a,{fontSize:"small",color:"primary",style:{fontSize:"12pt"}})})]}),Object(y.jsxs)(it,{title:"Economic",size:3,filter:Fe.ECONOMIC_TOPIC,children:[Object(y.jsx)(dt,{filter:He.PROPERTY,count:null===j||void 0===j||null===(n=j.EE)||void 0===n?void 0:n.COSTOFLIVING,icon:Object(y.jsx)(mt.a,{color:v.palette.primary.main,size:12})}),Object(y.jsx)(dt,{filter:He.URBANDEV,count:null===j||void 0===j||null===(a=j.EE)||void 0===a?void 0:a.URBANDEV,icon:Object(y.jsx)(gt.a,{color:v.palette.primary.main,size:12})}),Object(y.jsx)(dt,{filter:He.WORK,count:null===j||void 0===j||null===(s=j.EE)||void 0===s?void 0:s.WORK,icon:Object(y.jsx)(bt.a,{color:v.palette.primary.main,size:12})})]}),Object(y.jsxs)(it,{title:"Natural",size:2,filter:Fe.NATURAL_TOPIC,children:[Object(y.jsx)(dt,{filter:He.GREENSPACE,count:null===j||void 0===j||null===(r=j.NE)||void 0===r?void 0:r.GREENSPACE,icon:Object(y.jsx)(vt.a,{color:v.palette.primary.main,size:12})}),Object(y.jsx)(dt,{filter:He.POLLUTION,count:null===j||void 0===j||null===(l=j.NE)||void 0===l?void 0:l.POLLUTION,icon:Object(y.jsx)(gt.a,{color:v.palette.primary.main,size:12})}),Object(y.jsx)(dt,{filter:He.HYDROLOGY,count:null===j||void 0===j||null===(c=j.NE)||void 0===c?void 0:c.HYDROLOGY,icon:Object(y.jsx)(Et.a,{color:"primary",style:{fontSize:"12pt"}})})]}),Object(y.jsxs)(it,{title:"Political",size:3,filter:Fe.POLITICAL_TOPIC,children:[Object(y.jsx)(dt,{filter:He.GOVERMENT,count:null===j||void 0===j||null===(h=j.PE)||void 0===h?void 0:h.GOVERMENT,icon:Object(y.jsx)(Tt.a,{color:"primary",style:{fontSize:"12pt"}})}),Object(y.jsx)(dt,{filter:He.POLICY,count:null===j||void 0===j||null===(p=j.PE)||void 0===p?void 0:p.POLICY,icon:Object(y.jsx)(St.a,{color:"primary",style:{fontSize:"12pt"}})}),Object(y.jsx)(dt,{filter:He.CIVICENG,count:null===j||void 0===j||null===(d=j.PE)||void 0===d?void 0:d.CIVICENG,icon:Object(y.jsx)(kt.a,{color:"primary",style:{fontSize:"12pt"}})})]}),Object(y.jsxs)(it,{title:"Social",size:2,filter:Fe.SOCIAL_TOPIC,children:[Object(y.jsx)(dt,{filter:He.EDUCATION,count:null===j||void 0===j||null===(f=j.SE)||void 0===f?void 0:f.EDUCATION,icon:Object(y.jsx)(Ct.a,{color:"primary",style:{fontSize:"12pt"}})}),Object(y.jsx)(dt,{filter:He.HEALTHSAFETY,count:null===j||void 0===j||null===(g=j.SE)||void 0===g?void 0:g.HEALTHSAFETY,icon:Object(y.jsx)(jt.a,{color:v.palette.primary.main,size:12})}),Object(y.jsx)(dt,{filter:He.RACEGEN,count:null===j||void 0===j||null===(b=j.SE)||void 0===b?void 0:b.RACEGEN,icon:Object(y.jsx)(Ot.a,{color:v.palette.primary.main,size:12})})]})]})})},It=(i(402),function(){var e=Object(u.a)(),t={height:"fit-content",minHeight:"6rem",maxHeight:"17rem",display:Object(Qe.a)(e.breakpoints.up("md"))?"inline-flex":"none"},i={fontFamily:e.typography.fontFamily,color:e.palette.primary.main,fontSize:"9pt",lineHeight:"12pt"},n=Object(b.a)({root:{height:"100%",paddingRight:".1em"}})(s.a);return Object(y.jsxs)(s.a,{container:!0,spacing:0,style:t,children:[Object(y.jsx)(n,{item:!0,xs:12,sm:12,md:6,lg:2,xl:2,children:Object(y.jsx)(tt,{title:"SELECT & FILTER",children:Object(y.jsx)(R.a,{style:i,children:Object(y.jsx)(O.a,{size:300,style:i,children:"Click on titles to view main categories. Click on rectangle blocks to filter by subcategories."})})})}),Object(y.jsx)(n,{item:!0,xs:12,sm:12,md:6,lg:3,xl:4,children:Object(y.jsx)(tt,{title:"YEAR & DISCIPLINE",children:Object(y.jsx)(ct,{})})}),Object(y.jsx)(n,{item:!0,xs:12,sm:12,md:6,lg:3,xl:3,children:Object(y.jsx)(tt,{title:"TOPICS",children:Object(y.jsx)(Mt,{})})}),Object(y.jsx)(n,{item:!0,xs:12,sm:12,md:6,lg:3,xl:2,children:Object(y.jsx)(tt,{title:"THEMES",children:Object(y.jsx)(ht,{})})})]})}),wt=i(201),At=i(185),Rt=i(199),Dt=function(){var e=f((function(e){return e.map_data.fetchStudentSheets})),t=f((function(e){return e.map_data.fetchEventSpreadsheet})),i=Object(Rt.merge)({},wt.a,{typography:{fontFamilies:{display:"Audimat",ui:"Audimat",mono:"Audimat"}}});return Object(o.useEffect)((function(){t(),e()})),Object(y.jsx)(At.a,{value:i,children:Object(y.jsxs)(s.a,{container:!0,spacing:0,children:[Object(y.jsx)(s.a,{item:!0,md:12,lg:12,children:Object(y.jsx)(It,{})}),Object(y.jsxs)(s.a,{container:!0,spacing:0,style:{paddingTop:"1em",paddingBottom:"2em"},children:[Object(y.jsx)(s.a,{item:!0,md:12,lg:12,children:Object(y.jsx)($e,{})}),Object(y.jsx)(s.a,{item:!0,md:12,lg:2,children:Object(y.jsx)(D,{})}),Object(y.jsx)(s.a,{item:!0,md:12,lg:10,children:Object(y.jsx)(w,{})})]}),Object(y.jsx)(s.a,{item:!0,xs:12,style:{height:"25%",padding:0},children:Object(y.jsx)(Je,{})})]})})},_t=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,466)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;i(e),n(e),a(e),s(e),r(e)}))},Nt=i(460),Pt=i(202),Lt=Object(Pt.a)({palette:{primary:{dark:"#335761",main:"#5794a5",light:"#bcd4db"},secondary:{dark:"#bcd4db",main:"#ddeaed"}},spacing:function(e){return"".concat(.25*e,"rem")},overrides:{MuiGrid:{root:{margin:"0px"}}},typography:{fontFamily:"Audimat"}}),Ut=i(44),Bt=i.n(Ut),Ft=i(117),zt=i(200),Ht=i.n(zt),Gt=i(203);function Yt(e,t){return e.reduce((function(e,i){return e[i[t]]=[].concat(Object(Gt.a)(e[i[t]]||[]),[i]),e}),{})}function Wt(e){return Object.keys(e).forEach((function(t){e[t]=e[t].length})),e}!function(e){e.series0101="series0101",e.series0102="series0102",e.series0201="series0201",e.series0202="series0202"}(pt||(pt={}));var Vt=function(){function e(t){Object(_.a)(this,e),this.author=void 0,this.year=void 0,this.title=void 0,this.description=void 0,this.discipline=void 0,this.topic=void 0,this.subtopic=void 0,this.theme=void 0,this.image_data=void 0,this.gallery_images=void 0;for(var i=[],n=0,a=Object.keys(t);n<a.length;n++){var s=a[n];if(Object.keys(pt).includes(s)){var r=s;if("NA"!==t[r]){var o=[pt[s],t[r]];i.push(o)}}}var l=new Map(i);this.author=t.author,this.year=t.year,this.title=t.title,this.description=t.info,this.discipline=Le[t.discipline],this.topic=Ge[t.topic],this.theme=We[t.theme],this.subtopic=He[t.subtopic],this.image_data=l,this.gallery_images=[]}return Object(N.a)(e,[{key:"request_gallery_thumbnail",value:function(e){var t;if(this.image_data.has(e))return function(e){var t=new Promise((function(t,i){var n=new Image;n.src=e,n.onload=function(){t(n)}}));return console.log(e,t),t}(null!==(t=this.image_data.get(e))&&void 0!==t?t:"")}},{key:"get_lightbox_images",value:function(){var e,t=[],i=Object(Ve.a)(this.image_data.entries());try{for(i.s();!(e=i.n()).done;){var n=e.value,a={title:n[0],src:n[1]};t.push(a)}}catch(s){i.e(s)}finally{i.f()}return t}},{key:"get_gallery_images",value:function(){return this.gallery_images}},{key:"create_gallery_image",value:function(e,t){var i=this.image_data.get(e),n={src:i,thumbnail:i,isSelected:!1,caption:"Im in this other file",thumbnailWidth:.1*t.width,thumbnailHeight:.1*t.height,tags:[{author:this.author,discipline:Le[this.discipline],subtopic:He[this.subtopic],theme:We[this.theme],year:this.year}]};this.gallery_images.push(n)}},{key:"set_gallery_images",value:function(e){this.gallery_images=e}}]),e}(),Zt=function e(t){Object(_.a)(this,e),this.year=void 0,this.subtopic=void 0,this.theme=void 0,this.year=function(e){for(var t=Yt(e,"year"),i={},n=0,a=Object.entries(t);n<a.length;n++){var s=Object(r.a)(a[n],2),o=s[0],l=Yt(s[1],"discipline");l=Wt(l),i[o]=l,console.log(i)}return i}(t),this.subtopic=function(e){for(var t=Yt(e,"topic"),i={},n=function(){var e=Object(r.a)(s[a],2),t=e[0],n=Yt(e[1],"subtopic"),o=function(e){var t=[];switch(e){case Ge.BE:t=[He.INFRASTR,He.BUILDINGS,He.TRANSPORTATION];break;case Ge.EE:t=[He.WORK,He.PROPERTY,He.URBANDEV];break;case Ge.NE:t=[He.GREENSPACE,He.POLLUTION,He.HYDROLOGY];break;case Ge.PE:t=[He.CIVICENG,He.GOVERMENT,He.POLICY];break;case Ge.SE:t=[He.EDUCATION,He.HEALTHSAFETY,He.RACEGEN]}return t}(Ge[t]);n=Wt(n),o.forEach((function(e){e in n||(n[e]=0)})),i[t]=n},a=0,s=Object.entries(t);a<s.length;a++)n();return i}(t),this.theme=Wt(Yt(t,"theme"))};var Xt=function(){function e(){Object(_.a)(this,e),this.images=void 0,this.description=void 0,this.author=void 0,this.title=void 0,this.year=void 0,this.discipline=void 0,this.images=[],this.description="",this.author="",this.title="",this.year="",this.discipline=""}return Object(N.a)(e,[{key:"set_student",value:function(e){this.images=e.get_lightbox_images(),this.author=e.author,this.title=e.title,this.description=e.description,this.year=e.year,this.discipline=e.discipline}}]),e}(),qt=function e(t){Object(_.a)(this,e),this.start=void 0,this.end=void 0,this.title=void 0,this.info=void 0,this.category=void 0;var i=t.category,n=Be[i];this.start=new Date(t.start),this.end=new Date(t.end),this.info=t.info,this.category=n};var Kt="1-S8EkLYsknYoFWSynVeMQCi6Gf9PoV9A5ezzICXamJA",Qt={national:[],state:[],city:[],international:[],NA:[]};function Jt(e,t){var i=function(e){var t=[];switch(e){case Fe.STUDENTS_2016:t=[Le.ARTDESIGN_2016,Le.ARCHITECTURE_2016,Le.OTHER_2016,Le.LANDSCAPE_2016];break;case Fe.STUDENTS_2018:t=[Le.ARTDESIGN_2018,Le.ARCHITECTURE_2018,Le.OTHER_2018,Le.LANDSCAPE_2018];break;case Fe.STUDENTS_2020:t=[Le.ARTDESIGN_2020,Le.ARCHITECTURE_2020,Le.OTHER_2020,Le.LANDSCAPE_2020];break;case Fe.BUILT_TOPIC:t=[He.INFRASTR,He.BUILDINGS,He.TRANSPORTATION];break;case Fe.ECONOMIC_TOPIC:t=[He.WORK,He.PROPERTY,He.URBANDEV];break;case Fe.NATURAL_TOPIC:t=[He.GREENSPACE,He.POLLUTION,He.HYDROLOGY];break;case Fe.POLITICAL_TOPIC:t=[He.CIVICENG,He.GOVERMENT,He.POLICY];break;case Fe.SOCIAL_TOPIC:t=[He.EDUCATION,He.HEALTHSAFETY,He.RACEGEN];break;case Fe.EQUITY_THEME:t=[We.EQUITY];break;case Fe.ACCESS_THEME:t=[We.ACCESS];break;case Fe.DIVERISTY_THEME:t=[We.DIVERSITY]}return t}(e);if(e===Fe.STUDENTS_2016||e===Fe.STUDENTS_2018||e===Fe.STUDENTS_2020){var n=function(e){var t=e.map((function(e){return e.split("_")})),i={years:[],discipline:[]};return t.forEach((function(e){i.discipline.push(e[0]),i.years.push(e[1])})),i}(i);return{filter_func:function(e){return n.years.includes(e.tags[0].year)},filters:i}}return{filter_func:function(e){return i.includes(e.tags[0][t])},filters:i}}function $t(e){var t=Yt(e,"category");return console.log(t),Object.keys(t).forEach((function(e){console.log(e);var i=function(e){var t={0:[]};e.forEach((function(e,i,n){var a=0;n.every((function(t){return e===t||(i=t.begin(),n=t.end(),a=e.begin(),s=e.end(),!(i<a&&a<n||i<s&&s<n||a<i&&n<s));var i,n,a,s}))?t[a].push(e):(a+=1,t[i]=[e])}));var i=Object.keys(t).map((function(e){t[e]=t[e].sort((function(e,t){return e.begin()-t.begin()}))}));return Object.keys(i).map((function(e){return new W.TimeSeries({name:"test",events:t[e]})}))}(function(e){var t=[];return console.log(e),e.forEach((function(e){var i=new W.TimeRange(e.start,e.end),n=new W.TimeRangeEvent(i,[{title:e.title}]);t.push(n)})),console.log(t),t}(t[e]));t[e]=i,console.log(i)})),console.log(t),t}function ei(e){return e.forEach((function(t,i){var n=e[i].category,a=Be[n];e[i].category=a;var s=new Date(e[i].start),r=new Date(e[i].end);e[i].start=s,e[i].end=r})),e}function ti(e,t){return new Promise((function(i,n){Ht.a.labeledCols(e,t).then((function(e){i(e)})).catch((function(i){console.error("Error fetching DOC_KEY ".concat(e,", sheet number ").concat(t))}))}))}var ii={map_data:{filter:[],timlineData:new(function(){function e(){Object(_.a)(this,e),this.national=void 0,this.state=void 0,this.city=void 0,this.international=void 0,this.NA=void 0,this.national=[],this.state=[],this.city=[],this.international=[],this.NA=[]}return Object(N.a)(e,[{key:"set_data",value:function(e){var t=Yt(e,"category");console.log(t),Object.keys(t).forEach((function(e){console.log(e);var i=function(e){var t={0:[]};e.forEach((function(e,i,n){var a=0;n.every((function(t){return e===t||(i=t.begin(),n=t.end(),a=e.begin(),s=e.end(),!(i<a&&a<n||i<s&&s<n||a<i&&n<s));var i,n,a,s}))?t[a].push(e):(a+=1,t[i]=[e])}));var i=Object.keys(t).map((function(e){t[e]=t[e].sort((function(e,t){return e.begin()-t.begin()}))}));return Object.keys(i).map((function(e){return new W.TimeSeries({name:"test",events:t[e]})}))}(function(e){var t=[];return console.log(e),e.forEach((function(e){var i=new W.TimeRange(e.start,e.end),n={title:e.title},a=new W.TimeRangeEvent(i,[n]);t.push(a)})),console.log(t),t}(t[e]));t[e]=i,console.log(i)})),this.national=t.national,this.state=t.state,this.city=t.city,this.international=t.international,this.NA=t.NA}}]),e}()),studentsClass:[],lightBoxData:new Xt,groupFilter:Fe.NONE,activeImages:[],filterFunction:function(e){return!0},computedActiveImages:Object(p.c)((function(e){console.log(e.filterFunction);var t=e.computed_all_gallery_images.filter(e.filterFunction);return console.log(t),t})),rawStudentSheets:[],galleryImages:[],allImages:[],timelineSeries:Qt,loaded:!1,mapSpreadsheet:[],studentStats:void 0,eventSpreadsheet:[],validationErrors:[],set_all_students:Object(p.b)((function(e,t){e.studentsClass=t})),addStudentSheetRawData:Object(p.b)((function(e,t){e.rawStudentSheets.push(t)})),processRawStudentSheets:Object(p.g)(function(){var e=Object(Ft.a)(Bt.a.mark((function e(t,i){var n,a,s;return Bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.flat(),console.log(n),a=n.map((function(e){return new Vt(e)})),console.log(a),s=a.map((function(e){return e.request_gallery_thumbnail(pt.series0101)})),console.log(s),Promise.all(s).then((function(e){var i=[];e.forEach((function(e,t){e&&(a[t].create_gallery_image(pt.series0101,e),i.push(a[t]))})),console.log(i);var n=new Zt(i);console.log(n),t.set_all_students(i),t.set_StudentStats(n)}));case 7:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()),set_StudentStats:Object(p.b)((function(e,t){e.studentStats=t})),set_filter_function:Object(p.b)((function(e,t){console.log("setting filter func"),e.filterFunction=t})),computed_all_gallery_images:Object(p.c)((function(e){return e.studentsClass.map((function(e){return e.get_gallery_images()})).flat()})),add_validation_error:Object(p.b)((function(e,t){e.validationErrors.push(t)})),set_validation_errors:Object(p.b)((function(e,t){e.validationErrors=t})),fetchEventSpreadsheet:Object(p.g)(function(){var e=Object(Ft.a)(Bt.a.mark((function e(t){return Bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ti(Kt,1).then((function(e){var i=e.data.map((function(e){return new qt(e)}));t.set_timelineData(i);var n=ei(e.data);t.setEventSpreadsheet(n);var a=$t(n);t.set_timeline_series(a)})).catch((function(e){console.error("Error fetching DOC_KEY ".concat(Kt))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),set_timelineData:Object(p.b)((function(e,t){e.timlineData.set_data(t)})),fetchStudentSheets:Object(p.g)(function(){var e=Object(Ft.a)(Bt.a.mark((function e(t,i,n){var a,s,r,o;return Bt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.getState,s=ti(Kt,2),r=ti(Kt,3),o=[s,r],Promise.all(o).then((function(e){e.forEach((function(e){if(e){console.log(e);var i=e.data;Array.isArray(i)?(console.log(i),t.addStudentSheetRawData(i)):console.error("did not get map row array")}})),t.processRawStudentSheets(a().rawStudentSheets)}));case 5:case"end":return e.stop()}}),e)})));return function(t,i,n){return e.apply(this,arguments)}}()),setEventSpreadsheet:Object(p.b)((function(e,t){e.eventSpreadsheet=t})),set_gallery_images:Object(p.b)((function(e,t){e.galleryImages=t})),filter_gallery_2:Object(p.b)((function(e,t){!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}(t.filters,Object(p.f)(e.filter))?(e.activeImages=e.galleryImages.filter(t.filter_func),e.filter=t.filters):(e.filter=[],e.activeImages=e.galleryImages,console.log("got the same filte "))})),set_timeline_series:Object(p.b)((function(e,t){e.timelineSeries=t})),set_group_filter:Object(p.b)((function(e,t){console.log("setting group filter",t),e.groupFilter===t?(console.log("GOT SAME"),e.groupFilter=Fe.NONE,e.filter=[]):e.groupFilter=t})),thunkSetFilter:Object(p.g)((function(e,t){if(console.log("doing thunk set filter"),Object.values(Fe).includes(t)){var i=function(e){var t={filter_func:"aaa",filters:[]};switch(e){case Fe.ACCESS_THEME:t=Jt(Fe.ACCESS_THEME,"theme");break;case Fe.EQUITY_THEME:t=Jt(Fe.EQUITY_THEME,"theme");break;case Fe.DIVERISTY_THEME:t=Jt(Fe.DIVERISTY_THEME,"theme");break;case Fe.STUDENTS_2016:t=Jt(Fe.STUDENTS_2016,"year");break;case Fe.STUDENTS_2018:t=Jt(Fe.STUDENTS_2018,"year");break;case Fe.STUDENTS_2020:t=Jt(Fe.STUDENTS_2020,"year");break;case Fe.BUILT_TOPIC:t=Jt(Fe.BUILT_TOPIC,"subtopic");break;case Fe.ECONOMIC_TOPIC:t=Jt(Fe.ECONOMIC_TOPIC,"subtopic");break;case Fe.NATURAL_TOPIC:t=Jt(Fe.NATURAL_TOPIC,"subtopic");break;case Fe.POLITICAL_TOPIC:t=Jt(Fe.POLITICAL_TOPIC,"subtopic");break;case Fe.SOCIAL_TOPIC:t=Jt(Fe.SOCIAL_TOPIC,"subtopic")}return t}(t);e.set_filter_function(i.filter_func),e.filter_gallery_2(i),e.set_group_filter(t)}else{var n=function(e){var t;if(Object.values(He).includes(e))t=function(t){return t.tags[0].subtopic===e};else if(Object.values(We).includes(e))t=function(t){return t.tags[0].theme===e};else if(Object.values(Le).includes(e)){var i=(e=e).split("_")[0],n=e.split("_")[1];t=function(e){return e.tags[0].year===n&&e.tags[0].discipline===i}}return{filter_func:t,filters:[e]}}(t);e.set_filter_function(n.filter_func),e.filter_gallery_2(n)}})),set_active_filter:Object(p.b)((function(e,t){console.log(t),e.filter=t})),set_lightboxData:Object(p.b)((function(e,t){console.log(t);var i=t.tags[0],n=e.studentsClass.filter((function(e){return e.author===i.author}))[0];console.log(Object(p.f)(n)),e.lightBoxData.set_student(n)})),set_loaded:Object(p.b)((function(e,t){e.loaded=t}))}},ni=Object(p.d)(ii);a.a.render(Object(y.jsx)(Nt.a,{theme:Lt,children:Object(y.jsx)(p.a,{store:ni,children:Object(y.jsx)(Dt,{})})}),document.getElementById("root")),_t()}},[[403,1,2]]]);
//# sourceMappingURL=main.302c068f.chunk.js.map