(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{128:function(e,t,i){},332:function(e,t,i){},335:function(e,t,i){},413:function(e,t,i){},414:function(e,t,i){"use strict";i.r(t);var n=i(9),a=i.n(n),s=i(0),r=i.n(s),o=(i(128),i(443)),l=i(473),c=i(440),h=i(441),p=i(83),u=i(1);var d=function(){var e=Object(p.a)(),t={height:"100%",width:"100%",paddingBottom:"1em",paddingRight:"2em",textAlign:"left",display:"flex",flexDirection:"column",justifyContent:"space-evenly",color:e.palette.primary.main,fontFamily:e.typography.fontFamily},i={color:e.palette.primary.main,fontSize:"9pt",lineHeight:"12pt",fontFamily:e.typography.fontFamily};return Object(u.jsxs)(l.a,{style:t,children:[Object(u.jsx)(c.a,{style:{lineHeight:"12pt"},children:Object(u.jsx)(h.a,{style:i,children:"Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45."})}),Object(u.jsx)(c.a,{style:i,children:Object(u.jsx)(h.a,{children:'"Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Contrary to popular belief, Lorem Ipsum is not simply random text.'})})]})},f=i(26),m=i(193),g=i.n(m),b=i(21),j=Object(b.d)(),v=j.useStoreActions,O=(j.useStoreDispatch,j.useStoreState),y=(i(332),i(333),i(334),i(335),i(195)),x=i(16),E=i(63),S=i(442),T=i(444),M=i(475),k=i(196),C=i.n(k),w=i(197),_=function(e){var t=e.show,i=e.onClick,n=O((function(e){return e.map_data.active_lightbox})),a=(Object(p.a)(),{height:"500px",width:"100vh"}),s={color:"White",fontSize:"12pt",lineHeight:"12pt"},r=Object(E.a)({root:{position:"absolute",zIndex:1,boxSizing:"border-box",paddingLeft:"2em",paddingTop:"2em",opacity:.5,backgroundColor:"rgb(0 0 0 / 73%)"}})(M.a);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(r,{open:t,children:[Object(u.jsx)("div",{style:{position:"absolute",top:0,left:0,color:"white"},onClick:i,children:Object(u.jsx)(S.a,{})}),Object(u.jsx)("div",{style:{width:"100%",height:"100%",paddingLeft:"2em"},children:Object(u.jsxs)(o.a,{container:!0,spacing:3,style:{height:"100vh",width:"100vw",spacing:0,justify:"space-around"},children:[Object(u.jsxs)(o.a,{item:!0,xs:3,children:[Object(u.jsx)(T.a,{size:400,color:"white",children:n.title}),Object(u.jsx)(h.a,{children:n.author}),Object(u.jsx)(h.a,{style:s,children:n.description.replace("___","")}),Object(u.jsx)(h.a,{style:s})]}),Object(u.jsx)(o.a,{item:!0,xs:9,style:{height:"90vh"},children:Object(u.jsx)(C.a,Object(x.a)(Object(x.a)({dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},{variableWidth:!0,slidesToShow:1}),{},{children:n.images.map((function(e,t){return Object(u.jsx)("div",{style:a,children:Object(u.jsx)(w.GlassMagnifier,{imageSrc:e.source,allowOverflow:!0,magnifierSize:"40%"})},t)}))}))})]})})]})})};var A,I,R,D,P,N,B,L=function(){var e=O((function(e){var t;return null===(t=e.map_data)||void 0===t?void 0:t.active_images})),t=Object(s.useState)(!1),i=Object(f.a)(t,2),n=i[0],a=i[1],r=v((function(e){return e.map_data.set_active_lightbox})),o=O((function(e){return e.map_data.active_lightbox})),l=O((function(e){return e.map_data.loaded})),c=Object(p.a)();Object(s.useEffect)((function(){}),[e,o]),Object(s.useEffect)((function(){console.log("data loaded changd, val is",l)}),[l]);var h={overflow:"hidden",height:"100%",border:"1px solid ".concat(c.palette.primary.main)};return Object(u.jsxs)("div",{style:{backgroundColor:"white",height:"100%",margin:"auto",flexDirection:"column"},children:[Object(u.jsx)("div",{children:Object(u.jsx)(_,{show:n,onClick:function(){return a(!1)}})}),Object(u.jsx)("div",{style:h,children:Object(u.jsx)(y.Scrollbars,{style:{width:"100%",height:"100%"},children:Object(u.jsx)("div",{style:{height:"100%",paddingTop:"0",width:"100%"},children:Object(u.jsx)(g.a,{tagStyle:{display:"none"},images:e,customOverlay:Object(u.jsx)("div",{style:{backgroundColor:"red"}}),rowHeight:75,maxRows:10,enableLightbox:!1,enableImageSelection:!1,onClickThumbnail:function(){console.log(this.props),a((function(e){return!e})),console.log(n),r(this.props.item)},tileViewportStyle:function(e,t,i){var n,a,s=(n=.5,a=4,n=Math.ceil(n),a=Math.floor(a),Math.random()*(a-n)+n);if(l)return{animation:"fadein ".concat(s,"s normal"),animationIterationCound:1}}})})})})]})};!function(e){e.ARTDESIGN="ARTDESIGN",e.ARCHITECTURE="ARCHITECTURE",e.LANDSCAPE="LANDSCAPE",e.OTHER="OTHER",e.ARTDESIGN_2016="ARTDESIGN_2016",e.ARTDESIGN_2018="ARTDESIGN_2018",e.ARTDESIGN_2020="ARTDESIGN_2020",e.ARCHITECTURE_2016="ARTDESIGN_2016",e.ARCHITECTURE_2018="ARTDESIGN_2018",e.ARCHITECTURE_2020="ARTDESIGN_2020",e.OTHER_2016="OTHER_2016",e.OTHER_2018="OTHER_2018",e.OTHER_2020="OTHER_2020",e.LANDSCAPE_2016="LANDSCAPE_2016",e.LANDSCAPE_2018="LANDSCAPE_2018",e.LANDSCAPE_2020="LANDSCAPE_2020"}(A||(A={})),function(e){e.national="national",e.state="state",e.city="city"}(I||(I={})),function(e){e.DATE="DATE",e.RANGE="RANGE"}(R||(R={})),function(e){e.BE_HOUSING="HOUSING",e.BE_TRANSPORTATION="TRANSPORTATION",e.BE_ENERGY="ENERGY",e.EE_COSTOFLIVING="COSTOFLIVING",e.EE_HOUSINGMARKET="HOUSINGMARKET",e.EE_COMMERCE="COMMERCE",e.NE_GREENSPACE="GREENSPACE",e.NE_POLLUTION="POLLUTION",e.NE_WATER="WATER",e.PE_GOVERMENT="GOVERMENT",e.PE_LEGISLATION="LEGISLATION",e.PE_ACTIVISM="ACTIVISM",e.SE_EDUCATION="EDUCATION",e.SE_HEALTH="HEALTH",e.SE_POPULATION="POPULATION"}(D||(D={})),function(e){e[e.TOPIC=0]="TOPIC",e[e.DISCIPLINE=1]="DISCIPLINE",e[e.THEME=2]="THEME"}(P||(P={})),N||(N={}),function(e){e.EQUITY="EQUITY",e.ACCESS="ACCESS",e.DIVERSITY="DIVERSITY"}(B||(B={}));var z=function(e){var t=e.info,i=Object(p.a)(),n=(i.palette.primary.main,{color:i.palette.primary.main,fontSize:"9pt",lineHeight:"5pt",fontFamily:i.typography.fontFamily,textDecoration:"underline"}),a={color:i.palette.primary.main,fontFamily:i.typography.fontFamily,fontSize:"9pt",lineHeight:"15pt"},r={start:new Date(1/1900),end:new Date(1/1900),title:"",info:"",tags:"",type:R.DATE,category:I.national},o=null!==t&&void 0!==t?t:r;return Object(s.useEffect)((function(){}),[t]),Object(u.jsxs)("div",{style:{height:"85%",paddingTop:"1em"},children:[Object(u.jsx)(c.a,{style:n,children:Object(u.jsx)(h.a,{children:o.title})}),Object(u.jsx)(c.a,{style:a,children:Object(u.jsx)(h.a,{style:a,children:o.info})})]})},H=i(22),U=i(23),F=i(12),G=i(29),Y=i(28),W=i(4),Z=i(200),V=i.n(Z),X=i(19),q=i.n(X),K=i(76),J=i(27),Q=i(32);function $(e){return"".concat(e.domain(),"-").concat(e.range())}function ee(e){var t=document.documentElement,i=e.getBoundingClientRect();return{top:i.top+window.pageYOffset-t.clientTop,left:i.left+window.pageXOffset-t.clientLeft}}var te=function(e){Object(G.a)(i,e);var t=Object(Y.a)(i);function i(e){var n;return Object(H.a)(this,i),(n=t.call(this,e)).state={isBrushing:!1},n.handleBrushMouseDown=n.handleBrushMouseDown.bind(Object(F.a)(n)),n.handleOverlayMouseDown=n.handleOverlayMouseDown.bind(Object(F.a)(n)),n.handleHandleMouseDown=n.handleHandleMouseDown.bind(Object(F.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(F.a)(n)),n.handleClick=n.handleClick.bind(Object(F.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(F.a)(n)),n}return Object(U.a)(i,[{key:"viewport",value:function(){var e=this.props,t=e.width,i=e.timeScale,n=i.invert(0),a=i.invert(t);return new J.TimeRange(n,a)}},{key:"handleBrushMouseDown",value:function(e){e.preventDefault();var t=e.pageX,i=e.pageY,n=[Math.round(t),Math.round(i)],a=+this.props.timeRange.begin(),s=+this.props.timeRange.end();document.addEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!0,brushingInitializationSite:"brush",initialBrushBeginTime:a,initialBrushEndTime:s,initialBrushXYPosition:n})}},{key:"handleOverlayMouseDown",value:function(e){e.preventDefault();var t=ee(this.overlay),i=e.pageX-t.left,n=this.props.timeScale.invert(i).getTime();document.addEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!0,brushingInitializationSite:"overlay",initialBrushBeginTime:n,initialBrushEndTime:n,initialBrushXYPosition:null})}},{key:"handleHandleMouseDown",value:function(e,t){e.preventDefault();var i=e.pageX,n=e.pageY,a=[Math.round(i),Math.round(n)],s=this.props.timeRange.begin().getTime(),r=this.props.timeRange.end().getTime();document.addEventListener("mouseover",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!0,brushingInitializationSite:"handle-".concat(t),initialBrushBeginTime:s,initialBrushEndTime:r,initialBrushXYPosition:a})}},{key:"handleMouseUp",value:function(e){e.preventDefault(),document.removeEventListener("mouseover",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!1,brushingInitializationSite:null,initialBrushBeginTime:null,initialBrushEndTime:null,initialBrushXYPosition:null})}},{key:"handleClick",value:function(){this.props.allowSelectionClear&&this.props.onTimeRangeChanged&&this.props.onTimeRangeChanged(null)}},{key:"handleMouseMove",value:function(e){e.preventDefault();var t=e.pageX,i=e.pageY,n=[Math.round(t),Math.round(i)],a=this.viewport();if(this.state.isBrushing){var s,r,o=this.state.initialBrushBeginTime,l=this.state.initialBrushEndTime;if("overlay"===this.state.brushingInitializationSite){var c=ee(this.overlay),h=e.pageX-c.left,p=this.props.timeScale.invert(h).getTime();p<o?(s=p<a.begin().getTime()?a.begin():p,r=o>a.end().getTime()?a.end():o):(s=o<a.begin().getTime()?a.begin():o,r=p>a.end().getTime()?a.end():p)}else{var u=this.state.initialBrushXYPosition,d=this.props.timeScale.invert(u[0]).getTime()-this.props.timeScale.invert(n[0]).getTime(),f=d,m=d;if(o-d<a.begin()&&(f=o-a.begin().getTime()),l-d>a.end()&&(m=l-a.end().getTime()),(s="brush"===this.state.brushingInitializationSite||"handle-left"===this.state.brushingInitializationSite?parseInt(o-f,10):o)>(r="brush"===this.state.brushingInitializationSite||"handle-right"===this.state.brushingInitializationSite?parseInt(l-m,10):l)){var g=[r,s];s=g[0],r=g[1]}}this.props.onTimeRangeChanged&&this.props.onTimeRangeChanged(new J.TimeRange(s,r))}}},{key:"renderOverlay",value:function(){var e,t=this,i=this.props,n=i.width,a=i.height;switch(this.state.brushingInitializationSite){case"handle-right":case"handle-left":e="ew-resize";break;case"brush":e="move";break;default:e="crosshair"}var s={fill:"white",opacity:0,cursor:e};return Object(u.jsx)("rect",{ref:function(e){t.overlay=e},x:0,y:0,width:n,height:a,style:s,onMouseDown:this.handleOverlayMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick})}},{key:"renderBrush",value:function(){var e,t=this.props,i=t.timeRange,n=t.timeScale,a=t.height,s=t.style;if(!i)return Object(u.jsx)("g",{});switch(this.state.brushingInitializationSite){case"handle-right":case"handle-left":e="ew-resize";break;case"overlay":e="crosshair";break;default:e="move"}var r={fill:"#777",fillOpacity:.3,stroke:"#fff",shapeRendering:"crispEdges",cursor:e},o=q()(!0,r,s);if(!this.viewport().disjoint(i)){var l=i.intersection(this.viewport()),c=l.begin(),h=l.end(),p=[n(c),0],d=p[0],f=p[1],m=n(h)-d;m<1&&(m=1);var g={x:d,y:f,width:m,height:a};return Object(u.jsx)("rect",Object(x.a)(Object(x.a)({},g),{},{style:o,pointerEvents:"all",onMouseDown:this.handleBrushMouseDown,onMouseUp:this.handleMouseUp}))}return Object(u.jsx)("g",{})}},{key:"renderHandles",value:function(){var e=this,t=this.props,i=t.timeRange,n=t.timeScale,a=t.height;if(!i)return Object(u.jsx)("g",{});var s={fill:"white",opacity:0,cursor:"ew-resize"};if(!this.viewport().disjoint(i)){var r=i.intersection(this.viewport()).toJSON(),o=Object(f.a)(r,2),l=o[0],c=o[1],h=[n(l),0],p=h[0],d=h[1],m=n(c)-p;m<1&&(m=1);var g=this.props.handleSize,b={x:p-1,y:d,width:g,height:a},j={x:p+(m-g),y:d,width:g+1,height:a};return Object(u.jsxs)("g",{children:[Object(u.jsx)("rect",Object(x.a)(Object(x.a)({},b),{},{style:s,pointerEvents:"all",onMouseDown:function(t){return e.handleHandleMouseDown(t,"left")},onMouseUp:this.handleMouseUp})),Object(u.jsx)("rect",Object(x.a)(Object(x.a)({},j),{},{style:s,pointerEvents:"all",onMouseDown:function(t){return e.handleHandleMouseDown(t,"right")},onMouseUp:this.handleMouseUp}))]})}return Object(u.jsx)("g",{})}},{key:"render",value:function(){return Object(u.jsxs)("g",{onMouseMove:this.handleMouseMove,children:[this.renderOverlay(),this.renderBrush(),this.renderHandles()]})}}]),i}(r.a.Component);te.defaultProps={handleSize:6,allowSelectionClear:!1};var ie=function(e){Object(G.a)(i,e);var t=Object(Y.a)(i);function i(e){var n;return Object(H.a)(this,i),(n=t.call(this,e)).hasNullBrush=function(){return(n.props.timeRanges||[]).length>0&&null==n.props.timeRanges[n.props.timeRanges.length-1]},n.handleMouseClick=function(e,t){n.props.onTimeRangeClicked&&n.props.onTimeRangeClicked(t)},n.state={isBrushing:!1},n.handleBrushMouseDown=n.handleBrushMouseDown.bind(Object(F.a)(n)),n.handleOverlayMouseDown=n.handleOverlayMouseDown.bind(Object(F.a)(n)),n.handleHandleMouseDown=n.handleHandleMouseDown.bind(Object(F.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(F.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(F.a)(n)),n}return Object(U.a)(i,[{key:"viewport",value:function(){var e=this.props,t=e.width,i=e.timeScale,n=i.invert(0),a=i.invert(t);return new J.TimeRange(n,a)}},{key:"handleBrushMouseDown",value:function(e,t){e.preventDefault();var i=e.pageX,n=e.pageY,a=[Math.round(i),Math.round(n)],s=+this.props.timeRanges[t].begin(),r=+this.props.timeRanges[t].end();document.addEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!0,brushingInitializationSite:"brush",initialBrushBeginTime:s,initialBrushEndTime:r,initialBrushXYPosition:a,brushIndex:t})}},{key:"handleOverlayMouseDown",value:function(e){if(this.props.allowFreeDrawing||this.hasNullBrush()){e.preventDefault();var t=ee(this.overlay),i=e.pageX-t.left,n=this.props.timeScale.invert(i).getTime();document.addEventListener("mouseup",this.handleMouseUp);var a=this.props.allowFreeDrawing?this.props.timeRanges.length:this.props.timeRanges.length-1;this.setState({isBrushing:!0,brushingInitializationSite:"overlay",initialBrushBeginTime:n,initialBrushEndTime:n,initialBrushXYPosition:null,brushIndex:a})}}},{key:"handleHandleMouseDown",value:function(e,t,i){e.preventDefault();var n=e.pageX,a=e.pageY,s=[Math.round(n),Math.round(a)],r=this.props.timeRanges[i].begin().getTime(),o=this.props.timeRanges[i].end().getTime();document.addEventListener("mouseover",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),this.setState({isBrushing:!0,brushingInitializationSite:"handle-".concat(t),initialBrushBeginTime:r,initialBrushEndTime:o,initialBrushXYPosition:s,brushIndex:i})}},{key:"handleMouseUp",value:function(e){var t=this;e.preventDefault(),document.removeEventListener("mouseover",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp);var i=this.state.brushIndex;this.setState({isBrushing:!1,brushingInitializationSite:null,initialBrushBeginTime:null,initialBrushEndTime:null,initialBrushXYPosition:null,brushIndex:null},(function(){t.props.onUserMouseUp&&t.props.onUserMouseUp(i)}))}},{key:"handleMouseMove",value:function(e){e.preventDefault();var t=e.pageX,i=e.pageY,n=[Math.round(t),Math.round(i)],a=this.viewport();if(this.state.isBrushing){var s,r,o=this.state.initialBrushBeginTime,l=this.state.initialBrushEndTime;if("overlay"===this.state.brushingInitializationSite){var c=ee(this.overlay),h=e.pageX-c.left,p=this.props.timeScale.invert(h).getTime();p<o?(s=p<a.begin().getTime()?a.begin():p,r=o>a.end().getTime()?a.end():o):(s=o<a.begin().getTime()?a.begin():o,r=p>a.end().getTime()?a.end():p)}else{var u=this.state.initialBrushXYPosition,d=this.props.timeScale.invert(u[0]).getTime()-this.props.timeScale.invert(n[0]).getTime(),f=d,m=d;if(o-d<a.begin()&&(f=o-a.begin().getTime()),l-d>a.end()&&(m=l-a.end().getTime()),(s="brush"===this.state.brushingInitializationSite||"handle-left"===this.state.brushingInitializationSite?parseInt(o-f,10):o)>(r="brush"===this.state.brushingInitializationSite||"handle-right"===this.state.brushingInitializationSite?parseInt(l-m,10):l)){var g=[r,s];s=g[0],r=g[1]}}this.props.onTimeRangeChanged&&this.props.onTimeRangeChanged(new J.TimeRange(s,r),this.state.brushIndex)}}},{key:"renderOverlay",value:function(){var e,t=this,i=this.props,n=i.width,a=i.height;switch(this.state.brushingInitializationSite){case"handle-right":case"handle-left":e="ew-resize";break;case"brush":e="move";break;default:e=this.props.allowFreeDrawing||this.hasNullBrush()?"crosshair":"default"}var s={fill:"white",opacity:0,cursor:e};return Object(u.jsx)("rect",{ref:function(e){t.overlay=e},x:0,y:0,width:n,height:a,style:s,onClick:this.handleMouseClick,onMouseDown:this.handleOverlayMouseDown,onMouseUp:this.handleMouseUp})}},{key:"renderBrush",value:function(e,t){var i,n=this,a=this.props,r=a.timeScale,o=a.height;if(!e)return Object(u.jsx)("g",{});switch(this.state.brushingInitializationSite){case"handle-right":case"handle-left":i="ew-resize";break;case"overlay":i=this.props.allowFreeDrawing||this.hasNullBrush()?"crosshair":"default";break;default:i="move"}var l={fill:"#777",fillOpacity:.3,stroke:"#fff",shapeRendering:"crispEdges",cursor:i},c=this.props.style?this.props.style(t):{},h=q()(!0,l,c);if(!this.viewport().disjoint(e)){var p=e.intersection(this.viewport()),d=p.begin(),f=p.end(),m=[r(d),0],g=m[0],b=m[1],j=r(f)-g;j<1&&(j=1);var v={x:g,y:b,width:j,height:o};return Object(s.createElement)("rect",Object(x.a)(Object(x.a)({},v),{},{key:"".concat(t,"-").concat(h),style:h,pointerEvents:"all",onClick:function(e){return n.handleMouseClick(e,t)},onMouseDown:function(e){return n.handleBrushMouseDown(e,t)},onMouseUp:this.handleMouseUp}))}return Object(u.jsx)("g",{})}},{key:"renderHandles",value:function(e,t){var i=this,n=this.props,a=n.timeScale,s=n.height;if(!e)return Object(u.jsx)("g",{});var r={fill:"white",opacity:0,cursor:"ew-resize"};if(!this.viewport().disjoint(e)){var o=e.intersection(this.viewport()).toJSON(),l=Object(f.a)(o,2),c=l[0],h=l[1],p=[a(c),0],d=p[0],m=p[1],g=a(h)-d;g<1&&(g=1);var b=this.props.handleSize,j={x:d-1,y:m,width:b,height:s},v={x:d+(g-b),y:m,width:b+1,height:s};return Object(u.jsxs)("g",{children:[Object(u.jsx)("rect",Object(x.a)(Object(x.a)({},j),{},{style:r,pointerEvents:"all",onMouseDown:function(e){return i.handleHandleMouseDown(e,"left",t)},onMouseUp:this.handleMouseUp})),Object(u.jsx)("rect",Object(x.a)(Object(x.a)({},v),{},{style:r,pointerEvents:"all",onMouseDown:function(e){return i.handleHandleMouseDown(e,"right",t)},onMouseUp:this.handleMouseUp}))]})}return Object(u.jsx)("g",{})}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("g",{onMouseMove:this.handleMouseMove,children:[this.renderOverlay(),(this.props.timeRanges||[]).map((function(t,i){return Object(u.jsxs)("g",{children:[e.renderBrush(t,i),e.renderHandles(t,i)]},"multibrush_".concat(i))}))]})}}]),i}(r.a.Component);ie.defaultProps={handleSize:6,allowFreeDrawing:!0};var ne=i(454),ae=(i(120),i(18)),se=i(30),re=i(471),oe=i(453),le=(i(187),{label:{stroke:"none",fill:"#8B7E7E",fontWeight:100,fontSize:12,font:'"Goudy Bookletter 1911", sans-serif"'},values:{stroke:"none",fill:"#8B7E7E",fontWeight:100,fontSize:11,font:'"Goudy Bookletter 1911", sans-serif"'},ticks:{fill:"none",stroke:"#C0C0C0"},axis:{fill:"none",stroke:"#C0C0C0"}}),ce=function(e){Object(G.a)(i,e);var t=Object(Y.a)(i);function i(){return Object(H.a)(this,i),t.apply(this,arguments)}return Object(U.a)(i,[{key:"componentDidMount",value:function(){this.renderAxis(this.props.align,this.props.scale,+this.props.width,+this.props.height,this.props.showGrid,+this.props.chartExtent,this.props.hideAxisLine,this.props.absolute,this.props.type,this.props.format,this.props.label,this.props.tickCount,this.props.min,this.props.max)}},{key:"componentWillReceiveProps",value:function(e){var t=e.scale,i=e.align,n=e.width,a=e.height,s=e.chartExtent,r=e.absolute,o=e.format,l=e.type,c=e.showGrid,h=e.hideAxisLine,p=e.label,u=e.tickCount,d=e.min,f=e.max;$(this.props.scale)!==$(t)?this.updateAxis(i,t,n,a,c,s,h,r,l,o,p,u,d,f):this.props.format!==o||this.props.align!==i||this.props.width!==n||this.props.height!==a||this.props.type!==l||this.props.absolute!==r||this.props.chartExtent!==s||this.props.showGrid!==c||this.props.hideAxisLine!==h?this.renderAxis(i,t,+n,+a,c,s,h,r,l,o,p,u,d,f):this.props.label!==p&&this.updateLabel(p)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"yformat",value:function(e){return W.default.isString(e)?Object(re.a)(e):W.default.isFunction(e)?e:Object(re.a)("")}},{key:"mergeStyles",value:function(e){return{labelStyle:q()(!0,le.label,this.props.style.label?this.props.style.label:{}),valueStyle:q()(!0,le.values,this.props.style.values?this.props.style.values:{}),axisStyle:q()(!0,le.axis,this.props.style.axis?this.props.style.axis:{}),tickStyle:q()(!0,le.ticks,this.props.style.ticks?this.props.style.ticks:{})}}},{key:"postSelect",value:function(e,t,i){var n=e.valueStyle,s=e.tickStyle,r=e.axisStyle;Object(oe.a)(a.a.findDOMNode(this)).select("g").selectAll(".tick").select("text").styles(n),Object(oe.a)(a.a.findDOMNode(this)).select("g").selectAll(".tick").select("line").styles(s),Object(oe.a)(a.a.findDOMNode(this)).select("g").selectAll(".domain").remove(),t||Object(oe.a)(a.a.findDOMNode(this)).select("g").append("line").styles(r).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",i)}},{key:"generator",value:function(e,t,i,n,a,s,r,o,l){var c;if("linear"===e||"power"===e)if(r>0){var h=(l-o)/(r-1);c=n(a).tickValues(Object(ae.e)(o,l+l/1e4,h)).tickFormat((function(e){return i(t?Math.abs(e):e)})).tickSizeOuter(0)}else c=s<=200?n(a).ticks(4).tickFormat((function(e){return i(t?Math.abs(e):e)})).tickSizeOuter(0):n(a).tickFormat((function(e){return i(t?Math.abs(e):e)})).tickSizeOuter(0);else if("log"===e){if(0===o)throw Error("In a log scale, minimum value can't be 0");c=n(a).ticks(10,".2s").tickSizeOuter(0)}return c}},{key:"renderAxis",value:function(e,t,i,n,s,r,o,l,c,h,p,u,d,f){var m=this.yformat(h),g="left"===e?se.b:se.c,b=this.mergeStyles(this.props.style),j=b.labelStyle,v=b.valueStyle,O=s&&this.props.isInnerAxis?-r:5,y="left"===e?i-0:0,x="left"===e?this.props.labelOffset-50:40+this.props.labelOffset,E=this.generator(c,l,m,g,t,n,u,d,f);Object(oe.a)(a.a.findDOMNode(this)).selectAll("*").remove(),this.axis=Object(oe.a)(a.a.findDOMNode(this)).append("g").attr("transform","translate(".concat(y,",0)")).attr("class","yaxis").styles(v).call(E.tickSize(O)).append("text").text(p||this.props.label).styles(j).attr("transform","rotate(-90)").attr("class","yaxislabel").attr("y",x).attr("dy",".71em").attr("text-anchor","end"),this.postSelect(b,o,n)}},{key:"updateAxis",value:function(e,t,i,n,s,r,o,l,c,h,p,u,d,f){var m=this.yformat(h),g="left"===e?se.b:se.c,b=this.mergeStyles(this.props.style),j=s&&this.props.isInnerAxis?-r:5,v=this.generator(c,l,m,g,t,n,u,d,f);Object(oe.a)(a.a.findDOMNode(this)).select(".yaxis").transition().duration(this.props.transition).ease(ne.a).call(v.tickSize(j)),this.updateLabel(p),this.postSelect(b,o,n)}},{key:"updateLabel",value:function(e){Object(oe.a)(a.a.findDOMNode(this)).select(".yaxislabel").text(e)}},{key:"render",value:function(){return Object(u.jsx)("g",{})}}]),i}(r.a.Component);ce.defaultProps={id:"yaxis",align:"left",min:0,max:1,showGrid:!1,hideAxisLine:!1,type:"linear",absolute:!1,format:".2s",labelOffset:0,transition:100,width:80,style:le};var he=function(e){Object(G.a)(i,e);var t=Object(Y.a)(i);function i(){return Object(H.a)(this,i),t.apply(this,arguments)}return Object(U.a)(i,[{key:"render",value:function(){return"".concat(this.constructor.name," elements are for configuration only\nand should not be rendered")}}]),i}(r.a.Component),pe=i(61),ue=i.n(pe),de=i(476),fe=(i(186),{fill:"#FEFEFE",stroke:"#DDD",opacity:.8}),me={fontSize:11,textAnchor:"left",fill:"#b0b0b0",pointerEvents:"none"},ge={fontSize:11,textAnchor:"middle",fill:"#bdbdbd",pointerEvents:"none"};var be=function(e){var t=e.align,i=e.style,n=e.width,a=e.height,s=function(e,t){return{boxStyle:q()(!0,fe,e.box?e.box:{}),labelStyle:q()(!0,t?ge:me,e.label?e.label:{})}}(i,"center"===t),r=s.boxStyle,o=s.labelStyle;if(!e.values.length)return Object(u.jsx)("g",{});var l=e.values.map((function(i,n){if("left"===t)return Object(u.jsx)("g",{children:Object(u.jsxs)("text",{x:10,y:5,dy:"".concat(1.2*(n+1),"em"),style:o,children:[Object(u.jsx)("tspan",{style:{fontWeight:700},children:"".concat(i.label,": ")}),Object(u.jsx)("tspan",{children:"".concat(i.value)})]})},n);var a=parseInt(e.width/2,10);return Object(u.jsx)("g",{children:Object(u.jsxs)("text",{x:a,y:5,dy:"".concat(1.2*(n+1),"em"),style:o,children:[Object(u.jsx)("tspan",{style:{fontWeight:700},children:"".concat(i.label,": ")}),Object(u.jsx)("tspan",{children:"".concat(i.value)})]})},n)})),c=Object(u.jsx)("rect",{style:r,x:0,y:0,width:n,height:a});return Object(u.jsxs)("g",{children:[c,l]})};be.defaultProps={align:"center",width:100,height:100,pointerEvents:"none",style:{fill:"#FEFEFE",stroke:"#DDD",opacity:.8}};var je=be,ve={fill:"#FEFEFE",stroke:"#DDD",opacity:.8},Oe={fontSize:11,textAnchor:"left",fill:"#b0b0b0",pointerEvents:"none"},ye={fontSize:11,textAnchor:"middle",fill:"#bdbdbd",pointerEvents:"none"};var xe=function(e){var t=e.label,i=e.style,n=e.align,a=e.width,s=e.height,r=function(e,t){return{boxStyle:q()(!0,ve,e.box?e.box:{}),labelStyle:q()(!0,t?ye:Oe,e.label?e.label:{})}}(i,"center"===n),o=r.boxStyle,l=r.labelStyle,c="center"===n?parseInt(a/2,10):10,h=Object(u.jsx)("text",{x:c,y:5,dy:"1.2em",style:l,children:t}),p=Object(u.jsx)("rect",{x:0,y:0,style:o,width:a,height:s});return Object(u.jsxs)("g",{children:[p,h]})};xe.defaultProps={align:"center",width:100,height:100,pointerEvents:"none"};var Ee=xe,Se=function(e){Object(G.a)(i,e);var t=Object(Y.a)(i);function i(){return Object(H.a)(this,i),t.apply(this,arguments)}return Object(U.a)(i,[{key:"renderLine",value:function(e){return Object(u.jsx)("line",{style:this.props.infoStyle.line,x1:e,y1:0,x2:e,y2:this.props.height})}},{key:"renderTimeMarker",value:function(e){var t="".concat(e);if("day"===this.props.timeFormat)t=Object(de.a)("%d")(e);else if("month"===this.props.timeFormat){t=Object(de.a)("%B")(e)}else if("year"===this.props.timeFormat){t=Object(de.a)("%Y")(e)}else if("relative"===this.props.timeFormat)t=ue.a.duration(+e).format();else if(W.default.isString(this.props.timeFormat)){t=Object(de.a)(this.props.timeFormat)(e)}else W.default.isFunction(this.props.timeFormat)&&(t=this.props.timeFormat(e));return Object(u.jsx)("text",{x:0,y:0,dy:"1.2em",style:{fontSize:11,textAnchor:"left",fill:"#bdbdbd"},children:t})}},{key:"renderInfoBox",value:function(e){var t=this.props.infoWidth,i={align:"left",style:{box:this.props.infoStyle.box,label:this.props.infoStyle.label},width:this.props.infoWidth,height:this.props.infoHeight};if(this.props.infoValues){var n=W.default.isString(this.props.infoValues)?Object(u.jsx)(Ee,Object(x.a)(Object(x.a)({},i),{},{label:this.props.infoValues})):Object(u.jsx)(je,Object(x.a)(Object(x.a)({},i),{},{values:this.props.infoValues}));return e+10+t<this.props.width-50?Object(u.jsxs)("g",{transform:"translate(".concat(e+10,",",5,")"),children:[this.props.showTime?this.renderTimeMarker(this.props.time):null,Object(u.jsx)("g",{transform:"translate(0,".concat(this.props.showTime?20:0,")"),children:n})]}):Object(u.jsxs)("g",{transform:"translate(".concat(e-t-10,",",5,")"),children:[this.props.showTime?this.renderTimeMarker(this.props.time):null,Object(u.jsx)("g",{transform:"translate(0,".concat(this.props.showTime?20:0,")"),children:n})]})}return Object(u.jsx)("g",{})}},{key:"render",value:function(){var e=this.props.timeScale(this.props.time);return e?Object(u.jsxs)("g",{children:[this.props.showLine?this.renderLine(e):null,this.props.showInfoBox?this.renderInfoBox(e):null]}):null}}]),i}(r.a.Component);Se.defaultProps={visible:!0,showInfoBox:!0,showLine:!0,showTime:!0,infoStyle:{line:{stroke:"#999",cursor:"crosshair",pointerEvents:"none"},box:{fill:"white",opacity:.9,stroke:"#999",pointerEvents:"none"},dot:{fill:"#999"}},infoWidth:90,infoHeight:25};var Te=function(){function e(t,i,n){Object(H.a)(this,e),this.id=W.default.uniqueId("scaler"),this.ease=i,this.transitionTime=t,this.observer=n,this.sourceScale=null,this.targetScale=null,this.cachedScaler=null,this.cacheKey=null}return Object(U.a)(e,[{key:"update",value:function(){var e=this,t=0;this.initialTimestamp?t=window.performance.now()-this.initialTimestamp:this.initialTimestamp=window.performance.now();var i=this.transitionTime?Math.min(t/this.transitionTime,1):1;if(this.targetScale){if(this.observer){var n=this.sourceScale,a=this.targetScale,s=this.ease(i);this.observer((function(e){var t=n(e);return t+(a(e)-t)*s}))}i<1?setTimeout((function(){return e.update()}),20):(this.sourceScale=this.targetScale,this.targetScale=null,this.initialTimestamp=null)}}},{key:"setScale",value:function(e,t){var i=this;this.sourceScale?(e!==this.cacheKey&&(this.targetScale=t,this.cachedScaler=null,this.initialTimestamp=null,setTimeout((function(){return i.update()}),0)),this.cacheKey=e):this.sourceScale=t}},{key:"scaler",value:function(){var e=this;return W.default.isNull(this.cachedScaler)&&(this.cachedScaler=function(t){return e.sourceScale(t)}),this.cachedScaler}},{key:"latestScale",value:function(){return this.targetScale?this.targetScale:this.sourceScale}},{key:"transition",value:function(){return this.transitionTime}}]),e}();var Me=function(e){Object(G.a)(i,e);var t=Object(Y.a)(i);function i(e){var n;Object(H.a)(this,i),(n=t.call(this,e)).isChildYAxis=function(e){return Object(Q.areComponentsEqual)(e.type,ce)||W.default.has(e.props,"min")&&W.default.has(e.props,"max")};var a=W.default.uniqueId("clip_"),s="url(#".concat(a,")");return n.state={clipId:a,clipPathURL:s},n.mounted=!0,n}return Object(U.a)(i,[{key:"updateScales",value:function(e){var t=this,i=e.axisMargin,n=+e.height-2*i,a=i,s=n-i;r.a.Children.forEach(e.children,(function(e){if(null!==e&&t.isChildYAxis(e)){var i,n=e.props,r=n.id,o=n.max,l=n.min,c=n.transition,h=void 0===c?0:c,p=n.type,u=void 0===p?"linear":p;W.default.has(t.scaleMap,r)||(t.scaleMap[r]=new Te(h,ne.a,(function(e){var i=t.state.yAxisScalerMap;i[r]=e,t.mounted&&t.setState(i)}))),i=W.default.has(e.props,"yScale")?e.props.yScale:function(e,t,i,n,a,s){var r;if(W.default.isUndefined(i)||W.default.isUndefined(n))r=null;else if("linear"===t)r=Object(K.a)().domain([i,n]).range([a,s]).nice();else if("log"===t){var o=e.props.logBase||10;r=Object(K.b)().base(o).domain([i,n]).range([a,s])}else if("power"===t){var l=e.props.powerExponent||2;r=Object(K.c)().exponent(l).domain([i,n]).range([a,s])}return r}(e,u,l,o,s,a);var d="".concat(u,"-").concat(l,"-").concat(o,"-").concat(s,"-").concat(a);t.scaleMap[r].setScale(d,i)}}));var o={};W.default.forEach(this.scaleMap,(function(e,t){o[t]=e.scaler()})),this.mounted&&this.setState({yAxisScalerMap:o})}},{key:"componentWillMount",value:function(){this.scaleMap={},this.updateScales(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.updateScales(e)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e,t,i,n,a=this,s=this.props,o=s.paddingLeft,l=s.paddingRight,c=[],h=[],p=+this.props.height-2*this.props.axisMargin,d={},f=[],m=[],g=!0;r.a.Children.forEach(this.props.children,(function(e){if(null!==e)if(Object(Q.areComponentsEqual)(e.type,he))g=!1;else{var t=e.props.id;if(a.isChildYAxis(e)){var i=e;i.props.id&&!1!==i.props.visible&&(d[i.props.id]=i),g?f.push(t):m.push(t)}}})),f.reverse();var b=0,j=W.default.reduce(this.props.leftAxisWidths,(function(e,t){return e+t}),0),v=W.default.reduce(this.props.rightAxisWidths,(function(e,t){return e+t}),0),O=this.props.width-j-v-o-l;b=j;for(var y=0;y<this.props.leftAxisWidths.length;y+=1){var E=this.props.leftAxisWidths[y];b-=E,E>0&&y<f.length&&(t=f[y],W.default.has(d,t)&&(e="translate(".concat(b+o,",0)"),i={width:E,height:p,chartExtent:O,isInnerAxis:0===y,align:"left",scale:this.scaleMap[t].latestScale()},n=r.a.cloneElement(d[t],i),c.push(Object(u.jsx)("g",{transform:e,children:n},"y-axis-left-".concat(y)))))}b=this.props.width-v-l;for(var S=0;S<this.props.rightAxisWidths.length;S+=1){var T=this.props.rightAxisWidths[S];T>0&&S<m.length&&(t=m[S],W.default.has(d,t)&&(e="translate(".concat(b+o,",0)"),i={width:T,height:p,chartExtent:O,isInnerAxis:0===S,align:"right",scale:this.scaleMap[t].latestScale()},n=r.a.cloneElement(d[t],i),c.push(Object(u.jsx)("g",{transform:e,children:n},"y-axis-right-".concat(S))))),b+=T}var M="translate(".concat(j+o,",0)"),k=0;r.a.Children.forEach(this.props.children,(function(e){if(null!==e&&Object(Q.areComponentsEqual)(e.type,he)){var t=e;r.a.Children.forEach(t.props.children,(function(e){if(!W.default.has(e.props,"visible")||e.props.visible){var t=null;W.default.has(a.state.yAxisScalerMap,e.props.axis)&&(t=a.state.yAxisScalerMap[e.props.axis]);var i=null;W.default.has(a.scaleMap,e.props.axis)&&(i=a.scaleMap[e.props.axis]);var n={key:k,width:O,height:p,timeScale:a.props.timeScale,timeFormat:a.props.timeFormat};t&&(n.yScale=t),i&&(n.transition=i),h.push(r.a.cloneElement(e,n)),k+=1}}))}}));var C=[],w=[];k=0,r.a.Children.forEach(this.props.children,(function(e){if(null!==e){if(Object(Q.areComponentsEqual)(e.type,te)||Object(Q.areComponentsEqual)(e.type,ie)){var t={key:"brush-".concat(k),width:O,height:p,timeScale:a.props.timeScale};Object(Q.areComponentsEqual)(e.type,te)?C.push(r.a.cloneElement(e,t)):w.push(r.a.cloneElement(e,t))}k+=1}}));var _,A=Object(u.jsx)("g",{transform:M,children:Object(u.jsx)("g",{clipPath:this.state.clipPathURL,children:h},"charts")},"event-rect-group"),I=Object(u.jsx)("defs",{children:Object(u.jsx)("clipPath",{id:this.state.clipId,children:Object(u.jsx)("rect",{x:"0",y:"0",style:{strokeOpacity:0},width:O,height:p})})}),R=Object(u.jsx)("g",{transform:M,children:C},"brush-group"),D=Object(u.jsx)("g",{transform:M,children:w},"multi-brush-group");if(this.props.trackerTime){var P={timeFormat:this.props.trackerTimeFormat||this.props.timeFormat,showLine:!1,showTime:this.props.trackerShowTime,time:this.props.trackerTime,timeScale:this.props.timeScale,width:O,infoStyle:this.props.trackerStyle};this.props.trackerInfoValues&&(P.infoWidth=this.props.trackerInfoWidth,P.infoHeight=this.props.trackerInfoHeight,P.infoValues=this.props.trackerInfoValues,P.timeFormat=this.props.trackerTimeFormat);var N="translate(".concat(j+o,",0)");_=Object(u.jsx)("g",{style:{pointerEvents:"none"},transform:N,children:Object(u.jsx)(Se,Object(x.a)({},P))},"tracker-group")}return Object(u.jsxs)("g",{children:[I,c,A,R,D,_]})}}]),i}(r.a.Component);Me.defaultProps={trackerTimeFormat:"%b %d %Y %X",enablePanZoom:!1,height:100,axisMargin:5,visible:!0};var ke=function(e){Object(G.a)(i,e);var t=Object(Y.a)(i);function i(e){var n;return Object(H.a)(this,i),(n=t.call(this,e)).state={isPanning:!1,initialPanBegin:null,initialPanEnd:null,initialPanPosition:null},n.handleScrollWheel=n.handleScrollWheel.bind(Object(F.a)(n)),n.handleMouseDown=n.handleMouseDown.bind(Object(F.a)(n)),n.handleMouseUp=n.handleMouseUp.bind(Object(F.a)(n)),n.handleMouseOut=n.handleMouseOut.bind(Object(F.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(F.a)(n)),n.handleContextMenu=n.handleContextMenu.bind(Object(F.a)(n)),n}return Object(U.a)(i,[{key:"componentDidMount",value:function(){this.eventHandlerRef.addEventListener("wheel",this.handleScrollWheel,{passive:!1})}},{key:"getOffsetMousePosition",value:function(e){var t=ee(this.eventRect),i=e.pageX-t.left,n=e.pageY-t.top;return[Math.round(i),Math.round(n)]}},{key:"handleScrollWheel",value:function(e){if(this.props.enablePanZoom||this.props.enableDragZoom){e.preventDefault();var t=1+.001*e.deltaY;t>3&&(t=3),t<.1&&(t=.1);var i=this.getOffsetMousePosition(e),n=this.props.scale.domain()[0].getTime(),a=this.props.scale.domain()[1].getTime(),s=this.props.scale.invert(i[0]).getTime(),r=s-parseInt((s-n)*t,10),o=s+parseInt((a-s)*t,10),l=(a-n)*t;if(this.props.minDuration){var c=parseInt(this.props.minDuration,10);l<this.props.minDuration&&(r=s-(s-n)/(a-n)*c,o=s+(a-s)/(a-n)*c)}if(this.props.minTime&&this.props.maxTime){var h=this.props.maxTime.getTime()-this.props.minTime.getTime();l>h&&(l=h)}this.props.minTime&&r<this.props.minTime.getTime()&&(o=(r=this.props.minTime.getTime())+l),this.props.maxTime&&o>this.props.maxTime.getTime()&&(r=(o=this.props.maxTime.getTime())-l);var p=new Date(r),u=new Date(o),d=new J.TimeRange(p,u);this.props.onZoom&&this.props.onZoom(d)}}},{key:"handleMouseDown",value:function(e){if((this.props.enablePanZoom||this.props.enableDragZoom)&&2!==e.button){if(e.preventDefault(),document.addEventListener("mouseover",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),this.props.enableDragZoom){var t=this.getOffsetMousePosition(e);this.setState({isDragging:!0,initialDragZoom:t[0],currentDragZoom:t[0]})}if(this.props.enablePanZoom){var i=e.pageX,n=e.pageY,a=[Math.round(i),Math.round(n)],s=this.props.scale.domain()[0].getTime(),r=this.props.scale.domain()[1].getTime();this.setState({isPanning:!0,initialPanBegin:s,initialPanEnd:r,initialPanPosition:a})}return!1}}},{key:"handleMouseUp",value:function(e){if(this.props.onMouseClick||this.props.enablePanZoom||this.props.enableDragZoom){e.stopPropagation(),document.removeEventListener("mouseover",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp);var t=this.getOffsetMousePosition(e),i=e.pageX,n=this.state.initialPanPosition&&Math.abs(i-this.state.initialPanPosition[0])>2,a=this.state.initialDragZoom&&Math.abs(t[0]-this.state.initialDragZoom)>2;if(!this.props.onMouseClick||n||a||this.props.onMouseClick(t[0],t[1]),this.props.enableDragZoom){if(a){var s=this.props.scale.invert(this.state.initialDragZoom).getTime(),r=this.props.scale.invert(this.state.currentDragZoom).getTime(),o=parseInt(s,10),l=parseInt(r,10);this.props.minTime&&o<this.props.minTime.getTime()&&(o=this.props.minTime.getTime()),this.props.maxTime&&l>this.props.maxTime.getTime()&&(l=this.props.maxTime.getTime());var c=new J.TimeRange([o,l].sort());this.props.onZoom&&this.props.onZoom(c)}this.setState({isDragging:!1,initialDragZoom:null,initialPanEnd:null,currentDragZoom:null})}this.props.enablePanZoom&&this.setState({isPanning:!1,initialPanBegin:null,initialPanEnd:null,initialPanPosition:null})}}},{key:"handleMouseOut",value:function(e){e.preventDefault(),this.props.onMouseOut&&this.props.onMouseOut()}},{key:"handleMouseMove",value:function(e){e.preventDefault();var t=e.pageX,i=e.pageY,n=[Math.round(t),Math.round(i)],a=this.getOffsetMousePosition(e);if(this.state.isDragging&&this.setState({currentDragZoom:a[0]}),this.state.isPanning){var s=this.state.initialPanPosition,r=this.props.scale.invert(n[0]).getTime()-this.props.scale.invert(s[0]).getTime(),o=parseInt(this.state.initialPanBegin-r,10),l=parseInt(this.state.initialPanEnd-r,10),c=parseInt(this.state.initialPanEnd-this.state.initialPanBegin,10);this.props.minTime&&o<this.props.minTime.getTime()&&(l=(o=this.props.minTime.getTime())+c),this.props.maxTime&&l>this.props.maxTime.getTime()&&(o=(l=this.props.maxTime.getTime())-c);var h=new J.TimeRange(o,l);this.props.onZoom&&this.props.onZoom(h)}else if(this.props.onMouseMove){var p=this.getOffsetMousePosition(e);this.props.onMouseMove&&this.props.onMouseMove(p[0],p[1])}}},{key:"handleContextMenu",value:function(e){var t=e.pageX,i=e.pageY;this.props.onContextMenu&&this.props.onContextMenu(t,i)}},{key:"render",value:function(){var e=this,t=this.state.isPanning?"-webkit-grabbing":"default",i={onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseOut:this.handleMouseOut,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu};return Object(u.jsxs)("g",Object(x.a)(Object(x.a)({pointerEvents:"all",ref:function(t){e.eventHandlerRef=t}},i),{},{children:[Object(u.jsx)("rect",{ref:function(t){e.eventRect=t},style:{fill:"#000",opacity:0,cursor:t},x:0,y:0,width:this.props.width,height:this.props.height},"handler-hit-rect"),this.props.children,this.state.isDragging&&Object(u.jsx)("rect",{style:{opacity:.3,fill:"grey"},x:Math.min(this.state.currentDragZoom,this.state.initialDragZoom),y:0,width:Math.abs(this.state.currentDragZoom-this.state.initialDragZoom),height:this.props.height,pointerEvents:"none"})]}))}}]),i}(r.a.Component);ke.defaultProps={enablePanZoom:!1,enableDragZoom:!1};var Ce=i(450),we=i(448),_e=i(452),Ae=i(446),Ie=i(451),Re=i(445);function De(e){return"".concat(e.domain().toString(),"-").concat(e.range().toString())}var Pe={values:{stroke:"none",fill:"#8B7E7E",fontWeight:100,fontSize:11,font:'"Goudy Bookletter 1911", sans-serif"'},ticks:{fill:"none",stroke:"#C0C0C0"},axis:{fill:"none",stroke:"#C0C0C0"}},Ne=function(e){Object(G.a)(i,e);var t=Object(Y.a)(i);function i(){return Object(H.a)(this,i),t.apply(this,arguments)}return Object(U.a)(i,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scale,i=e.format,n=e.showGrid,a=e.gridHeight;this.renderTimeAxis(t,i,n,a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.scale,i=e.utc,n=e.format,a=e.showGrid,s=e.gridHeight;De(this.props.scale)===De(t)&&this.props.utc===i&&this.props.showGrid===a&&this.props.gridHeight===s||this.renderTimeAxis(t,n,a,s)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"mergeStyles",value:function(e){return{valueStyle:q()(!0,Pe.values,this.props.style.values?this.props.style.values:{}),tickStyle:q()(!0,Pe.ticks,this.props.style.ticks?this.props.style.ticks:{})}}},{key:"renderTimeAxis",value:function(e,t,i,n){var s,r=i?-n:10,o=this.props.utc,l=this.props.tickCount,c=this.mergeStyles(this.props.style),h=c.tickStyle,p=c.valueStyle;s=l>0?"day"===t?Object(se.a)(e).tickArguments([o?Ce.a:we.a,1,l]).tickFormat(Object(de.a)("%d")).tickSizeOuter(0):"month"===t?Object(se.a)(e).tickArguments([o?_e.a:Ae.a,1,l]).tickFormat(Object(de.a)("%B")).tickSizeOuter(0):"year"===t?Object(se.a)(e).tickArguments([o?Ie.a:Re.a,1,l]).tickFormat(Object(de.a)("%Y")).tickSizeOuter(0):"relative"===t?Object(se.a)(e).ticks(l).tickFormat((function(e){return ue.a.duration(+e).format()})).tickSizeOuter(0):W.default.isString(t)?Object(se.a)(e).ticks(l).tickFormat(Object(de.a)(t)).tickSizeOuter(0):W.default.isFunction(t)?Object(se.a)(e).ticks(l).tickFormat(t).tickSizeOuter(0):Object(se.a)(e).ticks(l).tickSize(0):"day"===t?Object(se.a)(e).tickArguments([o?Ce.a:we.a,1]).tickFormat(Object(de.a)("%d")).tickSizeOuter(0):"month"===t?Object(se.a)(e).tickArguments([o?_e.a:Ae.a,1]).tickFormat(Object(de.a)("%B")).tickSizeOuter(0):"year"===t?Object(se.a)(e).tickArguments([o?Ie.a:Re.a,1]).tickFormat(Object(de.a)("%Y")).tickSizeOuter(0):"relative"===t?Object(se.a)(e).tickFormat((function(e){return ue.a.duration(+e).format()})).tickSizeOuter(0):W.default.isString(t)?Object(se.a)(e).tickFormat(Object(de.a)(t)).tickSizeOuter(0):W.default.isFunction(t)?Object(se.a)(e).tickFormat(t).tickSizeOuter(0):Object(se.a)(e).tickSize(0),Object(oe.a)(a.a.findDOMNode(this)).selectAll("*").remove(),Object(oe.a)(a.a.findDOMNode(this)).append("g").attr("class","x axis").style("stroke","none").styles(p).call(s.tickSize(r)),this.props.angled?Object(oe.a)(a.a.findDOMNode(this)).select("g").selectAll(".tick").select("text").styles(p).style("text-anchor","end").attr("dx","-1.2em").attr("dy","0em").attr("transform",(function(e){return"rotate(-65)"})):Object(oe.a)(a.a.findDOMNode(this)).select("g").selectAll(".tick").select("text").styles(p),Object(oe.a)(a.a.findDOMNode(this)).select("g").selectAll(".tick").select("line").styles(h),Object(oe.a)(a.a.findDOMNode(this)).select("g").select("path").remove()}},{key:"render",value:function(){return Object(u.jsx)("g",{})}}]),i}(r.a.Component);Ne.defaultProps={showGrid:!1,style:Pe,angled:!1};var Be={axis:{fill:"none",stroke:"#C0C0C0",pointerEvents:"none"}},Le={fontWeight:100,fontSize:14,font:'"Goudy Bookletter 1911", sans-serif"',fill:"#C0C0C0"},ze={fontWeight:100,fontSize:13,font:'"Goudy Bookletter 1911", sans-serif"',fill:"#000"},He={fill:"white",stroke:"none"},Ue={line:{stroke:"#999",cursor:"crosshair",pointerEvents:"none"},box:{fill:"white",opacity:.9,stroke:"#999",pointerEvents:"none"},dot:{fill:"#999"}},Fe=function(e){Object(G.a)(i,e);var t=Object(Y.a)(i);function i(e){var n;return Object(H.a)(this,i),(n=t.call(this,e)).handleTrackerChanged=n.handleTrackerChanged.bind(Object(F.a)(n)),n.handleTimeRangeChanged=n.handleTimeRangeChanged.bind(Object(F.a)(n)),n.handleMouseMove=n.handleMouseMove.bind(Object(F.a)(n)),n.handleMouseOut=n.handleMouseOut.bind(Object(F.a)(n)),n.handleContextMenu=n.handleContextMenu.bind(Object(F.a)(n)),n.handleBackgroundClick=n.handleBackgroundClick.bind(Object(F.a)(n)),n.handleZoom=n.handleZoom.bind(Object(F.a)(n)),n.saveSvgRef=n.saveSvgRef.bind(Object(F.a)(n)),n}return Object(U.a)(i,[{key:"handleTrackerChanged",value:function(e){var t=this;this.props.onTrackerChanged&&this.props.onTrackerChanged(e,(function(e){return t.timeScale(e)+t.leftWidth}))}},{key:"handleTimeRangeChanged",value:function(e){this.props.onTimeRangeChanged&&this.props.onTimeRangeChanged(e)}},{key:"handleMouseMove",value:function(e,t){this.handleTrackerChanged(this.timeScale.invert(e)),this.props.onMouseMove&&this.props.onMouseMove(e,t)}},{key:"handleMouseOut",value:function(e){this.handleTrackerChanged(null)}},{key:"handleContextMenu",value:function(e,t){if(this.props.onContextMenu){var i=this.props.scale?this.props.scale.invert(e):this.timeScale.invert(e);this.props.onContextMenu(e,t,i)}}},{key:"handleBackgroundClick",value:function(e,t){if(this.props.onBackgroundClick){var i=this.props.scale?this.props.scale.invert(e):this.timeScale.invert(e);this.props.onBackgroundClick(e,t,i)}}},{key:"handleZoom",value:function(e){this.props.onTimeRangeChanged&&this.props.onTimeRangeChanged(e)}},{key:"saveSvgRef",value:function(e){this.svg=e}},{key:"render",value:function(){var e=this,t=this.props.padding,i=void 0===t?0:t,n=this.props,a=n.paddingLeft,s=void 0===a?i:a,o=n.paddingRight,l=void 0===o?i:o,c=this.props,h=c.paddingTop,p=void 0===h?i:h,d=c.paddingBottom,f=void 0===d?i:d,m=this.props.titleHeight,g=void 0===m?28:m;W.default.isUndefined(this.props.title)&&(g=0);var b=[],j=[],v=[],O=[];r.a.Children.forEach(this.props.children,(function(e){if(Object(Q.areComponentsEqual)(e.type,Me)){var t=0,i=0,n="left";if(r.a.Children.forEach(e.props.children,(function(e){null!==e&&(Object(Q.areComponentsEqual)(e.type,he)?(i+=1,n="right"):Object(Q.areComponentsEqual)(e.type,te)||Object(Q.areComponentsEqual)(e.type,ie)||"left"===n&&(t+=1))})),1!==i){V()(!1,"ChartRow should have one and only one <Charts> tag within it",e.constructor.name)}n="left";var a=t-1;r.a.Children.forEach(e.props.children,(function(e){if(null!==e)if(Object(Q.areComponentsEqual)(e.type,he)||Object(Q.areComponentsEqual)(e.type,te)||Object(Q.areComponentsEqual)(e.type,ie))Object(Q.areComponentsEqual)(e.type,he)&&(n="right",a=0);else{var t=Number(e.props.width)||40;!W.default.has(e.props,"visible")||e.props.visible||(t=0),"left"===n?(v[a]=v[a]?Math.max(t,v[a]):t,a-=1):"right"===n&&(O[a]=O[a]?Math.max(t,O[a]):t,a+=1)}}))}}));var y=this.leftWidth=W.default.reduce(v,(function(e,t){return e+t}),0),x=this.rightWidth=W.default.reduce(O,(function(e,t){return e+t}),0),E=this.props.timeAxisHeight,S=void 0===E?35:E;this.props.hideTimeAxis&&(S=0);var T=this.props.width-y-x-s-l;if(!this.props.timeRange)throw Error("Invalid timerange passed to ChartContainer");var M,k,C=this.timeScale=this.props.utc?Object(K.e)().domain(this.props.timeRange.toJSON()).range([0,T]):Object(K.d)().domain(this.props.timeRange.toJSON()).range([0,T]),w=this.props.width-y-x-s-l,_=0,A=p,I="translate(".concat(y+s,",").concat(A,")"),R=q()(!0,Le,this.props.titleStyle?this.props.titleStyle:{}),D=this.props.title?Object(u.jsx)("g",{transform:I,children:Object(u.jsx)(Ee,{align:"center",label:this.props.title,style:{label:R,box:{fill:"none",stroke:"none"}},width:w,height:g})}):Object(u.jsx)("g",{}),P=q()(!0,Ue,this.props.trackerStyle?this.props.trackerStyle:{}),N=0;r.a.Children.forEach(this.props.children,(function(t){if(Object(Q.areComponentsEqual)(t.type,Me)){var i=t,n="chart-row-row-".concat(_),a=0===_,o=t.props.visible,c={timeScale:C,paddingLeft:s,paddingRight:l,leftAxisWidths:v,rightAxisWidths:O,width:e.props.width,minTime:e.props.minTime,maxTime:e.props.maxTime,transition:e.props.transition,enablePanZoom:e.props.enablePanZoom,minDuration:e.props.minDuration,showGrid:e.props.showGrid,timeFormat:e.props.format,trackerShowTime:a,trackerTime:e.props.trackerPosition,trackerTimeFormat:e.props.format,trackerStyle:P,onTimeRangeChanged:e.handleTimeRangeChanged,onTrackerChanged:e.handleTrackerChanged},h=t.props.titleHeight,p=void 0===h?28:h;W.default.isUndefined(t.props.title)&&(p=0);var d="translate(".concat(-y-s,",").concat(A+p,")");if(o){if(b.push(Object(u.jsx)("g",{transform:d,children:r.a.cloneElement(i,c)},n)),!W.default.isUndefined(t.props.title)){var f="chart-row-row-title-".concat(_),m=q()(!0,ze,t.props.titleStyle?t.props.titleStyle:{}),g=q()(!0,He,t.props.titleBoxStyle?t.props.titleBoxStyle:{}),x="translate(".concat(-y-s,",").concat(A,")"),E=Object(u.jsx)("g",{transform:x,children:Object(u.jsx)(Ee,{align:"left",label:t.props.title,style:{label:m,box:g},width:c.width,height:p})},f);j.push(E)}var S=parseInt(t.props.height,10)+p;A+=S,N+=S}}_+=1})),this.props.trackerPosition&&this.props.timeRange.contains(this.props.trackerPosition)&&(M=Object(u.jsx)("g",{style:{pointerEvents:"none"},transform:"translate(".concat(y+s,",").concat(p+g,")"),children:Object(u.jsx)(Se,{width:w,height:N,showInfoBox:!!this.props.trackerValues,time:this.props.trackerPosition,timeScale:C,timeFormat:this.props.format,infoWidth:this.props.trackerHintWidth,infoHeight:this.props.trackerHintHeight,infoValues:this.props.trackerValues,infoStyle:P})},"tracker-group")),k=this.props.hideTimeAxis?{axis:{display:"none"}}:q()(!0,Be.axis,this.props.timeAxisStyle.axis?this.props.timeAxisStyle.axis:{});var B=Object(u.jsxs)("g",{transform:"translate(".concat(y+s,",").concat(p+g+N,")"),children:[Object(u.jsx)("line",{x1:-y,y1:.5,x2:w+x,y2:.5,style:k}),Object(u.jsx)(Ne,{scale:C,utc:this.props.utc,angled:this.props.timeAxisAngledLabels,style:this.props.timeAxisStyle,format:this.props.format,showGrid:this.props.showGrid,gridHeight:N,tickCount:this.props.timeAxisTickCount})]}),L=Object(u.jsx)("g",{transform:"translate(".concat(y+s,",").concat(p+g,")"),children:Object(u.jsx)(ke,{width:w,height:N+S,scale:C,enablePanZoom:this.props.enablePanZoom,enableDragZoom:this.props.enableDragZoom,minDuration:this.props.minDuration,minTime:this.props.minTime,maxTime:this.props.maxTime,onMouseOut:this.handleMouseOut,onMouseMove:this.handleMouseMove,onMouseClick:this.handleBackgroundClick,onContextMenu:this.handleContextMenu,onZoom:this.handleZoom,children:b},"event-handler")}),z=Object(u.jsx)("g",{transform:"translate(".concat(y+s,",").concat(p+g,")"),children:j}),H=this.props.width,U=N+S+p+f+g,F=q()(!0,{display:"block"},this.props.style?this.props.style:{});return"over"===this.props.showGridPosition?Object(u.jsxs)("svg",{width:H,height:U,style:F,ref:this.saveSvgRef,children:[D,L,M,B,z]}):Object(u.jsxs)("svg",{width:H,height:U,style:{display:"block"},ref:this.saveSvgRef,children:[D,B,L,z,M]})}}]),i}(r.a.Component);Fe.defaultProps={width:800,padding:0,enablePanZoom:!1,enableDragZoom:!1,utc:!1,showGrid:!1,showGridPosition:"over",timeAxisStyle:Be,titleStyle:Le,trackerStyle:Ue,hideTimeAxis:!1};var Ge=i(205),Ye=function(e){Object(G.a)(i,e);var t=Object(Y.a)(i);function i(e){var n;return Object(H.a)(this,i),(n=t.call(this,e)).state={hover:null},n}return Object(U.a)(i,[{key:"onMouseOver",value:function(e,t){this.props.onMouseOver&&this.props.onMouseOver(t),this.setState({hover:t})}},{key:"onMouseLeave",value:function(){this.props.onMouseLeave&&this.props.onMouseLeave(this.state.hover),this.setState({hover:null})}},{key:"handleClick",value:function(e,t){e.stopPropagation(),this.props.onSelectionChange&&this.props.onSelectionChange(t)}},{key:"render",value:function(){var e,t=this,i=this.props,n=i.series,a=i.textOffsetX,s=i.textOffsetY,r=(i.hoverMarkerWidth,this.props.timeScale),o=[],l=0,c=Object(Ge.a)(n.events());try{var h=function(){var i=e.value,n=i.begin(),c=i.end(),h=r(n)>=0?r(n):0,p=r(c)<=t.props.width?r(c):t.props.width,d="translate(".concat(h,",0)"),f=!!t.state.hover&&J.Event.is(i,t.state.hover),m=void 0;m=f?"hover":"normal";var g={},b={};t.props.style&&(g=t.props.style(i,"normal"),b=t.props.style(i,m));var j="";t.props.label&&(W.default.isString(t.props.label)?j=t.props.label:W.default.isFunction(t.props.label)&&(j=t.props.label(i)));var v=t.props.spacing,O=p-h-2*t.props.spacing;O=O<0?0:O;var y=t.props.size,E=null;f&&(E=Object(u.jsxs)("g",{children:[Object(u.jsx)("rect",{className:"eventchart-marker",x:v,y:10,width:O,height:y+4,style:q()(!0,g,{pointerEvents:"none"})}),Object(u.jsx)("text",{style:Object(x.a)({pointerEvents:"none",fill:"#444"},{fontWeight:100,fontSize:11}),x:8+a,y:15+s,children:j})]})),o.push(Object(u.jsxs)("g",{transform:d,onClick:function(e){return t.handleClick(e,i)},onMouseLeave:function(){return t.onMouseLeave()},onMouseOver:function(e){return t.onMouseOver(e,i)},children:[Object(u.jsx)("circle",{cx:v,cy:5,r:5,style:b}),Object(u.jsx)("rect",{className:"eventchart-marker",x:v,y:4,width:O,height:2,style:b}),Object(u.jsx)("circle",{cx:v+O,cy:5,r:5,style:b}),E]},l)),l+=1};for(c.s();!(e=c.n()).done;)h()}catch(p){c.e(p)}finally{c.f()}return Object(u.jsx)("g",{children:o})}}]),i}(r.a.Component);Ye.defaultProps={visible:!0,size:30,spacing:0,textOffsetX:0,textOffsetY:0,hoverMarkerWidth:5};var We=i(455),Ze=function(){O((function(e){var t;return null===(t=e.map_data)||void 0===t?void 0:t.filter}));var e=O((function(e){return e.map_data.timeline_series})),t=O((function(e){return e.map_data.event_spreadsheet})),i=Object(s.useState)(void 0),n=Object(f.a)(i,2),a=n[0],r=n[1],l=Object(s.useState)(void 0),h=Object(f.a)(l,2),d=(h[0],h[1]),m=Object(s.useState)(0),g=Object(f.a)(m,2),b=(g[0],g[1]),j=Object(s.useState)(0),v=Object(f.a)(j,2),y=v[0],x=v[1],E=Object(s.useState)([{pos:0,name:I.national.toUpperCase(),count:e.national.length},{pos:1,name:I.state.toUpperCase(),count:e.state.length},{pos:2,name:I.city.toUpperCase(),count:e.city.length}]),S=Object(f.a)(E,2),T=S[0],M=S[1],k=Object(p.a)(),C=new Date(1792,0,1),w=new Date(2020,0,1),_=Object(We.a)(k.breakpoints.up("sm")),A=O((function(e){return e.map_data.loaded})),R=Object(s.useState)(window.innerWidth),D=Object(f.a)(R,2),P=D[0];D[1];Object(s.useEffect)((function(){var i=e.state.length+e.city.length+e.national.length;console.log(t),console.log(e),console.log(i),b(40*i),x(i);var n=[e.state.length,e.city.length,e.national.length],a=n.map((function(e){return e/y}));console.log(a[2]);var s=[a[0],a[1]];s.push(s[0]+s[1]),s.forEach((function(e,t){T[t].pos=e})),M(T),console.log(T),console.log(T.length),console.log(s),console.log(n,a,s)}),[A,t,e]),Object(s.useEffect)((function(){}),[T]);var N={height:200,width:"100%",borderTop:"1px solid ".concat(k.palette.primary.main),display:_?"inline-flex":"none"},B={fontSize:"9px",position:"absolute",color:"lightgrey"},L={fontSize:"9px",position:"absolute",color:k.palette.primary.main},H={axis:{stroke:k.palette.primary.main}},U=new J.TimeRange(C,w),F=function(e,i,n,a){return e.map((function(e,n){var s={fill:i.palette.primary.main,opacity:1};function o(e){console.log(e.data().first().get("title"));var i=e.data().first().get("title"),n=t.filter((function(e){return e.title===i}))[0];r(n),d(e),console.log(n),console.log(function(e){var t=[],i=e;do{t=t.concat(Object.getOwnPropertyNames(i))}while(i=Object.getPrototypeOf(i));return t.sort().filter((function(t,i,n){if(t!=n[i+1]&&"function"==typeof e[t])return!0}))}(e))}return Object(u.jsx)(Me,{height:"".concat(a),style:{fill:"#f1a340"},axisMargin:1,children:Object(u.jsx)(he,{children:Object(u.jsx)(Ye,{series:e,size:a,label:function(e){return function(e){return e.data().first().get("title")}(e)},onSelectionChange:function(e){return o(e)},textOffsetY:-5,style:function(e,t){return"hover"==t?(console.log("got hover"),{fill:i.palette.primary.light,opacity:1}):"selected"==t?{fill:i.palette.primary.dark,opacity:1}:s}})})},n)}))};return Object(u.jsxs)(o.a,{container:!0,spacing:0,style:N,children:[Object(u.jsxs)(o.a,{item:!0,xs:2,children:[Object(u.jsx)(c.a,{style:L,children:Object(u.jsx)("span",{children:" HISTORICAL EVENTS"})}),Object(u.jsx)(z,{info:a})]}),Object(u.jsx)(o.a,{item:!0,xs:10,style:{height:A?"100%":"101%"},children:Object(u.jsxs)("div",{style:{position:"relative",height:"200px"},children:[Object(u.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,zIndex:-1,opacity:.5},children:T.map((function(e,t){var i=parseFloat("".concat(e.pos)).toFixed(2);if(console.log(i),Math.floor(e.pos)===e.pos){console.log(t),console.log(e),console.log(100*e.pos);var n={paddingTop:"".concat(100*parseFloat(i),"%"),position:"relative",height:"0px",borderTop:"1px solid lightgrey"};return Object(u.jsx)("div",{style:n,children:Object(u.jsx)(c.a,{style:B,children:e.name},e.pos)},e.pos)}}))}),Object(u.jsxs)(Fe,{timeRange:U,enablePanZoom:!1,width:.75*P,showGrid:!0,timeAxisStyle:H,timeAxisTickCount:5,children:[F(e.national,k,0,40),F(e.state,k,0,40),F(e.city,k,0,40)]})]})})]})};var Ve=function(e){var t=e.title,i=e.children,n=Object(p.a)(),a={borderBottom:"1px solid ".concat(n.palette.primary.main),paddingBottom:".1em",height:"20%",display:"flex",flexDirection:"column",alignContent:"center"},s={color:n.palette.primary.main,marginTop:0,marginBottom:"auto",fontFamily:n.typography.fontFamily};return Object(u.jsxs)("div",{style:{height:"100%",paddingLeft:".25em",paddingRight:".25em",minHeight:"6rem"},children:[Object(u.jsx)("div",{style:a,children:Object(u.jsx)(T.a,{size:300,style:s,children:t})}),i]})},Xe=function(e){var t=e.title,i=e.children,n=e.filters,a=v((function(e){return e.map_data.thunk_set_multi_filter})),r=(D.EE_COMMERCE,A.ARCHITECTURE,B.DIVERSITY,Object(s.useState)(!1)),o=Object(f.a)(r,2),l=o[0],h=o[1],d=Object(p.a)(),m={fontFamily:d.typography.fontFamily,textDecoration:"underline",color:l?d.palette.primary.light:d.palette.primary.main},g={marginTop:null!==t?".25em":0},b={height:"fit-content",marginTop:"auto",marginBottom:"auto",fontFamily:d.typography.fontFamily};return Object(u.jsxs)("div",{style:b,children:[Object(u.jsx)("div",{onMouseUp:function(){return a(null!==n&&void 0!==n?n:[])},onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)},children:Object(u.jsx)(c.a,{children:Object(u.jsx)(T.a,{size:100,style:m,children:t})})}),Object(u.jsx)("div",{style:g,children:i})]})},qe=function(e){var t=e.children,i=e.columns,n=Object(p.a)(),a={height:"76%",padding:0,columns:null!==i&&void 0!==i?i:12},s={display:"flex",paddingLeft:".25em",paddingRight:".25em",paddingTop:".5em",height:"100%",borderLeft:"1px dashed ".concat(n.palette.primary.main),borderRight:"1px dashed ".concat(n.palette.primary.main)},l={display:"flex",paddingTop:".5em",paddingRight:".25em",paddingLeft:".25em",height:"100%"},c={paddingTop:".5em",display:"flex",paddingLeft:0,height:"100%",borderRight:"1px dashed ".concat(n.palette.primary.main)},h={paddingTop:".5em",display:"flex",paddingLeft:".25em",height:"100%",borderLeft:"1px dashed ".concat(n.palette.primary.main)};return Object(u.jsx)(o.a,{container:!0,spacing:0,direction:"row",style:a,children:t?r.a.Children.map(t,(function(e,i){if(r.a.isValidElement(e))return Object(u.jsx)(o.a,{style:(n=i,a=t,Array.isArray(a)?0==n?c:n==a.length-1?h:s:l),item:!0,xs:e.props.size,children:e});var n,a})):null})},Ke=i(49),Je=i.n(Ke);var Qe=function(e){var t,i,n=e.color,a=e.is_active_filter,r=Object(p.a)(),o=12,l=Object(s.useState)(!1),c=Object(f.a)(l,2),h=(c[0],c[1]),d=O((function(e){return e.map_data.loaded})),m=(t=.5,i=4,t=Math.ceil(t),i=Math.floor(i),Math.random()*(i-t)+t),g={display:d?"block":"none",animation:d?"fadein ".concat(m,"s normal"):"",animationIterationCound:1,marginTop:"auto"};Object(s.useEffect)((function(){}),[!0]);var b=function(e){return-2===e?Je.a[500]:-1===e?Je.a[100]:0===e?r.palette.primary.main:1===e?Je.a[300]:2===e?Je.a[400]:3===e?Je.a[500]:4===e?r.palette.primary.dark:"red"};return Object(u.jsx)("div",{style:g,children:Object(u.jsx)("div",{style:function(e){return e?{width:"".concat(o,"px"),height:"".concat(o,"px"),backgroundColor:b(n),marginTop:"auto",marginBottom:"3px",marginRight:"3px",outline:"1px solid #ffcb06",opacity:1}:-2==n?{width:"".concat(o,"px"),height:"".concat(o,"px"),backgroundColor:b(n),marginTop:"auto",marginBottom:"3px",marginRight:"3px",opacity:.5}:{width:"".concat(o,"px"),height:"".concat(o,"px"),backgroundColor:b(n),marginTop:"auto",marginBottom:"3px",marginRight:"3px",opacity:1}}(a),onMouseEnter:function(){return h(!0)},onMouseLeave:function(){return h(!1)}})})};var $e=function(e){var t=e.count,i=e.filter,n=e.base_color,a={},r={height:"100%",display:"flex",position:"relative"},o=O((function(e){return e.map_data.filter})),l=v((function(e){return e.map_data.thunk_set_filter})),c=function(e,t,n){return e===i?4:null===e?n:null!==e&&e!=i?-2:t?-1:n},h=Object(s.useState)(!1),p=Object(f.a)(h,2),d=p[0],m=p[1];Object(s.useEffect)((function(){}),[o]),Object(s.useEffect)((function(){}),[d]);var g=function(e,t){var i=Math.round(e/t)*t,n=i/t,a=t;if(void 0!==e&&null!==e)return Array.from(Array(n).keys()).map((function(s,r){return{count:r==n-1?a-Math.abs(e-i):t}}))}(t,3);return Object(u.jsx)(u.Fragment,{children:function(e){if(e)return Object(u.jsx)("div",{style:r,onMouseUp:function(){return l(i)},onMouseEnter:function(){return m(!d)},onMouseLeave:function(){return m(!d)},children:Array.from(Array(e.length).keys()).map((function(t){console.log(e);var s=e[t];return Object(u.jsx)("div",{style:a,children:Array.from(Array(s.count).keys()).map((function(e,t){return Object(u.jsx)(Qe,{color:c(o,d,n),is_active_filter:i===o},e)}))},t)}))})}(g)})};function et(e,t){return A[e+"_"+t]}var tt=function(){var e=Object(p.a)(),t=O((function(e){var t,i;return null===(t=e.map_data)||void 0===t||null===(i=t.map_stats)||void 0===i?void 0:i.year}));console.log(t);var i={display:"flex",height:"51px"},n={color:e.palette.primary.main,fontSize:"8pt",justifyContent:"space-between",fontFamily:e.typography.fontFamily},a={display:"flex",fontSize:"8pt",height:20,marginTop:-4},s=function(e,t){if(t)return Object(u.jsxs)("div",{style:i,children:[Object(u.jsx)($e,{base_color:0,count:t.ARCHITECTURE,filter:et("ARCHITECTURE",e)}),Object(u.jsx)($e,{base_color:1,count:t.ARCHITECTURE,filter:et("ARTDESIGN",e)}),Object(u.jsx)($e,{base_color:2,count:t.ARCHITECTURE,filter:et("LANDSCAPE",e)}),Object(u.jsx)($e,{base_color:3,count:t.ARCHITECTURE,filter:et("OTHER",e)})]})};return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(qe,{children:[Object(u.jsxs)(Xe,{title:null,size:3,children:[Object(u.jsxs)("div",{style:a,children:[Object(u.jsx)(Qe,{color:0}),Object(u.jsx)(h.a,{style:n,children:"ARCHITECTURE"})]}),Object(u.jsxs)("div",{style:a,children:[Object(u.jsx)(Qe,{color:1}),Object(u.jsx)(c.a,{style:n,children:Object(u.jsx)(h.a,{style:n,children:"LANDSCAPE ARCH"})})]}),Object(u.jsxs)("div",{style:a,children:[Object(u.jsx)(Qe,{color:2}),Object(u.jsx)(h.a,{style:n,children:"ART + DESIGN"})]}),Object(u.jsxs)("div",{style:a,children:[Object(u.jsx)(Qe,{color:3}),Object(u.jsx)(h.a,{style:n,children:"OTHER"})]})]}),Object(u.jsx)(Xe,{title:"2016",size:3,filters:[A.ARTDESIGN_2016,A.ARCHITECTURE_2016,A.OTHER_2016,A.LANDSCAPE_2016],children:s("2016",t[2016])}),Object(u.jsx)(Xe,{title:"2018",size:3,filters:[A.ARTDESIGN_2018,A.ARCHITECTURE_2018,A.OTHER_2018,A.LANDSCAPE_2018],children:s("2018",t[2018])}),Object(u.jsx)(Xe,{title:"2020",size:3,filters:[A.ARTDESIGN_2020,A.ARCHITECTURE_2020,A.OTHER_2020,A.LANDSCAPE_2020],children:s("2020",t[2020])})]})})},it=function(){Object(p.a)();var e=O((function(e){var t,i;return null===(t=e.map_data)||void 0===t||null===(i=t.map_stats)||void 0===i?void 0:i.theme}));return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(qe,{children:[Object(u.jsx)(Xe,{title:"Equity",size:4,children:Object(u.jsx)($e,{count:e.EQUITY,filter:B.EQUITY,base_color:0})}),Object(u.jsx)(Xe,{title:"Access",size:4,children:Object(u.jsx)($e,{count:e.ACCESS,filter:B.ACCESS,base_color:0})}),Object(u.jsx)(Xe,{title:"Diversity",size:4,children:Object(u.jsx)($e,{count:e.DIVERSITY,filter:B.DIVERSITY,base_color:0})})]})})},nt=i(472),at=function(e){var t=e.count,i=e.icon,n=e.filter,a=(e.active_filter,e.tooltip),r=(Object(p.a)(),Object(s.useState)(!1)),o=Object(f.a)(r,2),l=o[0],c=o[1],h=O((function(e){return e.map_data.filter})),d=v((function(e){return e.map_data.thunk_set_filter}));Object(s.useEffect)((function(){console.log(n===h)}),[h]),Object(s.useEffect)((function(){}),[l]);return Object(u.jsxs)("div",{style:{width:"100%",display:"flex"},onMouseEnter:function(){return c(!l)},onMouseLeave:function(){return c(!l)},onMouseUp:function(){d(n)},children:[Array.from(Array(t)).map((function(e,t){return Object(u.jsx)(Qe,{color:(i=h,a=l,i==n?4:i!==n&&null!==i?(console.log("not"),-2):a?4:0),is_active_filter:h===n},t);var i,a})),Object(u.jsx)(nt.a,{title:a,children:i})]})},st=i(456),rt=i(459),ot=i(460),lt=i(461),ct=i(462),ht=i(468),pt=i(469),ut=i(457),dt=i(458),ft=i(463),mt=i(464),gt=i(465),bt=i(466),jt=i(467),vt=[D.BE_ENERGY,D.BE_HOUSING,D.BE_TRANSPORTATION],Ot=[D.EE_COSTOFLIVING,D.EE_HOUSINGMARKET,D.EE_COMMERCE],yt=[D.NE_GREENSPACE,D.NE_POLLUTION,D.NE_WATER],xt=[D.PE_GOVERMENT,D.PE_LEGISLATION,D.PE_ACTIVISM],Et=[D.SE_EDUCATION,D.SE_HEALTH,D.SE_POPULATION],St=function(){var e,t,i,n,a,s,r,o,l,c,h,d,f,m,g,b=Object(p.a)(),j=O((function(e){var t,i;return null===(t=e.map_data)||void 0===t||null===(i=t.map_stats)||void 0===i?void 0:i.tag})),v=O((function(e){return e.map_data.filter}));return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(qe,{columns:5,children:[Object(u.jsxs)(Xe,{title:"Built",size:2,filters:vt,children:[Object(u.jsx)(at,{tooltip:"Energy",active_filter:v,filter:D.BE_ENERGY,count:null===(e=j.BE)||void 0===e?void 0:e.ENERGY,icon:Object(u.jsx)(st.a,{color:b.palette.primary.main,size:12})}),Object(u.jsx)(at,{tooltip:"Housing",active_filter:v,filter:D.BE_HOUSING,count:null===(t=j.BE)||void 0===t?void 0:t.HOUSING,icon:Object(u.jsx)(ut.a,{color:"primary",style:{fontSize:"12pt"}})}),Object(u.jsx)(at,{tooltip:"Transportation",active_filter:v,filter:D.BE_TRANSPORTATION,count:null===(i=j.BE)||void 0===i?void 0:i.TRANSPORTATION,icon:Object(u.jsx)(dt.a,{fontSize:"small",color:"primary",style:{fontSize:"12pt"}})})]}),Object(u.jsxs)(Xe,{title:"Economic",size:3,filters:Ot,children:[Object(u.jsx)(at,{tooltip:"Cost of Living",active_filter:v,filter:D.EE_COSTOFLIVING,count:null===(n=j.EE)||void 0===n?void 0:n.COSTOFLIVING,icon:Object(u.jsx)(rt.a,{color:b.palette.primary.main,size:12})}),Object(u.jsx)(at,{tooltip:"Housing Market",active_filter:v,filter:D.EE_HOUSINGMARKET,count:null===(a=j.EE)||void 0===a?void 0:a.HOUSINGMARKET,icon:Object(u.jsx)(ot.a,{color:b.palette.primary.main,size:12})}),Object(u.jsx)(at,{tooltip:"Commerce",active_filter:v,filter:D.EE_COMMERCE,count:null===(s=j.EE)||void 0===s?void 0:s.COMMERCE,icon:Object(u.jsx)(lt.a,{color:b.palette.primary.main,size:12})})]}),Object(u.jsxs)(Xe,{title:"Natural",size:2,filters:yt,children:[Object(u.jsx)(at,{tooltip:"Greenspace",active_filter:v,filter:D.NE_GREENSPACE,count:null===(r=j.NE)||void 0===r?void 0:r.GREENSPACE,icon:Object(u.jsx)(ct.a,{color:b.palette.primary.main,size:12})}),Object(u.jsx)(at,{tooltip:"Pollution",active_filter:v,filter:D.NE_POLLUTION,count:null===(o=j.NE)||void 0===o?void 0:o.POLLUTION,icon:Object(u.jsx)(ot.a,{color:b.palette.primary.main,size:12})}),Object(u.jsx)(at,{tooltip:"Hydrology",active_filter:v,filter:D.NE_WATER,count:null===(l=j.NE)||void 0===l?void 0:l.WATER,icon:Object(u.jsx)(ft.a,{color:"primary",style:{fontSize:"12pt"}})})]}),Object(u.jsxs)(Xe,{title:"Political",size:3,filters:xt,children:[Object(u.jsx)(at,{tooltip:"Goverment",active_filter:v,filter:D.PE_GOVERMENT,count:null===(c=j.PE)||void 0===c?void 0:c.GOVERMENT,icon:Object(u.jsx)(mt.a,{color:"primary",style:{fontSize:"12pt"}})}),Object(u.jsx)(at,{tooltip:"Legislation",active_filter:v,filter:D.PE_LEGISLATION,count:null===(h=j.PE)||void 0===h?void 0:h.LEGISLATION,icon:Object(u.jsx)(gt.a,{color:"primary",style:{fontSize:"12pt"}})}),Object(u.jsx)(at,{tooltip:"Activism",active_filter:v,filter:D.PE_ACTIVISM,count:null===(d=j.PE)||void 0===d?void 0:d.ACTIVISM,icon:Object(u.jsx)(bt.a,{color:"primary",style:{fontSize:"12pt"}})})]}),Object(u.jsxs)(Xe,{title:"Social",size:2,filters:Et,children:[Object(u.jsx)(at,{tooltip:"Education",active_filter:v,filter:D.SE_EDUCATION,count:null===(f=j.SE)||void 0===f?void 0:f.EDUCATION,icon:Object(u.jsx)(jt.a,{color:"primary",style:{fontSize:"12pt"}})}),Object(u.jsx)(at,{tooltip:"Health",active_filter:v,filter:D.SE_HEALTH,count:null===(m=j.SE)||void 0===m?void 0:m.HEALTH,icon:Object(u.jsx)(ht.a,{color:b.palette.primary.main,size:12})}),Object(u.jsx)(at,{tooltip:"Population",active_filter:v,filter:D.SE_POPULATION,count:null===(g=j.SE)||void 0===g?void 0:g.POPULATION,icon:Object(u.jsx)(pt.a,{color:b.palette.primary.main,size:12})})]})]})})},Tt=(i(413),function(){var e=Object(p.a)(),t={height:"fit-content",justifyContent:"space-between",minHeight:"6rem",maxHeight:"17rem",display:Object(We.a)(e.breakpoints.up("md"))?"inline-flex":"none"},i={fontFamily:e.typography.fontFamily,color:e.palette.primary.main,fontSize:"9pt",lineHeight:"12pt"},n=Object(E.a)({root:{height:"100%",border:"1px solid ".concat(e.palette.primary.main),paddingLeft:".5em",paddingRight:".1em"}})(o.a);return Object(u.jsxs)(o.a,{container:!0,spacing:1,style:t,children:[Object(u.jsx)(n,{item:!0,xs:12,sm:12,md:6,lg:2,children:Object(u.jsx)(Ve,{title:"SELECT & FILTER",children:Object(u.jsx)(c.a,{style:i,children:Object(u.jsx)(h.a,{size:300,style:i,children:"Click on titles to view main categories. Click on rectangle blocks to filter by subcategories."})})})}),Object(u.jsx)(n,{item:!0,xs:12,sm:12,md:6,lg:4,children:Object(u.jsx)(Ve,{title:"YEAR & DISCIPLINE",children:Object(u.jsx)(tt,{})})}),Object(u.jsx)(n,{item:!0,xs:12,sm:12,md:6,lg:3,children:Object(u.jsx)(Ve,{title:"TOPICS",children:Object(u.jsx)(St,{})})}),Object(u.jsx)(n,{item:!0,xs:12,sm:12,md:6,lg:2,children:Object(u.jsx)(Ve,{title:"THEMES",children:Object(u.jsx)(it,{})})})]})});var Mt=function(){var e=Object(p.a)(),t=Object(We.a)(e.breakpoints.up("lg")),i={fontSize:"36px",fontFamily:e.typography.fontFamily},n={fontSize:"14px",fontFamily:e.typography.fontFamily};return Object(u.jsxs)(o.a,{container:!0,spacing:0,children:[Object(u.jsx)(o.a,{item:!0,xs:2,style:{display:t?"flex":"none"},children:Object(u.jsx)("div",{})}),Object(u.jsxs)(o.a,{item:!0,xs:10,children:[Object(u.jsx)("div",{children:Object(u.jsx)(c.a,{style:i,children:"DIY CARTOGRAPHY: "})}),Object(u.jsx)("div",{children:Object(u.jsx)(c.a,{style:n,children:"MAPPING THE IMPACT OF URBAN DEVELOPMENT"})})]})]})},kt=i(210),Ct=i(192),wt=i(207);var _t=function(){var e=v((function(e){return e.map_data.fetch_map_data})),t=Object(wt.merge)({},kt.a,{typography:{fontFamilies:{display:"Audimat",ui:"Audimat",mono:"Audimat"}}});return Object(s.useEffect)((function(){e(),console.log(kt.a)}),[]),Object(u.jsx)(Ct.a,{value:t,children:Object(u.jsxs)(o.a,{container:!0,spacing:0,style:{minHeight:"40rem",height:"100%"},children:[Object(u.jsx)(o.a,{item:!0,md:12,lg:12,children:Object(u.jsx)(Tt,{})}),Object(u.jsxs)(o.a,{container:!0,spacing:0,style:{paddingTop:"1em",paddingBottom:"1em"},children:[Object(u.jsx)(o.a,{item:!0,md:12,lg:12,children:Object(u.jsx)(Mt,{})}),Object(u.jsx)(o.a,{item:!0,md:12,lg:2,children:Object(u.jsx)(d,{})}),Object(u.jsx)(o.a,{item:!0,md:12,lg:10,children:Object(u.jsx)(L,{})})]}),Object(u.jsx)(o.a,{item:!0,xs:12,style:{height:"25%",padding:0},children:Object(u.jsx)(Ze,{})})]})})},At=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,477)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;i(e),n(e),a(e),s(e),r(e)}))},It=i(470),Rt=i(211),Dt=Object(Rt.a)({palette:{primary:{light:Je.a[100],main:"#739eae",dark:Je.a[700]}},spacing:function(e){return"".concat(.25*e,"rem")},overrides:{MuiGrid:{root:{margin:"0px"}}},typography:{fontFamily:"Audimat"}}),Pt=i(74),Nt=i.n(Pt),Bt=i(103),Lt=i(208),zt=i(209),Ht=i.n(zt);function Ut(e){return{year:function(e){var t=Yt(e,"year"),i=Object.keys(t),n=10,a=i.map((function(e,a){var s=Yt(t[e],"discipline"),r=Object.keys(s),o={};return r.forEach((function(e){o[e]=Math.round(s[e].length/t[i[a]].length*n)})),o})),s={};return console.log(a),a.forEach((function(e,t){s[i[t]]=e})),s}(e),tag:function(e){var t=75,i=Yt(e,"tags"),n={};return Object.keys(i).forEach((function(a){var s=i[a].length,r=Yt(i[a],"subtopic"),o=i[a].length/e.length*t,l={cat_percent:i[a].length/e.length,cat_blocks:o};Object.keys(r).forEach((function(e){l[e]=Math.round(20*Math.ceil(r[e].length/s*100/20)/100*5)})),n[a]=l})),n}(e),theme:function(e){var t=25,i=Yt(e,"theme"),n=Object.keys(i),a={};return n.forEach((function(n){a[n]=Math.round(i[n].length/e.length*t)})),a}(e)}}function Ft(e){var t=Yt(e,"category");return Object.keys(t).forEach((function(e){var i=function(e){var t=[];return e.forEach((function(e){if(e.type===R.DATE){console.log("GOT DATE TYPE");var i=new J.TimeRange(e.start,e.end),n={title:e.title,event_type:e.type,tags:e.tags.split(",").map((function(e){return e.trim()}))},a=new J.TimeRangeEvent(i,[n]);t.push(a)}if(e.type===R.RANGE){console.log("GOT RANGE TYPE");var s=new J.TimeRange(e.start,e.end),r={title:e.title,event_type:e.type,tags:e.tags.split(",").map((function(e){return e.trim()}))},o=new J.TimeRangeEvent(s,[r]);t.push(o)}})),function(e){var t={0:[]};e.forEach((function(e,i,n){var a=0;n.every((function(t){return e===t||(i=t.begin(),n=t.end(),a=e.begin(),s=e.end(),!(i<a&&a<n||i<s&&s<n||a<i&&n<s));var i,n,a,s}))?t[a].push(e):(a+=1,t[i]=[e])}));var i=Object.keys(t).map((function(e){t[e]=t[e].sort((function(e,t){return e.begin()-t.begin()}))}));return Object.keys(i).map((function(e){return new J.TimeSeries({name:"test",events:t[e]})}))}(t)}(t[e]);t[e]=i})),console.log(t),t}function Gt(e){return e.map((function(e){return{src:e.photo1,thumbnail:e.thumbnail,isSelected:!1,caption:"Im in this other file",thumbnailWidth:95,thumbnailHeight:174,tags:[{discipline:A[e.discipline],subtopic:D[e.tags+"_"+e.subtopic],theme:B[e.theme],year:e.year}]}}))}function Yt(e,t){return e.reduce((function(e,i){return e[i[t]]=[].concat(Object(Bt.a)(e[i[t]]||[]),[i]),e}),{})}function Wt(e){return e.forEach((function(t,i){var n=e[i].category,a=e[i].type,s=I[n],r=R[a];e[i].category=s,e[i].type=r;var o=new Date(e[i].start),l=new Date(e[i].end);e[i].start=o,e[i].end=l})),e}function Zt(e){return new Promise((function(t,i){var n=new Image;n.src=e.thumbnail,n.onload=function(){e.thumbnailHeight=n.height,e.thumbnailWidth=n.width,t(n)}}))}function Vt(e,t){return new Promise((function(i,n){Ht.a.labeledCols(e,t).then((function(e){i(e)})).catch((function(i){console.error("Error fetching DOC_KEY ".concat(e,", sheet number ").concat(t))}))}))}function Xt(e,t){return Vt(e,t).then((function(e){var t;return(t=e.data).forEach((function(e,i){var n=t[i].discipline,a=A[n];t[i].discipline=a})),t})).catch((function(t){console.error("Error fetching DOC_KEY ".concat(e))}))}var qt={map_data:{active_images:[],filter:null,multi_tag:[],gallery_images:[],timeline_series:{national:[],state:[],city:[]},loaded:!1,active_lightbox:{images:[],description:"default",title:"string",author:"some author"},map_spreadsheet:[],map_stats:{year:{},tag:{},theme:{}},event_spreadsheet:[],fetch_map_data:Object(b.f)(function(){var e=Object(Lt.a)(Nt.a.mark((function e(t){var i,n,a,s,r,o;return Nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={events:[],maps:[]},a=Xt(i="1-S8EkLYsknYoFWSynVeMQCi6Gf9PoV9A5ezzICXamJA",3),s=Xt(i,4),r=Xt(i,5),o=[a,s,r],Promise.all(o).then((function(e){var i=[],a=[];e.forEach((function(e){if(Array.isArray(e)){var t,s=Gt(e),r=s.map((function(e){return Zt(e)}));i.push.apply(i,Object(Bt.a)(r)),a.push.apply(a,Object(Bt.a)(s)),(t=n.maps).push.apply(t,Object(Bt.a)(e))}else console.error("did not get map row array")})),Promise.all(i).then((function(e){var i=a.map((function(t,i){return t.thumbnailWidth=.05*e[i].width,t.thumbnailHeight=.05*e[i].height,t}));t.set_gallery_images(i),t.set_active_images(i)}));var s=Ut(n.maps);t.set_map_stats(s),t.set_map_spreadsheet(n.maps),t.set_loaded(!0)})),Vt(i,2).then((function(e){var i=Wt(e.data);t.set_event_spreadsheet(i);var n=Ft(i);t.set_timeline_series(n),t.set_loaded(!0)})).catch((function(e){console.error("Error fetching DOC_KEY ".concat(i))}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),set_map_spreadsheet:Object(b.b)((function(e,t){e.map_spreadsheet=t})),set_map_stats:Object(b.b)((function(e,t){e.map_stats=t})),set_event_spreadsheet:Object(b.b)((function(e,t){e.event_spreadsheet=t})),set_gallery_images:Object(b.b)((function(e,t){e.gallery_images=t})),set_active_images:Object(b.b)((function(e,t){e.active_images=t})),filter_gallery:Object(b.b)((function(e,t){if(t.filter===e.filter)e.filter=null,e.active_images=e.gallery_images;else{if(t.filter_type===P.TOPIC){var i=e.gallery_images.filter((function(e){return e.tags[0].subtopic===t.filter}));e.active_images=i,e.filter=t.filter}if(t.filter_type===P.THEME){var n=e.gallery_images.filter((function(e){return e.tags[0].theme===t.filter}));e.active_images=n,e.filter=t.filter}if(t.filter_type===P.DISCIPLINE){var a,s=null===(a=t.filter)||void 0===a?void 0:a.split("_");if(s){var r=s[0],o=s[1];console.log(o,r);var l=e.gallery_images.filter((function(e){return e.tags[0].discipline===r&&e.tags[0].year===o}));e.active_images=l,console.log(Object(b.e)(l)),e.filter=t.filter}}}})),set_timeline_series:Object(b.b)((function(e,t){e.timeline_series=t})),thunk_set_filter:Object(b.f)((function(e,t){null==t&&e.reset_gallery(),Object.values(D).includes(t)&&e.filter_gallery({filter_type:P.TOPIC,filter:t}),Object.values(B).includes(t)&&e.filter_gallery({filter_type:P.THEME,filter:t}),Object.values(A).includes(t)&&e.filter_gallery({filter_type:P.DISCIPLINE,filter:t})})),reset_gallery:Object(b.b)((function(e){e.active_images=e.gallery_images})),set_active_filter:Object(b.b)((function(e,t){e.filter=t})),set_active_lightbox:Object(b.b)((function(e,t){var i=e.map_spreadsheet.filter((function(e){return e.photo1===t.src}))[0],n=[];Object.keys(i).forEach((function(e){if(e.startsWith("photo")){var t={source:i[e],kind:e};n.push(t)}}));var a={images:n,description:i.info,title:i.title,author:i.author};e.active_lightbox=a})),set_loaded:Object(b.b)((function(e,t){e.loaded=t})),thunk_set_multi_filter:Object(b.f)((function(e,t){console.log(t),e.set_multi_filter(t)})),set_multi_filter:Object(b.b)((function(e,t){e.multi_tag=t}))}},Kt=Object(b.c)(qt);a.a.render(Object(u.jsx)(It.a,{theme:Dt,children:Object(u.jsx)(b.a,{store:Kt,children:Object(u.jsx)(_t,{})})}),document.getElementById("root")),At()}},[[414,1,2]]]);
//# sourceMappingURL=main.5e200e7c.chunk.js.map